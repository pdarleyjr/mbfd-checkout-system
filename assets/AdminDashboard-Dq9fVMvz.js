import{u as ce,r,j as e}from"./index-DyV6w0vC.js";import{c as b,C as n,a as i,B as c,A as oe,f as de}from"./config-mspnhQU1.js";import{a as S,C as H,T as K,M as me,g as o}from"./github-DEal1J8j.js";import{T as _}from"./truck-CQPHkPzr.js";const xe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],he=b("arrow-left",xe);const ge=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],G=b("circle-alert",ge);const ue=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],pe=b("lock",ue);const be=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],$=b("mail",be);const ye=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],J=b("package",ye);const fe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],je=b("trending-up",fe),Se=()=>{const P=ce(),[C,D]=r.useState(!1),[d,Q]=r.useState(""),[M,u]=r.useState(""),[h,y]=r.useState("fleet"),[W,X]=r.useState(new Map),[A,Y]=r.useState([]),[E,Z]=r.useState(null),[f,ee]=r.useState([]),[se,T]=r.useState(!1),[m,j]=r.useState(null),[N,v]=r.useState(""),[R,F]=r.useState(!1),[ae,z]=r.useState(!1),[a,p]=r.useState(null),[te,U]=r.useState(!1),[w,B]=r.useState(!1),[q,k]=r.useState(null),O=async()=>{if(!d.trim()){u("Please enter a password");return}o.setAdminPassword(d);try{await I(),D(!0),u("")}catch(s){console.error("Authentication failed:",s),s instanceof Error&&s.message.includes("Unauthorized")?u("Incorrect password. Please try again."):s instanceof Error&&s.message.includes("Failed to fetch")?u("Network error. Please check your connection and try again."):u("Authentication failed. Please try again."),o.clearAdminPassword()}},I=async()=>{try{T(!0);const s=await o.getAllDefects(),t=o.computeFleetStatus(s);X(t),Y(s);try{const l=await o.getDailySubmissions();Z(l)}catch(l){console.error("Error fetching daily submissions:",l)}try{const l=await o.analyzeLowStockItems();ee(l)}catch(l){console.error("Error analyzing low stock:",l)}}catch(s){throw console.error("Error loading dashboard data:",s),s instanceof Error&&s.message.includes("Unauthorized")&&(D(!1),o.clearAdminPassword()),s}finally{T(!1)}},le=async()=>{if(!m||!N.trim()){alert("Please enter resolution notes");return}if(!m.issueNumber){alert("Unable to resolve: Issue number not found");return}F(!0);try{await o.resolveDefect(m.issueNumber,N,"Admin"),await I(),j(null),v(""),z(!0),setTimeout(()=>z(!1),3e3)}catch(s){console.error("Error resolving defect:",s),s instanceof Error&&s.message.includes("Unauthorized")?(alert("Session expired. Please re-enter the admin password."),D(!1),o.clearAdminPassword()):alert("Error resolving defect. Please try again.")}finally{F(!1)}},V=async()=>{if(d){U(!0),k(null);try{const s=await o.getEmailConfig(d);p(s)}catch(s){k(s instanceof Error?s.message:"Failed to load email configuration")}finally{U(!1)}}},x=async s=>{if(!(!d||!a)){B(!0),k(null);try{const t=await o.updateEmailConfig(d,s);p(t.config),alert("Email configuration updated successfully")}catch(t){k(t instanceof Error?t.message:"Failed to update email configuration")}finally{B(!1)}}},re=async()=>{if(d&&confirm("Send a test daily digest email now?"))try{await o.sendManualDigest(d),alert("Test digest sent successfully! Check your email.")}catch(s){alert("Failed to send test digest: "+(s instanceof Error?s.message:"Unknown error"))}};if(r.useEffect(()=>{if(!C)return;const s=setInterval(()=>{I().catch(console.error)},12e4);return()=>clearInterval(s)},[C]),!C)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center p-4",children:e.jsx(n,{className:"max-w-md w-full",children:e.jsxs(i,{className:"py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-2xl mb-4",children:e.jsx(pe,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Admin Access Required"}),e.jsx("p",{className:"text-gray-600",children:"Enter the admin password to continue"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsx("input",{id:"password",type:"password",value:d,onChange:s=>{Q(s.target.value),u("")},onKeyDown:s=>{s.key==="Enter"&&O()},placeholder:"Enter admin password",className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",autoFocus:!0}),M&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:M})]}),e.jsx(c,{onClick:O,className:"w-full",size:"lg",children:"Access Admin Dashboard"}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{onClick:()=>P("/"),className:"text-sm text-gray-600 hover:text-gray-900 font-medium",children:"← Back to Login"})})]})]})})});if(se)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})});const L=oe,ne=new Date().toLocaleDateString("en-US");return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[ae&&e.jsxs("div",{className:"fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Defect resolved successfully!"})]}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"MBFD Fleet Management System"})]}),e.jsxs(c,{onClick:()=>P("/"),variant:"secondary",className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Back to Login"]})]}),e.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>y("fleet"),className:`px-6 py-3 font-semibold transition-all flex items-center gap-2 ${h==="fleet"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(_,{className:"w-5 h-5"}),"Fleet Status"]}),e.jsxs("button",{onClick:()=>y("activity"),className:`px-6 py-3 font-semibold transition-all flex items-center gap-2 ${h==="activity"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(H,{className:"w-5 h-5"}),"Daily Activity"]}),e.jsxs("button",{onClick:()=>y("supplies"),className:`px-6 py-3 font-semibold transition-all flex items-center gap-2 ${h==="supplies"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(J,{className:"w-5 h-5"}),"Supply Alerts",f.length>0&&e.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:f.length})]}),e.jsxs("button",{onClick:()=>{y("notifications"),a||V()},className:`px-6 py-3 font-semibold transition-all flex items-center gap-2 ${h==="notifications"?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx($,{className:"w-5 h-5"}),"Notifications"]})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[h==="fleet"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Fleet Status"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:L.map(s=>{const t=W.get(s)||0,l=t===0;return e.jsx(n,{className:l?"border-green-500":"border-red-500",children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(_,{className:`w-8 h-8 ${l?"text-green-500":"text-red-500"}`}),l?e.jsx(S,{className:"w-6 h-6 text-green-500"}):e.jsx(G,{className:"w-6 h-6 text-red-500"})]}),e.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:s}),e.jsx("p",{className:`text-sm font-semibold ${l?"text-green-600":"text-red-600"}`,children:l?"✓ All Clear":`${t} Defect${t!==1?"s":""}`})]})},s)})})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Open Defects (",A.length,")"]}),A.length===0?e.jsx(n,{children:e.jsxs(i,{className:"py-12 text-center",children:[e.jsx(S,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"No Open Defects"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"All apparatus are fully operational"})]})}):e.jsx("div",{className:"space-y-3",children:A.map(s=>e.jsx(n,{className:"hover:shadow-md transition-shadow",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold",children:s.apparatus}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${s.status==="missing"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:s.status==="missing"?"❌ Missing":"⚠️ Damaged"})]}),e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:[s.compartment,": ",s.item]}),e.jsxs("p",{className:"text-gray-600 text-sm mb-2",children:["Reported by ",s.reportedBy," on ",de(s.reportedAt)]}),s.notes&&e.jsx("p",{className:"text-gray-700 text-sm bg-gray-50 p-3 rounded-lg",children:s.notes.split(`
`).slice(0,3).join(`
`)})]}),e.jsx(c,{onClick:()=>j(s),variant:"primary",size:"sm",className:"mt-3 md:mt-0 md:ml-4",children:"Resolve"})]})})},`${s.apparatus}-${s.item}`))})]})]}),h==="activity"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-6 h-6"}),"Daily Activity - ",ne]}),e.jsx(n,{className:"mb-6",children:e.jsxs(i,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Today's Submissions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:L.map(s=>{const t=E?.today.includes(s)||!1;return e.jsxs("div",{className:`p-4 rounded-lg border-2 ${t?"bg-green-50 border-green-500":"bg-gray-50 border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(_,{className:`w-6 h-6 ${t?"text-green-600":"text-gray-400"}`}),t?e.jsx(S,{className:"w-5 h-5 text-green-600"}):e.jsx(G,{className:"w-5 h-5 text-gray-400"})]}),e.jsx("p",{className:"font-bold text-gray-900",children:s}),e.jsx("p",{className:`text-sm font-semibold ${t?"text-green-600":"text-gray-500"}`,children:t?"✓ Submitted":"Pending"})]},s)})})]})}),e.jsx(n,{children:e.jsxs(i,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5"}),"Submission Statistics (Last 30 Days)"]}),e.jsx("div",{className:"space-y-3",children:L.map(s=>{const t=E?.totals.get(s)||0,l=E?.lastSubmission.get(s),g=Math.round(t/30*100);return e.jsxs("div",{className:"border-b border-gray-200 pb-3 last:border-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-semibold text-gray-900",children:s})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:t}),e.jsx("span",{className:"text-sm text-gray-600 ml-1",children:"submissions"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:[g,"% compliance rate"]}),l&&e.jsxs("span",{children:["Last: ",l]})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${g>=80?"bg-green-500":g>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Math.min(g,100)}%`}})})]},s)})})]})})]})}),h==="supplies"&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(K,{className:"w-6 h-6 text-orange-600"}),"Supply Alerts"]}),f.length===0?e.jsx(n,{children:e.jsxs(i,{className:"py-12 text-center",children:[e.jsx(J,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"No Supply Concerns"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"All items are adequately stocked"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Note:"})," Items listed below have been reported missing multiple times across different apparatus in the last 30 days. This may indicate a supply shortage requiring attention."]})}),f.map((s,t)=>e.jsx(n,{className:"border-orange-300",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(K,{className:"w-6 h-6 text-orange-600"}),e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:[s.compartment,": ",s.item]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsxs("strong",{children:["Reported missing ",s.occurrences," time",s.occurrences!==1?"s":""]})," in the last 30 days"]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Affected apparatus:"}),s.apparatus.map(l=>e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs font-semibold",children:l},l))]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsx("span",{className:"inline-flex items-center justify-center w-12 h-12 bg-orange-100 rounded-full",children:e.jsx("span",{className:"text-xl font-bold text-orange-600",children:s.occurrences})})})]})})},t))]})]}),h==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Email Notifications"}),e.jsxs(c,{onClick:re,variant:"secondary",className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),"Send Test Digest"]})]}),q&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:q}),te?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsx(n,{children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.enabled?"Notifications are currently enabled":"Notifications are currently disabled"})]}),e.jsx(c,{onClick:()=>x({enabled:!a.enabled}),className:a.enabled?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700",disabled:w,children:a.enabled?"Disable":"Enable"})]})})}),e.jsx(n,{children:e.jsxs(i,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Email Mode"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"radio",name:"email_mode",value:"daily_digest",checked:a.email_mode==="daily_digest",onChange:s=>x({email_mode:s.target.value}),className:"mt-1 w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Daily Digest (Recommended)"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Send one summary email per day at ",a.digest_send_time]})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"radio",name:"email_mode",value:"per_submission",checked:a.email_mode==="per_submission",onChange:s=>x({email_mode:s.target.value}),className:"mt-1 w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Per Submission"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send an email immediately after each inspection"})]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"radio",name:"email_mode",value:"hybrid",checked:a.email_mode==="hybrid",onChange:s=>x({email_mode:s.target.value}),className:"mt-1 w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Hybrid"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Immediate for critical defects, daily digest for routine"})]})]})]})]})}),e.jsx(n,{children:e.jsxs(i,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Email Recipients"}),e.jsxs("div",{className:"space-y-3",children:[a.recipients.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"email",value:s,onChange:l=>{const g=[...a.recipients];g[t]=l.target.value,p({...a,recipients:g})},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"email@example.com"}),e.jsx(c,{onClick:()=>{const l=a.recipients.filter((g,ie)=>ie!==t);x({recipients:l})},variant:"secondary",className:"bg-red-50 hover:bg-red-100 text-red-700",children:"Remove"})]},t)),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{onClick:()=>{const s=[...a.recipients,""];p({...a,recipients:s})},variant:"secondary",children:"+ Add Recipient"}),e.jsx(c,{onClick:()=>x({recipients:a.recipients.filter(s=>s!=="")}),disabled:w,children:"Save Recipients"})]})]})]})}),e.jsx(n,{children:e.jsx(i,{className:"p-6",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.enable_immediate_for_critical,onChange:s=>x({enable_immediate_for_critical:s.target.checked}),className:"mt-1 w-5 h-5 text-blue-600 rounded"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-900",children:"Immediate Alerts for Critical Defects"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Send immediate email when critical defects are found (only in hybrid mode)"})]})]})})}),e.jsx(n,{children:e.jsxs(i,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Daily Email Limit"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"number",value:a.daily_email_hard_cap,onChange:s=>p({...a,daily_email_hard_cap:parseInt(s.target.value)||250}),className:"w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1",max:"500"}),e.jsx("span",{className:"text-gray-600",children:"emails per day (max: 500)"}),e.jsx(c,{onClick:()=>x({daily_email_hard_cap:a.daily_email_hard_cap}),disabled:w,children:"Save"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Current: ",a.daily_email_hard_cap," / Recommended: 250"]})]})}),e.jsx(n,{children:e.jsxs(i,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Email Subject Template"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:a.email_subject_template,onChange:s=>p({...a,email_subject_template:s.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"MBFD Daily Inspection Summary - {date}"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Use ","{date}"," for the current date"]}),e.jsx(c,{onClick:()=>x({email_subject_template:a.email_subject_template}),disabled:w,children:"Save Template"})]})]})})]}):e.jsx(n,{children:e.jsxs(i,{className:"py-12 text-center",children:[e.jsx($,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Click the button below to load email configuration"}),e.jsx(c,{onClick:V,children:"Load Configuration"})]})})]})]}),e.jsx(me,{isOpen:!!m,onClose:()=>{j(null),v("")},title:"Resolve Defect",children:m&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Apparatus"}),e.jsx("p",{className:"font-semibold text-gray-900",children:m.apparatus}),e.jsx("p",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Item"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[m.compartment,": ",m.item]}),e.jsx("p",{className:"text-sm text-gray-600 mt-3 mb-1",children:"Status"}),e.jsx("p",{className:"font-semibold text-gray-900",children:m.status==="missing"?"Missing":"Damaged"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Resolution Notes"}),e.jsx("textarea",{value:N,onChange:s=>v(s.target.value),placeholder:"Describe how this was resolved (e.g., 'Replaced with spare', 'Item found and returned', 'Repaired by maintenance')",rows:4,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{onClick:le,disabled:R||!N.trim(),className:"flex-1",children:R?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Resolving..."]}):"Mark as Resolved"}),e.jsx(c,{onClick:()=>{j(null),v("")},variant:"secondary",className:"flex-1",disabled:R,children:"Cancel"})]})]})})]})};export{Se as AdminDashboard};
//# sourceMappingURL=AdminDashboard-Dq9fVMvz.js.map
