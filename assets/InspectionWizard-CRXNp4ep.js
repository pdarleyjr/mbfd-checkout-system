import{r as d,j as e,u as pe}from"./index-BhOU8FPR.js";import{c as M,b as $,B as f,C as be,d as fe,a as ye}from"./config-BPb7z1jC.js";import{X as A,T as O,M as L,g as G,C as je,a as te,c as we}from"./inventory-BBg3ryWg.js";const Ne=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],ve=M("check-check",Ne);const ke=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ae=M("check",ke);const Se=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ce=M("chevron-left",Se);const Ie=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$e=M("chevron-right",Ie);const _e=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],De=M("gauge",_e);const Me=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Te=M("shield",Me);const Ee=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],re=M("wrench",Ee),Pe=({item:r,status:n,hasExistingDefect:a,onStatusChange:i})=>{const[m,y]=d.useState(!1),[o,p]=d.useState("missing"),[c,g]=d.useState(""),[T,E]=d.useState(!1),[j,P]=d.useState(""),I=typeof r=="string"?r:r.name,F=typeof r=="object"?r.expectedQuantity:void 0,_=typeof r=="object"?r.note:void 0,R=(typeof r=="object"?r.inputType:"checkbox")==="radio"||typeof r=="object"&&r.name.toLowerCase().includes("radio"),S=b=>{b==="present"?a?E(!0):(i("present",void 0,void 0,void 0,j),g("")):(p(b),y(!0))},w=b=>{b==="fixed"?i("present","Item has been fixed and is now back in service",void 0,"fixed"):b==="still_damaged"?i("damaged","Issue still present - previously reported",void 0,"still_damaged"):i("present"),E(!1)},H=()=>{if(!c.trim()){alert("Please enter notes describing the issue");return}i(o,c,void 0,void 0,j),y(!1),g("")},N=()=>{y(!1),g("")};return R?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:$("p-4 rounded-2xl transition-all duration-200 border-2 shadow-sm space-y-3",{"bg-white border-gray-200 hover:border-gray-300":n==="present"&&!a,"bg-green-50 border-green-500 shadow-green-100":n==="present"&&!a,"bg-red-50 border-red-500 shadow-red-100":n==="missing","bg-yellow-50 border-yellow-500 shadow-yellow-100":n==="damaged","bg-orange-50 border-orange-500 shadow-orange-100":a}),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-base leading-tight",children:I}),_&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_}),a&&e.jsx("span",{className:"inline-block mt-2 px-3  py-1 bg-orange-600 text-white text-xs font-bold rounded-full shadow-sm",children:"âš ï¸ Previously Reported"})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>S("present"),className:$("flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95",n==="present"?"bg-green-500 text-white shadow-lg scale-105 shadow-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300"),title:"Present/Working",children:e.jsx(ae,{className:"w-7 h-7 stroke-[3]"})}),e.jsx("button",{onClick:()=>S("missing"),className:$("flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95",n==="missing"?"bg-red-500 text-white shadow-lg scale-105 shadow-red-200":"bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300"),title:"Missing",children:e.jsx(A,{className:"w-7 h-7 stroke-[3]"})}),e.jsx("button",{onClick:()=>S("damaged"),className:$("flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95",n==="damaged"?"bg-yellow-500 text-white shadow-lg scale-105 shadow-yellow-200":"bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300"),title:"Damaged",children:e.jsx(O,{className:"w-7 h-7 stroke-[3]"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-600 mb-1",children:"Radio Number (Optional):"}),e.jsx("input",{type:"text",value:j,onChange:b=>P(b.target.value),placeholder:"Enter radio #",className:"w-full px-3 py-2 text-sm rounded-lg border-2 border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-600 outline-none bg-white text-gray-900 font-medium"})]})]}),e.jsx(L,{isOpen:T,onClose:()=>E(!1),title:`Previously Reported Issue: "${I}"`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-300 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-orange-900 font-semibold mb-2",children:"âš ï¸ This item was previously reported as defective."}),e.jsx("p",{className:"text-xs text-orange-800",children:"Please select the current status of this item:"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(f,{onClick:()=>w("fixed"),className:"w-full h-14 text-base font-bold rounded-xl bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 flex items-center justify-center gap-2",children:[e.jsx(re,{className:"w-5 h-5"}),"Fixed / Back in Service"]}),e.jsxs(f,{onClick:()=>w("still_damaged"),variant:"secondary",className:"w-full h-14 text-base font-bold rounded-xl bg-yellow-100 hover:bg-yellow-200 text-yellow-900 flex items-center justify-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Still Damaged / Missing"]}),e.jsx(f,{onClick:()=>w("no_change"),variant:"secondary",className:"w-full h-12 text-sm font-bold rounded-xl bg-gray-100 hover:bg-gray-200 text-gray-700",children:"Skip - No Change"})]})]})}),e.jsx(L,{isOpen:m,onClose:N,title:`Item ${o==="missing"?"Missing":"Damaged"}: "${I}"`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-gradient-to-r from-gray-50 to-gray-100",children:[o==="missing"?e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:e.jsx(A,{className:"w-6 h-6 text-red-600"})}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0",children:e.jsx(O,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600",children:o==="missing"?"Missing Equipment":"Damaged Equipment"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Please provide detailed information"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:c,onChange:b=>g(b.target.value),placeholder:"Describe the issue in detail...",rows:4,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:ring-4 focus:ring-blue-400 focus:border-blue-500 outline-none transition-all resize-none text-base",autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Provide as much detail as possible to help with resolution"})]}),R&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Radio Number (if known)"}),e.jsx("input",{type:"text",value:j,onChange:b=>P(b.target.value),placeholder:"Enter radio # if known",className:"w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-600 outline-none bg-white text-gray-900"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-800",children:["ðŸ“¸ ",e.jsx("strong",{children:"Photo upload coming soon!"})," For now, please include detailed descriptions in your notes."]})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(f,{onClick:H,className:"flex-1 h-12 text-base font-bold rounded-xl",children:"Submit Report"}),e.jsx(f,{onClick:N,variant:"secondary",className:"flex-1 h-12 text-base font-bold rounded-xl",children:"Cancel"})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:$("flex items-center justify-between p-4 rounded-2xl transition-all duration-200 border-2 shadow-sm",{"bg-white border-gray-200 hover:border-gray-300":n==="present"&&!a,"bg-green-50 border-green-500 shadow-green-100":n==="present"&&!a,"bg-red-50 border-red-500 shadow-red-100":n==="missing","bg-yellow-50 border-yellow-500 shadow-yellow-100":n==="damaged","bg-orange-50 border-orange-500 shadow-orange-100":a}),children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[e.jsxs("p",{className:"font-semibold text-gray-900 text-base leading-tight",children:[I,F&&e.jsxs("span",{className:"text-sm text-gray-600 ml-1",children:["(",F,")"]})]}),_&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:_}),a&&e.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-orange-600 text-white text-xs font-bold rounded-full shadow-sm",children:"âš ï¸ Previously Reported"})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>S("present"),className:$("flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95",n==="present"?"bg-green-500 text-white shadow-lg scale-105 shadow-green-200":"bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300"),title:"Present/Working",children:e.jsx(ae,{className:"w-7 h-7 stroke-[3]"})}),e.jsx("button",{onClick:()=>S("missing"),className:$("flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95",n==="missing"?"bg-red-500 text-white shadow-lg scale-105 shadow-red-200":"bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300"),title:"Missing",children:e.jsx(A,{className:"w-7 h-7 stroke-[3]"})}),e.jsx("button",{onClick:()=>S("damaged"),className:$("flex items-center justify-center w-14 h-14 rounded-2xl transition-all duration-200 active:scale-95",n==="damaged"?"bg-yellow-500 text-white shadow-lg scale-105 shadow-yellow-200":"bg-gray-100 text-gray-400 hover:bg-gray-200 active:bg-gray-300"),title:"Damaged",children:e.jsx(O,{className:"w-7 h-7 stroke-[3]"})})]})]}),e.jsx(L,{isOpen:T,onClose:()=>E(!1),title:`Previously Reported Issue: "${I}"`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 border-2 border-orange-300 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-orange-900 font-semibold mb-2",children:"âš ï¸ This item was previously reported as defective."}),e.jsx("p",{className:"text-xs text-orange-800",children:"Please select the current status of this item:"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(f,{onClick:()=>w("fixed"),className:"w-full h-14 text-base font-bold rounded-xl bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 flex items-center justify-center gap-2",children:[e.jsx(re,{className:"w-5 h-5"}),"Fixed / Back in Service"]}),e.jsxs(f,{onClick:()=>w("still_damaged"),variant:"secondary",className:"w-full h-14 text-base font-bold rounded-xl bg-yellow-100 hover:bg-yellow-200 text-yellow-900 flex items-center justify-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Still Damaged / Missing"]}),e.jsx(f,{onClick:()=>w("no_change"),variant:"secondary",className:"w-full h-12 text-sm font-bold rounded-xl bg-gray-100 hover:bg-gray-200 text-gray-700",children:"Skip - No Change"})]})]})}),e.jsx(L,{isOpen:m,onClose:N,title:`Item ${o==="missing"?"Missing":"Damaged"}: "${I}"`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-gradient-to-r from-gray-50 to-gray-100",children:[o==="missing"?e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0",children:e.jsx(A,{className:"w-6 h-6 text-red-600"})}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0",children:e.jsx(O,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-600",children:o==="missing"?"Missing Equipment":"Damaged Equipment"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Please provide detailed information"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{value:c,onChange:b=>g(b.target.value),placeholder:"Describe the issue in detail...",rows:4,className:"w-full px-4 py-3 rounded-xl border-2 border-gray-300 focus:ring-4 focus:ring-blue-400 focus:border-blue-500 outline-none transition-all resize-none text-base",autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Provide as much detail as possible to help with resolution"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-xs text-blue-800",children:["ðŸ“¸ ",e.jsx("strong",{children:"Photo upload coming soon!"})," For now, please include detailed descriptions in your notes."]})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(f,{onClick:H,className:"flex-1 h-12 text-base font-bold rounded-xl",children:"Submit Report"}),e.jsx(f,{onClick:N,variant:"secondary",className:"flex-1 h-12 text-base font-bold rounded-xl",children:"Cancel"})]})]})})]})},Oe=()=>{const[r,n]=d.useState(()=>{const a=window.innerWidth,i=window.innerHeight;return{isMobile:a<768,isTablet:a>=768&&a<1024,isDesktop:a>=1024,screenWidth:a,screenHeight:i,orientation:a>i?"landscape":"portrait"}});return d.useEffect(()=>{const a=()=>{const i=window.innerWidth,m=window.innerHeight;n({isMobile:i<768,isTablet:i>=768&&i<1024,isDesktop:i>=1024,screenWidth:i,screenHeight:m,orientation:i>m?"landscape":"portrait"})};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),r};function ne(r,n){const a=()=>{if(typeof window>"u")return n;try{const o=window.localStorage.getItem(r);return o?JSON.parse(o):n}catch(o){return console.warn(`Error reading localStorage key "${r}":`,o),n}},[i,m]=d.useState(a),y=o=>{try{const p=o instanceof Function?o(i):o;m(p),typeof window<"u"&&window.localStorage.setItem(r,JSON.stringify(p))}catch(p){console.warn(`Error setting localStorage key "${r}":`,p)}};return d.useEffect(()=>{m(a())},[]),[i,y]}function Fe(r,n=10){const[a,i]=ne(`field_history_${r}`,[]);return{history:a,addToHistory:o=>{!o||!o.trim()||i(p=>{const c=p.filter(T=>T!==o);return[o,...c].slice(0,n)})},clearHistory:()=>{i([])}}}const ze=()=>{const r=pe(),n=Oe(),[a,i]=d.useState(null),[m,y]=d.useState(null),[o,p]=d.useState(0),[c,g]=d.useState(new Map),[T,E]=d.useState(new Map),[j,P]=d.useState([]),[I,F]=d.useState(!0),[_,B]=d.useState(!1),[R,S]=d.useState(!1),[w,H]=d.useState(0),[N,b]=d.useState(""),[U,K]=d.useState(!1),[X,oe]=ne("mbfd_last_officer_values",{});d.useEffect(()=>{const s=sessionStorage.getItem("user");if(!s){r("/");return}const t=JSON.parse(s);i(t),le(t)},[r]);const le=async s=>{try{let t;s.apparatus.startsWith("Engine")?t="engine_checklist.json":s.apparatus==="Ladder 1"?t="ladder1_checklist.json":s.apparatus==="Ladder 3"?t="ladder3_checklist.json":s.apparatus==="Rope Inventory"?t="rope_checklist.json":t="rescue_checklist.json";const h=await(await fetch(`/mbfd-checkout-system/data/${t}`)).json();y(h);const u=new Map;h.compartments.forEach(k=>{k.items.forEach(C=>{const W=typeof C=="string"?C:C.name,Q=`${k.id}:${W}`;u.set(Q,{name:W,status:"present",inputType:typeof C=="object"?C.inputType:"checkbox",expectedQuantity:typeof C=="object"?C.expectedQuantity:void 0})})}),g(u),h.officerChecklist&&P(h.officerChecklist.map(k=>({...k,checked:!1,value:X[k.id]||""})));const x=await G.checkExistingDefects(s.apparatus);E(x),F(!1)}catch(t){console.error("Error loading data:",t),alert("Error loading inspection data. Please try again."),F(!1)}},ie=(s,t,l,h)=>{g(u=>{const x=new Map(u),k=x.get(s);return k&&x.set(s,{...k,status:t,notes:l,photoUrl:h}),x})},ce=(s,t,l)=>{P(h=>{const u=[...h];u[s]={...u[s],checked:t,value:l};const x={...X};return x[u[s].id]=l||"",oe(x),u})},de=()=>{P(s=>s.map(t=>{let l=t.value||"";if(!t.value||t.value==="")switch(t.id){case"psi_front":case"psi_rear":l=115;break;case"brake_psi":l=120;break;case"m_cylinder_psi":l=1800;break;case"fuel_percent":l=100;break;case"def_percent":l=100;break;default:t.required&&t.inputType!=="checkbox"&&(l="N/A");break}return{...t,checked:!0,value:l}}))},he=()=>{v&&g(s=>{const t=new Map(s);return v.items.forEach(l=>{const h=typeof l=="string"?l:l.name,u=`${v.id}:${h}`,x=t.get(u);x&&t.set(u,{...x,status:"present"})}),t})},ue=async()=>{if(!(!a||!m)){B(!0);try{const s=[];c.forEach(t=>{if(t.status!=="present"){const l=m.compartments.find(h=>h.items.some(u=>(typeof u=="string"?u:u.name)===t.name));s.push({compartment:l?.title||"Unknown",item:t.name,status:t.status,notes:t.notes||"",photoUrl:t.photoUrl})}}),await G.submitChecklist({user:a,apparatus:a.apparatus,date:new Date().toISOString(),items:Array.from(c.values()),defects:s,shift:a.shift,unitNumber:a.unitNumber,officerChecklist:j});try{const t=c.size,l=Array.from(c.values()).filter(x=>x.status==="present").length;let h="rescue";a.apparatus.startsWith("Engine")?h="engine":a.apparatus.startsWith("Ladder")?h="ladder":a.apparatus==="Rope Inventory"&&(h="rope");const u=s.map(x=>({item:x.item,category:x.compartment,severity:x.status==="missing"?"critical":"high"}));await G.sendNotification({apparatus:a.apparatus,operator:a.name,checklistType:h,totalItems:t,completedItems:l,defects:u,githubIssueUrl:void 0}),console.log("Notification queued/sent successfully")}catch(t){console.error("Failed to send notification (non-critical):",t)}if(s.length>0)try{const t=s.map(l=>({apparatus:a.apparatus,compartment:l.compartment,item:l.item,deficiencyType:l.status,createdBy:a.name,notes:l.notes||void 0}));await we(t),console.log(`Successfully created ${t.length} supply task(s)`)}catch(t){console.error("Failed to create supply tasks (non-critical):",t)}sessionStorage.removeItem("user"),H(s.length),S(!0)}catch(s){console.error("Error submitting inspection:",s);let t="Error submitting inspection. Please try again.";s instanceof Error&&(s.message.includes("Failed to fetch")?t="No internet connection. Please check your connection and try again.":s.message.includes("defect submissions failed")&&(t="Some defects failed to submit. Please check your connection and try again. Partial data may have been recorded.")),alert(t)}finally{B(!1)}}},xe=async()=>{if(!N||!N.includes("@")){alert("Please enter a valid email address");return}K(!0);try{const s={to:N,subject:`MBFD Inspection Summary - ${a?.apparatus} - ${new Date().toLocaleDateString()}`,inspection:{apparatus:a?.apparatus,operator:a?.name,rank:a?.rank,date:new Date().toISOString(),shift:a?.shift,unitNumber:a?.unitNumber,defectCount:w,officerChecklist:j}};if(!(await fetch("https://mbfd-github-proxy.pdarleyjr.workers.dev/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw new Error("Failed to send email");alert("âœ… Inspection summary sent to your email!"),b("")}catch(s){console.error("Error sending email:",s),alert("Failed to send email. Please try again.")}finally{K(!1)}},Y=()=>{S(!1),r("/")};if(I)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-semibold",children:"Loading inspection checklist..."})]})});if(!a||!m)return null;const V=j.length>0,J=(V?1:0)+m.compartments.length,D=V&&o===0,me=V?o-1:o,v=D?null:m.compartments[me],ge=o===J-1,Z=D?j.every(s=>s.inputType==="checkbox"?s.checked:s.required?s.checked&&s.value&&s.value.toString().trim()!=="":s.checked||s.value&&s.value.toString().trim()!==""):v?.items.every(s=>{const t=typeof s=="string"?s:s.name,l=`${v.id}:${t}`;return c.get(l)?.status!==void 0}),ee=new Date().toLocaleDateString("en-US",{weekday:"long"}),q=m.dailySchedule?.find(s=>s.day===ee),z=n.isDesktop?"max-w-7xl mx-auto":n.isTablet?"max-w-4xl px-4":"max-w-2xl px-4",se=n.isDesktop?"grid grid-cols-2 lg:grid-cols-3 gap-4":"space-y-3";return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-gray-100 pb-24",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-800 via-blue-900 to-blue-800 text-white sticky top-0 z-10 shadow-2xl",children:e.jsxs("div",{className:`${z} mx-auto ${n.isDesktop?"px-6":"px-4"} py-4`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a.apparatus}),e.jsxs("p",{className:"text-sm text-blue-100",children:[a.name," â€¢ ",a.rank]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-xs text-blue-200",children:["Shift ",a.shift]}),e.jsxs("p",{className:"text-sm font-semibold",children:["Unit ",a.unitNumber]}),n.isDesktop&&e.jsx("p",{className:"text-xs text-blue-300 mt-1",children:"ðŸ–¥ï¸ Desktop Mode"})]})]}),e.jsx("div",{className:"flex items-center gap-1.5",children:Array.from({length:J}).map((s,t)=>e.jsx("div",{className:`h-2 flex-1 rounded-full transition-all duration-300 ${t<o?"bg-green-400":t===o?"bg-white":"bg-blue-600"}`},t))}),e.jsxs("p",{className:"text-xs text-blue-100 mt-2 text-center font-medium",children:["Step ",o+1," of ",J]})]})}),q&&q.tasks.length>0&&q.tasks[0]!=="None"&&e.jsx("div",{className:`${z} mx-auto ${n.isDesktop?"px-6":"px-4"} mt-4`,children:e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border-2 border-amber-400 rounded-2xl p-4 shadow-md",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(je,{className:"w-6 h-6 text-amber-700 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-amber-900 mb-1",children:["Today's Schedule - ",ee]}),e.jsx("ul",{className:"space-y-1",children:q.tasks.map((s,t)=>e.jsxs("li",{className:"text-sm text-amber-800 font-medium",children:["â€¢ ",s]},t))})]})]})})}),e.jsx("div",{className:`${z} mx-auto ${n.isDesktop?"px-6":"px-4"} py-6`,children:e.jsxs(be,{className:`shadow-2xl ${n.isDesktop?"rounded-xl":"rounded-2xl"}`,children:[e.jsx(fe,{className:"bg-gradient-to-r from-gray-50 to-slate-50 border-b-2 border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[D?e.jsx(Te,{className:"w-8 h-8 text-blue-700"}):e.jsx(De,{className:"w-8 h-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:D?"Officer Checklist":v?.title}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:D?"Complete all officer-specific checks":"Check all equipment in this compartment"})]})]}),e.jsxs(f,{onClick:D?de:he,variant:"secondary",className:"flex items-center gap-2 h-10 px-4 text-sm font-bold bg-blue-100 hover:bg-blue-200 text-blue-800",children:[e.jsx(ve,{className:"w-5 h-5"}),n.isMobile?"All OK":"Check All"]})]})}),e.jsx(ye,{className:n.isDesktop?"p-6":"p-4",children:D?e.jsx("div",{className:se,children:j.map((s,t)=>e.jsx(Le,{item:s,index:t,onChange:ce},s.id))}):e.jsx("div",{className:se,children:v?.items.map(s=>{const t=typeof s=="string"?s:s.name,l=`${v.id}:${t}`,h=c.get(l),u=`${v.title}:${t}`,x=T.has(u),k=typeof s=="object"?s:{name:s,inputType:"checkbox"};return e.jsx(Pe,{item:k,compartmentId:v.id,status:h?.status||"present",hasExistingDefect:x,onStatusChange:(C,W,Q)=>ie(l,C,W,Q)},l)})})})]})}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-gray-300 p-4 shadow-2xl",children:e.jsxs("div",{className:`${z} mx-auto ${n.isDesktop?"px-6":""} flex gap-3`,children:[o>0&&e.jsxs(f,{onClick:()=>p(o-1),variant:"secondary",className:"flex items-center gap-2 h-14 px-6 rounded-xl font-bold bg-gray-100 hover:bg-gray-200 text-gray-800",children:[e.jsx(Ce,{className:"w-5 h-5"}),"Previous"]}),e.jsx("div",{className:"flex-1"}),ge?e.jsx(f,{onClick:ue,disabled:!Z||_,className:"flex items-center gap-2 h-14 px-8 rounded-xl font-bold shadow-lg bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 disabled:from-gray-400 disabled:to-gray-500",children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-6 h-6"}),"Complete Inspection"]})}):e.jsxs(f,{onClick:()=>p(o+1),disabled:!Z,className:"flex items-center gap-2 h-14 px-8 rounded-xl font-bold shadow-lg bg-gradient-to-r from-blue-700 to-blue-800 hover:from-blue-800 hover:to-blue-900 disabled:from-gray-400 disabled:to-gray-500",children:["Next",e.jsx($e,{className:"w-5 h-5"})]})]})}),e.jsx(L,{isOpen:R,onClose:Y,title:"Inspection Complete!",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(te,{className:"w-12 h-12 text-green-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"âœ… Inspection Submitted Successfully!"}),e.jsxs("p",{className:"text-gray-700 font-medium",children:["Your ",a?.apparatus," inspection has been recorded."]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border-2 border-gray-200",children:[e.jsxs("p",{className:"text-sm text-gray-800 font-semibold",children:[e.jsx("strong",{children:"Defects Reported:"})," ",w]}),w>0&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Issues have been logged and will be reviewed by maintenance."})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border-2 border-blue-200",children:[e.jsx("p",{className:"text-sm font-bold text-blue-900 mb-3",children:"ðŸ“§ Get a copy of this inspection via email"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"email",value:N,onChange:s=>b(s.target.value),placeholder:"Enter your email address",className:"w-full px-4 py-3 rounded-xl border-2 border-blue-300 focus:ring-4 focus:ring-blue-400 focus:border-blue-600 outline-none transition-all text-base",disabled:U}),e.jsx(f,{onClick:xe,disabled:U||!N,variant:"secondary",className:"w-full h-10 text-sm font-bold rounded-xl bg-blue-600 hover:bg-blue-700 text-white disabled:bg-gray-400",children:U?"Sending...":"Send Summary"})]})]}),e.jsx(f,{onClick:Y,className:"w-full h-12 text-base font-bold rounded-xl bg-gradient-to-r from-blue-700 to-blue-800 hover:from-blue-800 hover:to-blue-900",children:"Return to Home"})]})})]})},Le=({item:r,index:n,onChange:a})=>{const{history:i,addToHistory:m}=Fe(r.id),[y,o]=d.useState(!1),p=(c,g)=>{a(n,c,g),g&&typeof g=="string"&&m(g)};return r.inputType==="checkbox"?e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-xl bg-white border-2 border-gray-300 transition-all hover:border-blue-400 shadow-sm",children:[e.jsx("input",{type:"checkbox",checked:r.checked,onChange:c=>p(c.target.checked),className:"w-6 h-6 rounded-lg border-2 border-gray-400 text-blue-600 focus:ring-4 focus:ring-blue-400 cursor-pointer"}),e.jsx("label",{className:"flex-1 font-semibold text-gray-900 cursor-pointer",children:r.name})]}):e.jsxs("div",{className:"p-4 rounded-xl bg-white border-2 border-gray-300 space-y-2 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:r.checked,onChange:()=>p(r.checked,r.value),className:"w-5 h-5 rounded border-2 border-gray-400 text-blue-600 cursor-pointer"}),e.jsxs("label",{className:"font-semibold text-gray-900 text-sm",children:[r.name,r.required&&e.jsx("span",{className:"text-red-600 ml-1",children:"*"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:r.inputType==="number"||r.inputType==="percentage"?"number":"text",value:r.value||"",onChange:c=>p(r.checked,r.inputType==="number"?parseFloat(c.target.value)||"":c.target.value),onFocus:()=>o(!0),onBlur:()=>setTimeout(()=>o(!1),200),placeholder:r.inputType==="percentage"?"Enter %":r.inputType==="number"?"Enter number":"Enter value",className:"w-full px-3 py-3 text-base rounded-lg border-2 border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-600 outline-none bg-white text-gray-900 font-medium"}),y&&i.length>0&&r.inputType==="text"&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border-2 border-gray-300 rounded-lg shadow-xl max-h-40 overflow-y-auto",children:i.map((c,g)=>e.jsx("button",{onClick:()=>{p(!0,c),o(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-blue-50 transition-colors text-gray-900 font-medium",children:c},g))})]})]})};export{ze as InspectionWizard};
//# sourceMappingURL=InspectionWizard-CRXNp4ep.js.map
