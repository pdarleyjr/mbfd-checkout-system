import{u as qt,a as Ee,j as t,m as B,R as Gt,A as bt,P as Xt,O as Jt,C as Qt,T as Zt}from"./ui-CK6awmVK.js";import{r as d,h as y,a as Pr,R as Ft,u as Rr}from"./vendor-DtipCrYl.js";import{a as Ae}from"./SkeletonLoader-DZcLVolP.js";import{T as C}from"./TouchFeedback-jmoWXbnW.js";import{c as Or,s as W,z as lt}from"./index-O4SU3St8.js";import{A as ye,a as vt,X as er,T as _t}from"./config-BM_7qAFy.js";import{C as Tt,a as Ar,S as Lr}from"./square-pen-uBbVBcd-.js";import{w as Mr,R as Ne,B as We,C as _e,X as Te,Y as Ie,T as Se,L as Hr,a as De,P as Vr,b as Br,c as Ur,d as Wr,e as zr}from"./charts-CXHUXBrL.js";import{M as tr,S as It,R as Dt,V as Kr}from"./VehicleManagement-D6RJ6Ht-.js";import{H as Yr}from"./house-CWo5VH-O.js";const qr=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],Gr=Or("cloud-download",qr),Xr=({children:e,leftAction:r,rightAction:a,threshold:n=80,className:s=""})=>{const l=qt(0),o=Ee(l,[-n,0,n],[a?.color||"#ef4444","#ffffff",r?.color||"#10b981"]),c=(i,m)=>{const f=m.offset.x;f>n&&r?(r.onTrigger(),l.set(0)):(f<-n&&a&&a.onTrigger(),l.set(0))};return t.jsxs("div",{className:`relative overflow-hidden ${s}`,children:[t.jsxs("div",{className:"absolute inset-0 flex justify-between items-center px-6",children:[r&&t.jsxs(B.div,{className:"flex items-center gap-2 text-white font-semibold",style:{opacity:Ee(l,[0,n],[0,1])},children:[r.icon&&t.jsx("span",{children:r.icon}),t.jsx("span",{children:r.label})]}),a&&t.jsxs(B.div,{className:"flex items-center gap-2 text-white font-semibold ml-auto",style:{opacity:Ee(l,[-n,0],[1,0])},children:[t.jsx("span",{children:a.label}),a.icon&&t.jsx("span",{children:a.icon})]})]}),t.jsx(B.div,{drag:"x",dragConstraints:{left:a?-n*1.5:0,right:r?n*1.5:0},dragElastic:.1,onDragEnd:c,style:{x:l,backgroundColor:o},className:"relative z-10 bg-white dark:bg-gray-800 touch-pan-y",children:e})]})},Jr=({children:e,onRefresh:r,threshold:a=80,className:n=""})=>{const[s,l]=d.useState(!1),o=qt(0),c=d.useRef(null),i=Ee(o,[0,a],[0,1]),m=Ee(o,[0,a],[0,180]),f=async(u,h)=>{if(h.offset.y>a&&!s){l(!0);try{await r()}finally{l(!1),o.set(0)}}else o.set(0)},p=(u,h)=>{const x=c.current;x&&x.scrollTop===0&&h.offset.y>0&&o.set(Math.min(h.offset.y,a*1.5))};return t.jsxs("div",{ref:c,className:`relative overflow-auto ${n}`,children:[t.jsx(B.div,{className:"absolute top-0 left-0 right-0 flex items-center justify-center py-4 z-10",style:{opacity:i,height:Ee(o,[0,a],[0,60])},children:t.jsx(B.div,{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full",style:{rotate:s?void 0:m},animate:s?{rotate:360}:{},transition:{repeat:s?1/0:0,duration:1,ease:"linear"}})}),t.jsx(B.div,{drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.1,onDrag:p,onDragEnd:f,style:{y:o},className:"touch-pan-x",children:e})]})},Pt=({isOpen:e,onClose:r,title:a,children:n,showHandle:s=!0,className:l=""})=>t.jsx(Gt,{open:e,onOpenChange:o=>!o&&r(),children:t.jsx(bt,{children:e&&t.jsxs(Xt,{forceMount:!0,children:[t.jsx(Jt,{asChild:!0,children:t.jsx(B.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),t.jsx(Qt,{asChild:!0,children:t.jsxs(B.div,{className:`
                  fixed bottom-0 left-0 right-0 z-50
                  bg-white dark:bg-gray-800
                  rounded-t-3xl shadow-2xl
                  max-h-[90vh] overflow-hidden
                  ${l}
                `,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:300,damping:30},drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.2,onDragEnd:(o,c)=>{c.offset.y>100&&r()},children:[s&&t.jsx("div",{className:"flex justify-center pt-3 pb-2",children:t.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),a&&t.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:t.jsx(Zt,{className:"text-xl font-bold text-gray-900 dark:text-white",children:a})}),t.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)] p-6",children:n})]})})]})})});function Qr({formId:e}){const[r,a]=d.useState(!0),[n,s]=d.useState(null);d.useEffect(()=>{l()},[e]);const l=async()=>{try{const c=await fetch(`${ye}/ics212/forms/${e}`);if(!c.ok)throw new Error("Failed to fetch form");const i=await c.json();s(i.form)}catch(c){console.error("Error fetching form detail:",c),W({message:"Failed to load form details",type:"error"})}finally{a(!1)}},o=()=>{n?.pdf_url&&window.open(n.pdf_url,"_blank")};return r?t.jsx("div",{className:"p-4 space-y-4",children:t.jsxs("div",{className:"animate-pulse space-y-3",children:[t.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),t.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]})}):n?t.jsxs("div",{className:"space-y-4 max-h-[80vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-800 p-4 border-b border-gray-200 dark:border-gray-700",children:[t.jsx("h3",{className:"font-bold text-xl text-gray-900 dark:text-white",children:n.vehicle_id_no}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:n.incident_name}),t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${n.release_decision==="hold"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"}`,children:n.release_decision==="hold"?"ðŸ”´ HOLD":"ðŸŸ¢ RELEASED"})})]}),n.pdf_url&&t.jsxs("div",{className:"px-4",children:[t.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-900",children:t.jsx("iframe",{src:n.pdf_url,className:"w-full",style:{height:"400px"},title:"PDF Preview"})}),t.jsx(C,{children:t.jsx("button",{onClick:o,className:"w-full mt-2 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"ðŸ“¥ Download PDF"})})]}),t.jsxs("div",{className:"px-4 space-y-3",children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:"Inspection Details"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Inspector:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:n.inspector_name_print})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Date:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:n.inspector_date})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Time:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:n.inspector_time})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Vehicle Type:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:n.vehicle_type})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"License:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:n.vehicle_license_no})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Agency/Unit:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:n.agency_reg_unit})]})]}),n.additional_comments&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Comments:"}),t.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1 p-2 bg-gray-50 dark:bg-gray-700 rounded",children:n.additional_comments})]}),n.github_issue_number&&t.jsx(C,{children:t.jsxs("a",{href:`https://github.com/pdarleyjr/mbfd-checkout-system/issues/${n.github_issue_number}`,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-2 px-4 bg-gray-100 dark:bg-gray-700 text-blue-600 dark:text-blue-400 rounded-lg text-center font-medium hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:["View GitHub Issue #",n.github_issue_number," â†’"]})})]})]}):t.jsx("div",{className:"p-4 text-center",children:t.jsx("p",{className:"text-red-500",children:"Form not found"})})}function Zr({formId:e}){const[r,a]=d.useState(null),[n,s]=d.useState(!0),[l,o]=d.useState(null);d.useEffect(()=>{c()},[e]);const c=async()=>{s(!0),o(null);try{const f=await fetch(vt.ics218FormById(e));if(!f.ok)throw new Error("Failed to fetch form details");const p=await f.json();a(p.form)}catch(f){console.error("Error fetching ICS 218 form details:",f),o(f instanceof Error?f.message:"Unknown error")}finally{s(!1)}},i=()=>{r?.pdf_url&&window.open(r.pdf_url,"_blank")},m=()=>{r?.github_issue_url&&window.open(r.github_issue_url,"_blank")};return n?t.jsxs("div",{className:"space-y-4 p-4",children:[t.jsx(Ae,{type:"card"}),t.jsx(Ae,{type:"card"}),t.jsx(Ae,{type:"card"})]}):l||!r?t.jsx("div",{className:"p-4",children:t.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:t.jsx("p",{className:"text-red-800 dark:text-red-200",children:l||"Form not found"})})}):t.jsxs("div",{className:"space-y-6 p-4 max-h-[70vh] overflow-y-auto",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ICS 218 - Support Vehicle/Equipment Log"}),t.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"ICS 218"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Incident Name:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.incident_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Incident Number:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.incident_number||"N/A"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Date Prepared:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(r.date_prepared).toLocaleDateString()})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Time Prepared:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.time_prepared})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Vehicle Category:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.vehicle_category})]})]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Vehicles (",r.vehicles.length,")"]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Classification"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Make/Type"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"License ID"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Agency"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Operator"}),t.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Assignment"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.vehicles.map(f=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[t.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:f.classification}),t.jsxs("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:[f.make," ",f.category_kind_type]}),t.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:f.vehicle_license_id}),t.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:f.agency_owner}),t.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:f.operator_name_contact}),t.jsx("td",{className:"px-3 py-2 text-gray-900 dark:text-white",children:f.incident_assignment})]},f.id))})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Prepared By"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Name:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.prepared_by_name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Position/Title:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:r.prepared_by_position})]}),t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Signature Date/Time:"}),t.jsx("p",{className:"text-gray-900 dark:text-white",children:new Date(r.signature_timestamp).toLocaleString()})]})]}),r.signature_data&&t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"font-semibold text-gray-700 dark:text-gray-300 block mb-2",children:"Signature:"}),t.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-2 bg-white dark:bg-gray-900 inline-block",children:t.jsx("img",{src:r.signature_data,alt:"Signature",className:"max-w-xs h-20"})})]})]}),t.jsxs("div",{className:"flex gap-3",children:[r.pdf_url&&t.jsxs("button",{onClick:i,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Download PDF"]}),r.github_issue_url&&t.jsxs("button",{onClick:m,className:"flex-1 px-4 py-3 bg-gray-800 text-white rounded-lg font-semibold hover:bg-gray-900 transition-colors flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"View GitHub Issue"]})]}),t.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["Form ID: ",r.id," | Submitted: ",new Date(r.created_at).toLocaleString()]})]})}function ea({isOpen:e,onClose:r,submission:a,onSave:n}){const[s,l]=d.useState(null),[o,c]=d.useState(!1);d.useEffect(()=>{if(a&&e){const u=typeof a.inspection_items=="string"?JSON.parse(a.inspection_items):a.inspection_items||[];l({...a,inspection_items:u})}},[a,e]);const i=d.useMemo(()=>s?.inspection_items?s.inspection_items.some(h=>h.isSafetyItem&&h.status==="fail")?"hold":"release":s?.release_decision||"release",[s?.inspection_items]),m=(u,h)=>{l(x=>({...x,[u]:h}))},f=(u,h)=>{l(x=>({...x,inspection_items:x.inspection_items.map(v=>v.itemNumber===u?{...v,status:h}:v)}))},p=async()=>{if(!(!s||!a?.form_id)){c(!0);try{const u={incident_name:s.incident_name,inspector_date:s.inspector_date,inspector_time:s.inspector_time,order_no:s.order_no,vehicle_type:s.vehicle_type,vehicle_license_no:s.vehicle_license_no,agency_reg_unit:s.agency_reg_unit,vehicle_id_no:s.vehicle_id_no,inspection_items:JSON.stringify(s.inspection_items),additional_comments:s.additional_comments,release_decision:i,inspector_name_print:s.inspector_name_print},h=await fetch(`${ye}/ics212/forms/${a.form_id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!h.ok){const x=await h.json();throw new Error(x.error||"Failed to update submission")}W({message:"Submission updated successfully",type:"success"}),n(),r()}catch(u){console.error("Error updating submission:",u),W({message:u instanceof Error?u.message:"Failed to update submission",type:"error"})}finally{c(!1)}}};return s?t.jsx(Gt,{open:e,onOpenChange:u=>!u&&r(),children:t.jsx(bt,{children:e&&t.jsxs(Xt,{forceMount:!0,children:[t.jsx(Jt,{asChild:!0,children:t.jsx(B.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})}),t.jsx(Qt,{asChild:!0,children:t.jsxs(B.div,{className:"fixed inset-0 md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 z-50 w-full md:w-full md:max-w-4xl bg-white dark:bg-gray-800 md:rounded-lg shadow-xl overflow-hidden flex flex-col md:max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},children:[t.jsxs("div",{className:"flex-shrink-0 px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-white dark:bg-gray-800",children:[t.jsx(Zt,{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Edit ICS-212 Submission"}),t.jsx(C,{children:t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:o,children:t.jsx(er,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:`
                      p-4 rounded-xl border-2 flex items-center gap-3
                      ${i==="hold"?"bg-red-50 border-red-500 dark:bg-red-900/20 dark:border-red-700":"bg-green-50 border-green-500 dark:bg-green-900/20 dark:border-green-700"}
                    `,children:[i==="hold"?t.jsx(_t,{className:"w-6 h-6 text-red-600 dark:text-red-400"}):t.jsx(Tt,{className:"w-6 h-6 text-green-600 dark:text-green-400"}),t.jsxs("div",{children:[t.jsx("p",{className:`font-bold text-lg ${i==="hold"?"text-red-900 dark:text-red-100":"text-green-900 dark:text-green-100"}`,children:i==="hold"?"ðŸ”´ HOLD FOR REPAIRS":"ðŸŸ¢ RELEASED"}),i==="hold"&&t.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Safety Item â€“ Do Not Release Until Repaired"})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Incident Information"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Incident Name *"}),t.jsx("input",{type:"text",value:s.incident_name||"",onChange:u=>m("incident_name",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date *"}),t.jsx("input",{type:"date",value:s.inspector_date||"",onChange:u=>m("inspector_date",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Time *"}),t.jsx("input",{type:"time",value:s.inspector_time||"",onChange:u=>m("inspector_time",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Order Number"}),t.jsx("input",{type:"text",value:s.order_no||"",onChange:u=>m("order_no",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Vehicle Information"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vehicle Type *"}),t.jsx("input",{type:"text",value:s.vehicle_type||"",onChange:u=>m("vehicle_type",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"License Number *"}),t.jsx("input",{type:"text",value:s.vehicle_license_no||"",onChange:u=>m("vehicle_license_no",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Agency Reg/Unit *"}),t.jsx("input",{type:"text",value:s.agency_reg_unit||"",onChange:u=>m("agency_reg_unit",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vehicle ID"}),t.jsx("input",{type:"text",value:s.vehicle_id_no||"",onChange:u=>m("vehicle_id_no",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Inspection Items"}),t.jsx("div",{className:"space-y-3",children:s.inspection_items?.map(u=>t.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600",children:t.jsxs("div",{className:"flex items-start gap-3",children:[u.isSafetyItem&&t.jsx(_t,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-1"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"mb-3",children:[t.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:[u.itemNumber,". ",u.description]}),u.reference&&t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:u.reference})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(C,{children:t.jsxs("button",{type:"button",onClick:()=>f(u.itemNumber,"pass"),className:`
                                        flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg
                                        font-medium transition-all border-2
                                        ${u.status==="pass"?"bg-green-500 text-white border-green-600 shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                                      `,children:[t.jsx(Tt,{className:"w-4 h-4"}),"Pass"]})}),t.jsx(C,{children:t.jsxs("button",{type:"button",onClick:()=>f(u.itemNumber,"fail"),className:`
                                        flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg
                                        font-medium transition-all border-2
                                        ${u.status==="fail"?"bg-red-500 text-white border-red-600 shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                                      `,children:[t.jsx(Ar,{className:"w-4 h-4"}),"Fail"]})}),t.jsx(C,{children:t.jsx("button",{type:"button",onClick:()=>f(u.itemNumber,"n/a"),className:`
                                        flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-lg
                                        font-medium transition-all border-2
                                        ${u.status==="n/a"?"bg-gray-400 text-white border-gray-500 shadow-md":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"}
                                      `,children:"N/A"})})]})]})]})},u.itemNumber))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Additional Comments"}),t.jsx("textarea",{value:s.additional_comments||"",onChange:u=>m("additional_comments",u.target.value),rows:4,placeholder:"Any additional notes or observations...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white resize-none"})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Inspector Information"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Inspector Name *"}),t.jsx("input",{type:"text",value:s.inspector_name_print||"",onChange:u=>m("inspector_name_print",u.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.inspector_signature&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Inspector Signature (Read-only)"}),t.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-900",children:t.jsx("img",{src:s.inspector_signature,alt:"Inspector Signature",className:"max-w-xs h-auto"})})]})]})]})]})}),t.jsxs("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3 bg-white dark:bg-gray-800",children:[t.jsx(C,{children:t.jsx("button",{onClick:r,className:"px-6 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 font-medium transition-colors",disabled:o,children:"Cancel"})}),t.jsx(C,{children:t.jsxs("button",{onClick:p,className:"px-6 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",disabled:o,children:[o&&t.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),o?"Saving...":"Save Changes"]})})]})]})})]})})}):null}var ta=Object.defineProperty,ra=(e,r,a)=>r in e?ta(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,it=(e,r,a)=>(ra(e,typeof r!="symbol"?r+"":r,a),a);let aa=class{constructor(){it(this,"current",this.detect()),it(this,"handoffState","pending"),it(this,"currentId",0)}set(r){this.current!==r&&(this.handoffState="pending",this.currentId=0,this.current=r)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},X=new aa;function Ve(e){var r;return X.isServer?null:e==null?document:(r=e?.ownerDocument)!=null?r:document}function mt(e){var r,a;return X.isServer?null:e==null?document:(a=(r=e?.getRootNode)==null?void 0:r.call(e))!=null?a:document}function rr(e){var r,a;return(a=(r=mt(e))==null?void 0:r.activeElement)!=null?a:null}function na(e){return rr(e)===e}function Xe(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(r=>setTimeout(()=>{throw r}))}function ae(){let e=[],r={addEventListener(a,n,s,l){return a.addEventListener(n,s,l),r.add(()=>a.removeEventListener(n,s,l))},requestAnimationFrame(...a){let n=requestAnimationFrame(...a);return r.add(()=>cancelAnimationFrame(n))},nextFrame(...a){return r.requestAnimationFrame(()=>r.requestAnimationFrame(...a))},setTimeout(...a){let n=setTimeout(...a);return r.add(()=>clearTimeout(n))},microTask(...a){let n={current:!0};return Xe(()=>{n.current&&a[0]()}),r.add(()=>{n.current=!1})},style(a,n,s){let l=a.style.getPropertyValue(n);return Object.assign(a.style,{[n]:s}),this.add(()=>{Object.assign(a.style,{[n]:l})})},group(a){let n=ae();return a(n),this.add(()=>n.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let n=e.indexOf(a);if(n>=0)for(let s of e.splice(n,1))s()}},dispose(){for(let a of e.splice(0))a()}};return r}function Je(){let[e]=d.useState(ae);return d.useEffect(()=>()=>e.dispose(),[e]),e}let O=(e,r)=>{X.isServer?d.useEffect(e,r):d.useLayoutEffect(e,r)};function ve(e){let r=d.useRef(e);return O(()=>{r.current=e},[e]),r}let $=function(e){let r=ve(e);return y.useCallback((...a)=>r.current(...a),[r])};function Be(e){return d.useMemo(()=>e,Object.values(e))}let sa=d.createContext(void 0);function la(){return d.useContext(sa)}function ft(...e){return Array.from(new Set(e.flatMap(r=>typeof r=="string"?r.split(" "):[]))).filter(Boolean).join(" ")}function re(e,r,...a){if(e in r){let s=r[e];return typeof s=="function"?s(...a):s}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(r).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,re),n}var Ye=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Ye||{}),ie=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ie||{});function U(){let e=oa();return d.useCallback(r=>ia({mergeRefs:e,...r}),[e])}function ia({ourProps:e,theirProps:r,slot:a,defaultTag:n,features:s,visible:l=!0,name:o,mergeRefs:c}){c=c??da;let i=ar(r,e);if(l)return ze(i,a,n,o,c);let m=s??0;if(m&2){let{static:f=!1,...p}=i;if(f)return ze(p,a,n,o,c)}if(m&1){let{unmount:f=!0,...p}=i;return re(f?0:1,{0(){return null},1(){return ze({...p,hidden:!0,style:{display:"none"}},a,n,o,c)}})}return ze(i,a,n,o,c)}function ze(e,r={},a,n,s){let{as:l=a,children:o,refName:c="ref",...i}=ot(e,["unmount","static"]),m=e.ref!==void 0?{[c]:e.ref}:{},f=typeof o=="function"?o(r):o;"className"in i&&i.className&&typeof i.className=="function"&&(i.className=i.className(r)),i["aria-labelledby"]&&i["aria-labelledby"]===i.id&&(i["aria-labelledby"]=void 0);let p={};if(r){let u=!1,h=[];for(let[x,v]of Object.entries(r))typeof v=="boolean"&&(u=!0),v===!0&&h.push(x.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(u){p["data-headlessui-state"]=h.join(" ");for(let x of h)p[`data-${x}`]=""}}if(Le(l)&&(Object.keys(he(i)).length>0||Object.keys(he(p)).length>0))if(!d.isValidElement(f)||Array.isArray(f)&&f.length>1||ua(f)){if(Object.keys(he(i)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(he(i)).concat(Object.keys(he(p))).map(u=>`  - ${u}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(u=>`  - ${u}`).join(`
`)].join(`
`))}else{let u=f.props,h=u?.className,x=typeof h=="function"?(...w)=>ft(h(...w),i.className):ft(h,i.className),v=x?{className:x}:{},b=ar(f.props,he(ot(i,["ref"])));for(let w in p)w in b&&delete p[w];return d.cloneElement(f,Object.assign({},b,p,m,{ref:s(ca(f),m.ref)},v))}return d.createElement(l,Object.assign({},ot(i,["ref"]),!Le(l)&&m,!Le(l)&&p),f)}function oa(){let e=d.useRef([]),r=d.useCallback(a=>{for(let n of e.current)n!=null&&(typeof n=="function"?n(a):n.current=a)},[]);return(...a)=>{if(!a.every(n=>n==null))return e.current=a,r}}function da(...e){return e.every(r=>r==null)?void 0:r=>{for(let a of e)a!=null&&(typeof a=="function"?a(r):a.current=r)}}function ar(...e){if(e.length===0)return{};if(e.length===1)return e[0];let r={},a={};for(let n of e)for(let s in n)s.startsWith("on")&&typeof n[s]=="function"?(a[s]!=null||(a[s]=[]),a[s].push(n[s])):r[s]=n[s];if(r.disabled||r["aria-disabled"])for(let n in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(a[n]=[s=>{var l;return(l=s?.preventDefault)==null?void 0:l.call(s)}]);for(let n in a)Object.assign(r,{[n](s,...l){let o=a[n];for(let c of o){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;c(s,...l)}}});return r}function A(e){var r;return Object.assign(d.forwardRef(e),{displayName:(r=e.displayName)!=null?r:e.name})}function he(e){let r=Object.assign({},e);for(let a in r)r[a]===void 0&&delete r[a];return r}function ot(e,r=[]){let a=Object.assign({},e);for(let n of r)n in a&&delete a[n];return a}function ca(e){return y.version.split(".")[0]>="19"?e.props.ref:e.ref}function Le(e){return e===d.Fragment||e===Symbol.for("react.fragment")}function ua(e){return Le(e.type)}let ma="span";var qe=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(qe||{});function fa(e,r){var a;let{features:n=1,...s}=e,l={ref:r,"aria-hidden":(n&2)===2?!0:(a=s["aria-hidden"])!=null?a:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return U()({ourProps:l,theirProps:s,slot:{},defaultTag:ma,name:"Hidden"})}let gt=A(fa);function ga(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function de(e){return ga(e)&&"tagName"in e}function be(e){return de(e)&&"accessKey"in e}function oe(e){return de(e)&&"tabIndex"in e}function ha(e){return de(e)&&"style"in e}function xa(e){return be(e)&&e.nodeName==="IFRAME"}function pa(e){return be(e)&&e.nodeName==="INPUT"}let nr=Symbol();function ya(e,r=!0){return Object.assign(e,{[nr]:r})}function J(...e){let r=d.useRef(e);d.useEffect(()=>{r.current=e},[e]);let a=$(n=>{for(let s of r.current)s!=null&&(typeof s=="function"?s(n):s.current=n)});return e.every(n=>n==null||n?.[nr])?void 0:a}let jt=d.createContext(null);jt.displayName="DescriptionContext";function sr(){let e=d.useContext(jt);if(e===null){let r=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,sr),r}return e}function ba(){let[e,r]=d.useState([]);return[e.length>0?e.join(" "):void 0,d.useMemo(()=>function(a){let n=$(l=>(r(o=>[...o,l]),()=>r(o=>{let c=o.slice(),i=c.indexOf(l);return i!==-1&&c.splice(i,1),c}))),s=d.useMemo(()=>({register:n,slot:a.slot,name:a.name,props:a.props,value:a.value}),[n,a.slot,a.name,a.props,a.value]);return y.createElement(jt.Provider,{value:s},a.children)},[r])]}let va="p";function ja(e,r){let a=d.useId(),n=la(),{id:s=`headlessui-description-${a}`,...l}=e,o=sr(),c=J(r);O(()=>o.register(s),[s,o.register]);let i=Be({...o.slot,disabled:n||!1}),m={ref:c,...o.props,id:s};return U()({ourProps:m,theirProps:l,slot:i,defaultTag:va,name:o.name||"Description"})}let wa=A(ja),ka=Object.assign(wa,{});var lr=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(lr||{});let Na=d.createContext(()=>{});function Sa({value:e,children:r}){return y.createElement(Na.Provider,{value:e},r)}let ir=class extends Map{constructor(r){super(),this.factory=r}get(r){let a=super.get(r);return a===void 0&&(a=this.factory(r),this.set(r,a)),a}};var Ea=Object.defineProperty,Ca=(e,r,a)=>r in e?Ea(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,$a=(e,r,a)=>(Ca(e,r+"",a),a),or=(e,r,a)=>{if(!r.has(e))throw TypeError("Cannot "+a)},V=(e,r,a)=>(or(e,r,"read from private field"),a?a.call(e):r.get(e)),dt=(e,r,a)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,a)},Rt=(e,r,a,n)=>(or(e,r,"write to private field"),r.set(e,a),a),G,Pe,Re;let Fa=class{constructor(r){dt(this,G,{}),dt(this,Pe,new ir(()=>new Set)),dt(this,Re,new Set),$a(this,"disposables",ae()),Rt(this,G,r),X.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return V(this,G)}subscribe(r,a){if(X.isServer)return()=>{};let n={selector:r,callback:a,current:r(V(this,G))};return V(this,Re).add(n),this.disposables.add(()=>{V(this,Re).delete(n)})}on(r,a){return X.isServer?()=>{}:(V(this,Pe).get(r).add(a),this.disposables.add(()=>{V(this,Pe).get(r).delete(a)}))}send(r){let a=this.reduce(V(this,G),r);if(a!==V(this,G)){Rt(this,G,a);for(let n of V(this,Re)){let s=n.selector(V(this,G));dr(n.current,s)||(n.current=s,n.callback(s))}for(let n of V(this,Pe).get(r.type))n(V(this,G),r)}}};G=new WeakMap,Pe=new WeakMap,Re=new WeakMap;function dr(e,r){return Object.is(e,r)?!0:typeof e!="object"||e===null||typeof r!="object"||r===null?!1:Array.isArray(e)&&Array.isArray(r)?e.length!==r.length?!1:ct(e[Symbol.iterator](),r[Symbol.iterator]()):e instanceof Map&&r instanceof Map||e instanceof Set&&r instanceof Set?e.size!==r.size?!1:ct(e.entries(),r.entries()):Ot(e)&&Ot(r)?ct(Object.entries(e)[Symbol.iterator](),Object.entries(r)[Symbol.iterator]()):!1}function ct(e,r){do{let a=e.next(),n=r.next();if(a.done&&n.done)return!0;if(a.done||n.done||!Object.is(a.value,n.value))return!1}while(!0)}function Ot(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let r=Object.getPrototypeOf(e);return r===null||Object.getPrototypeOf(r)===null}var _a=Object.defineProperty,Ta=(e,r,a)=>r in e?_a(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,At=(e,r,a)=>(Ta(e,typeof r!="symbol"?r+"":r,a),a),Ia=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(Ia||{});let Da={0(e,r){let a=r.id,n=e.stack,s=e.stack.indexOf(a);if(s!==-1){let l=e.stack.slice();return l.splice(s,1),l.push(a),n=l,{...e,stack:n}}return{...e,stack:[...e.stack,a]}},1(e,r){let a=r.id,n=e.stack.indexOf(a);if(n===-1)return e;let s=e.stack.slice();return s.splice(n,1),{...e,stack:s}}},Pa=class cr extends Fa{constructor(){super(...arguments),At(this,"actions",{push:r=>this.send({type:0,id:r}),pop:r=>this.send({type:1,id:r})}),At(this,"selectors",{isTop:(r,a)=>r.stack[r.stack.length-1]===a,inStack:(r,a)=>r.stack.includes(a)})}static new(){return new cr({stack:[]})}reduce(r,a){return re(a.type,Da,r,a)}};const ur=new ir(()=>Pa.new());function mr(e,r,a=dr){return Mr.useSyncExternalStoreWithSelector($(n=>e.subscribe(Ra,n)),$(()=>e.state),$(()=>e.state),$(r),a)}function Ra(e){return e}function Ue(e,r){let a=d.useId(),n=ur.get(r),[s,l]=mr(n,d.useCallback(o=>[n.selectors.isTop(o,a),n.selectors.inStack(o,a)],[n,a]));return O(()=>{if(e)return n.actions.push(a),()=>n.actions.pop(a)},[n,e,a]),e?l?s:!0:!1}let ht=new Map,Me=new Map;function Lt(e){var r;let a=(r=Me.get(e))!=null?r:0;return Me.set(e,a+1),a!==0?()=>Mt(e):(ht.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Mt(e))}function Mt(e){var r;let a=(r=Me.get(e))!=null?r:1;if(a===1?Me.delete(e):Me.set(e,a-1),a!==1)return;let n=ht.get(e);n&&(n["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",n["aria-hidden"]),e.inert=n.inert,ht.delete(e))}function Oa(e,{allowed:r,disallowed:a}={}){let n=Ue(e,"inert-others");O(()=>{var s,l;if(!n)return;let o=ae();for(let i of(s=a?.())!=null?s:[])i&&o.add(Lt(i));let c=(l=r?.())!=null?l:[];for(let i of c){if(!i)continue;let m=Ve(i);if(!m)continue;let f=i.parentElement;for(;f&&f!==m.body;){for(let p of f.children)c.some(u=>p.contains(u))||o.add(Lt(p));f=f.parentElement}}return o.dispose},[n,r,a])}function Aa(e,r,a){let n=ve(s=>{let l=s.getBoundingClientRect();l.x===0&&l.y===0&&l.width===0&&l.height===0&&a()});d.useEffect(()=>{if(!e)return;let s=r===null?null:be(r)?r:r.current;if(!s)return;let l=ae();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>n.current(s));o.observe(s),l.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>n.current(s));o.observe(s),l.add(()=>o.disconnect())}return()=>l.dispose()},[r,n,e])}let Ge=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),La=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ee=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ee||{}),xt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(xt||{}),Ma=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Ma||{});function Ha(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ge)).sort((r,a)=>Math.sign((r.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function Va(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(La)).sort((r,a)=>Math.sign((r.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var fr=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(fr||{});function Ba(e,r=0){var a;return e===((a=Ve(e))==null?void 0:a.body)?!1:re(r,{0(){return e.matches(Ge)},1(){let n=e;for(;n!==null;){if(n.matches(Ge))return!0;n=n.parentElement}return!1}})}var Ua=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Ua||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function te(e){e?.focus({preventScroll:!0})}let Wa=["textarea","input"].join(",");function za(e){var r,a;return(a=(r=e?.matches)==null?void 0:r.call(e,Wa))!=null?a:!1}function Ka(e,r=a=>a){return e.slice().sort((a,n)=>{let s=r(a),l=r(n);if(s===null||l===null)return 0;let o=s.compareDocumentPosition(l);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function He(e,r,{sorted:a=!0,relativeTo:n=null,skipElements:s=[]}={}){let l=Array.isArray(e)?e.length>0?mt(e[0]):document:mt(e),o=Array.isArray(e)?a?Ka(e):e:r&64?Va(e):Ha(e);s.length>0&&o.length>1&&(o=o.filter(h=>!s.some(x=>x!=null&&"current"in x?x?.current===h:x===h))),n=n??l?.activeElement;let c=(()=>{if(r&5)return 1;if(r&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),i=(()=>{if(r&1)return 0;if(r&2)return Math.max(0,o.indexOf(n))-1;if(r&4)return Math.max(0,o.indexOf(n))+1;if(r&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),m=r&32?{preventScroll:!0}:{},f=0,p=o.length,u;do{if(f>=p||f+p<=0)return 0;let h=i+f;if(r&16)h=(h+p)%p;else{if(h<0)return 3;if(h>=p)return 1}u=o[h],u?.focus(m),f+=c}while(u!==rr(u));return r&6&&za(u)&&u.select(),2}function gr(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Ya(){return/Android/gi.test(window.navigator.userAgent)}function Ht(){return gr()||Ya()}function Ke(e,r,a,n){let s=ve(a);d.useEffect(()=>{if(!e)return;function l(o){s.current(o)}return document.addEventListener(r,l,n),()=>document.removeEventListener(r,l,n)},[e,r,n])}function hr(e,r,a,n){let s=ve(a);d.useEffect(()=>{if(!e)return;function l(o){s.current(o)}return window.addEventListener(r,l,n),()=>window.removeEventListener(r,l,n)},[e,r,n])}const Vt=30;function qa(e,r,a){let n=ve(a),s=d.useCallback(function(c,i){if(c.defaultPrevented)return;let m=i(c);if(m===null||!m.getRootNode().contains(m)||!m.isConnected)return;let f=(function p(u){return typeof u=="function"?p(u()):Array.isArray(u)||u instanceof Set?u:[u]})(r);for(let p of f)if(p!==null&&(p.contains(m)||c.composed&&c.composedPath().includes(p)))return;return!Ba(m,fr.Loose)&&m.tabIndex!==-1&&c.preventDefault(),n.current(c,m)},[n,r]),l=d.useRef(null);Ke(e,"pointerdown",c=>{var i,m;Ht()||(l.current=((m=(i=c.composedPath)==null?void 0:i.call(c))==null?void 0:m[0])||c.target)},!0),Ke(e,"pointerup",c=>{if(Ht()||!l.current)return;let i=l.current;return l.current=null,s(c,()=>i)},!0);let o=d.useRef({x:0,y:0});Ke(e,"touchstart",c=>{o.current.x=c.touches[0].clientX,o.current.y=c.touches[0].clientY},!0),Ke(e,"touchend",c=>{let i={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(i.x-o.current.x)>=Vt||Math.abs(i.y-o.current.y)>=Vt))return s(c,()=>oe(c.target)?c.target:null)},!0),hr(e,"blur",c=>s(c,()=>xa(window.document.activeElement)?window.document.activeElement:null),!0)}function wt(...e){return d.useMemo(()=>Ve(...e),[...e])}function xr(e,r,a,n){let s=ve(a);d.useEffect(()=>{e=e??window;function l(o){s.current(o)}return e.addEventListener(r,l,n),()=>e.removeEventListener(r,l,n)},[e,r,n])}function Ga(e){return d.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Xa(e,r){let a=e(),n=new Set;return{getSnapshot(){return a},subscribe(s){return n.add(s),()=>n.delete(s)},dispatch(s,...l){let o=r[s].call(a,...l);o&&(a=o,n.forEach(c=>c()))}}}function Ja(){let e;return{before({doc:r}){var a;let n=r.documentElement,s=(a=r.defaultView)!=null?a:window;e=Math.max(0,s.innerWidth-n.clientWidth)},after({doc:r,d:a}){let n=r.documentElement,s=Math.max(0,n.clientWidth-n.offsetWidth),l=Math.max(0,e-s);a.style(n,"paddingRight",`${l}px`)}}}function Qa(){return gr()?{before({doc:e,d:r,meta:a}){function n(s){for(let l of a().containers)for(let o of l())if(o.contains(s))return!0;return!1}r.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let c=ae();c.style(e.documentElement,"scrollBehavior","auto"),r.add(()=>r.microTask(()=>c.dispose()))}let l=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;r.addEventListener(e,"click",c=>{if(oe(c.target))try{let i=c.target.closest("a");if(!i)return;let{hash:m}=new URL(i.href),f=e.querySelector(m);oe(f)&&!n(f)&&(o=f)}catch{}},!0),r.group(c=>{r.addEventListener(e,"touchstart",i=>{if(c.dispose(),oe(i.target)&&ha(i.target))if(n(i.target)){let m=i.target;for(;m.parentElement&&n(m.parentElement);)m=m.parentElement;c.style(m,"overscrollBehavior","contain")}else c.style(i.target,"touchAction","none")})}),r.addEventListener(e,"touchmove",c=>{if(oe(c.target)){if(pa(c.target))return;if(n(c.target)){let i=c.target;for(;i.parentElement&&i.dataset.headlessuiPortal!==""&&!(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth);)i=i.parentElement;i.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()}},{passive:!1}),r.add(()=>{var c;let i=(c=window.scrollY)!=null?c:window.pageYOffset;l!==i&&window.scrollTo(0,l),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function Za(){return{before({doc:e,d:r}){r.style(e.documentElement,"overflow","hidden")}}}function Bt(e){let r={};for(let a of e)Object.assign(r,a(r));return r}let pe=Xa(()=>new Map,{PUSH(e,r){var a;let n=(a=this.get(e))!=null?a:{doc:e,count:0,d:ae(),meta:new Set,computedMeta:{}};return n.count++,n.meta.add(r),n.computedMeta=Bt(n.meta),this.set(e,n),this},POP(e,r){let a=this.get(e);return a&&(a.count--,a.meta.delete(r),a.computedMeta=Bt(a.meta)),this},SCROLL_PREVENT(e){let r={doc:e.doc,d:e.d,meta(){return e.computedMeta}},a=[Qa(),Ja(),Za()];a.forEach(({before:n})=>n?.(r)),a.forEach(({after:n})=>n?.(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});pe.subscribe(()=>{let e=pe.getSnapshot(),r=new Map;for(let[a]of e)r.set(a,a.documentElement.style.overflow);for(let a of e.values()){let n=r.get(a.doc)==="hidden",s=a.count!==0;(s&&!n||!s&&n)&&pe.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),a.count===0&&pe.dispatch("TEARDOWN",a)}});function en(e,r,a=()=>({containers:[]})){let n=Ga(pe),s=r?n.get(r):void 0,l=s?s.count>0:!1;return O(()=>{if(!(!r||!e))return pe.dispatch("PUSH",r,a),()=>pe.dispatch("POP",r,a)},[e,r]),l}function tn(e,r,a=()=>[document.body]){let n=Ue(e,"scroll-lock");en(n,r,s=>{var l;return{containers:[...(l=s.containers)!=null?l:[],a]}})}function rn(e=0){let[r,a]=d.useState(e),n=d.useCallback(i=>a(i),[]),s=d.useCallback(i=>a(m=>m|i),[]),l=d.useCallback(i=>(r&i)===i,[r]),o=d.useCallback(i=>a(m=>m&~i),[]),c=d.useCallback(i=>a(m=>m^i),[]);return{flags:r,setFlag:n,addFlag:s,hasFlag:l,removeFlag:o,toggleFlag:c}}var an={},Ut,Wt;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Ut=process==null?void 0:an)==null?void 0:Ut.NODE_ENV)==="test"&&typeof((Wt=Element?.prototype)==null?void 0:Wt.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var nn=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(nn||{});function sn(e){let r={};for(let a in e)e[a]===!0&&(r[`data-${a}`]="");return r}function ln(e,r,a,n){let[s,l]=d.useState(a),{hasFlag:o,addFlag:c,removeFlag:i}=rn(e&&s?3:0),m=d.useRef(!1),f=d.useRef(!1),p=Je();return O(()=>{var u;if(e){if(a&&l(!0),!r){a&&c(3);return}return(u=n?.start)==null||u.call(n,a),on(r,{inFlight:m,prepare(){f.current?f.current=!1:f.current=m.current,m.current=!0,!f.current&&(a?(c(3),i(4)):(c(4),i(2)))},run(){f.current?a?(i(3),c(4)):(i(4),c(3)):a?i(1):c(1)},done(){var h;f.current&&un(r)||(m.current=!1,i(7),a||l(!1),(h=n?.end)==null||h.call(n,a))}})}},[e,a,r,p]),e?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[a,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function on(e,{prepare:r,run:a,done:n,inFlight:s}){let l=ae();return cn(e,{prepare:r,inFlight:s}),l.nextFrame(()=>{a(),l.requestAnimationFrame(()=>{l.add(dn(e,n))})}),l.dispose}function dn(e,r){var a,n;let s=ae();if(!e)return s.dispose;let l=!1;s.add(()=>{l=!0});let o=(n=(a=e.getAnimations)==null?void 0:a.call(e).filter(c=>c instanceof CSSTransition))!=null?n:[];return o.length===0?(r(),s.dispose):(Promise.allSettled(o.map(c=>c.finished)).then(()=>{l||r()}),s.dispose)}function cn(e,{inFlight:r,prepare:a}){if(r!=null&&r.current){a();return}let n=e.style.transition;e.style.transition="none",a(),e.offsetHeight,e.style.transition=n}function un(e){var r,a;return((a=(r=e.getAnimations)==null?void 0:r.call(e))!=null?a:[]).some(n=>n instanceof CSSTransition&&n.playState!=="finished")}function kt(e,r){let a=d.useRef([]),n=$(e);d.useEffect(()=>{let s=[...a.current];for(let[l,o]of r.entries())if(a.current[l]!==o){let c=n(r,s);return a.current=r,c}},[n,...r])}let Qe=d.createContext(null);Qe.displayName="OpenClosedContext";var z=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(z||{});function Ze(){return d.useContext(Qe)}function mn({value:e,children:r}){return y.createElement(Qe.Provider,{value:e},r)}function fn({children:e}){return y.createElement(Qe.Provider,{value:null},e)}function gn(e){function r(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",r))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",r),r())}let le=[];gn(()=>{function e(r){if(!oe(r.target)||r.target===document.body||le[0]===r.target)return;let a=r.target;a=a.closest(Ge),le.unshift(a??r.target),le=le.filter(n=>n!=null&&n.isConnected),le.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function pr(e){let r=$(e),a=d.useRef(!1);d.useEffect(()=>(a.current=!1,()=>{a.current=!0,Xe(()=>{a.current&&r()})}),[r])}let yr=d.createContext(!1);function hn(){return d.useContext(yr)}function zt(e){return y.createElement(yr.Provider,{value:e.force},e.children)}function xn(e){let r=hn(),a=d.useContext(vr),[n,s]=d.useState(()=>{var l;if(!r&&a!==null)return(l=a.current)!=null?l:null;if(X.isServer)return null;let o=e?.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let c=e.createElement("div");return c.setAttribute("id","headlessui-portal-root"),e.body.appendChild(c)});return d.useEffect(()=>{n!==null&&(e!=null&&e.body.contains(n)||e==null||e.body.appendChild(n))},[n,e]),d.useEffect(()=>{r||a!==null&&s(a.current)},[a,s,r]),n}let br=d.Fragment,pn=A(function(e,r){let{ownerDocument:a=null,...n}=e,s=d.useRef(null),l=J(ya(u=>{s.current=u}),r),o=wt(s.current),c=a??o,i=xn(c),m=d.useContext(pt),f=Je(),p=U();return pr(()=>{var u;i&&i.childNodes.length<=0&&((u=i.parentElement)==null||u.removeChild(i))}),i?Pr.createPortal(y.createElement("div",{"data-headlessui-portal":"",ref:u=>{f.dispose(),m&&u&&f.add(m.register(u))}},p({ourProps:{ref:l},theirProps:n,slot:{},defaultTag:br,name:"Portal"})),i):null});function yn(e,r){let a=J(r),{enabled:n=!0,ownerDocument:s,...l}=e,o=U();return n?y.createElement(pn,{...l,ownerDocument:s,ref:a}):o({ourProps:{ref:a},theirProps:l,slot:{},defaultTag:br,name:"Portal"})}let bn=d.Fragment,vr=d.createContext(null);function vn(e,r){let{target:a,...n}=e,s={ref:J(r)},l=U();return y.createElement(vr.Provider,{value:a},l({ourProps:s,theirProps:n,defaultTag:bn,name:"Popover.Group"}))}let pt=d.createContext(null);function jn(){let e=d.useContext(pt),r=d.useRef([]),a=$(l=>(r.current.push(l),e&&e.register(l),()=>n(l))),n=$(l=>{let o=r.current.indexOf(l);o!==-1&&r.current.splice(o,1),e&&e.unregister(l)}),s=d.useMemo(()=>({register:a,unregister:n,portals:r}),[a,n,r]);return[r,d.useMemo(()=>function({children:l}){return y.createElement(pt.Provider,{value:s},l)},[s])]}let wn=A(yn),jr=A(vn),kn=Object.assign(wn,{Group:jr});function Nn(e,r=typeof document<"u"?document.defaultView:null,a){let n=Ue(e,"escape");xr(r,"keydown",s=>{n&&(s.defaultPrevented||s.key===lr.Escape&&a(s))})}function Sn(){var e;let[r]=d.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[a,n]=d.useState((e=r?.matches)!=null?e:!1);return O(()=>{if(!r)return;function s(l){n(l.matches)}return r.addEventListener("change",s),()=>r.removeEventListener("change",s)},[r]),a}function En({defaultContainers:e=[],portals:r,mainTreeNode:a}={}){let n=$(()=>{var s,l;let o=Ve(a),c=[];for(let i of e)i!==null&&(de(i)?c.push(i):"current"in i&&de(i.current)&&c.push(i.current));if(r!=null&&r.current)for(let i of r.current)c.push(i);for(let i of(s=o?.querySelectorAll("html > *, body > *"))!=null?s:[])i!==document.body&&i!==document.head&&de(i)&&i.id!=="headlessui-portal-root"&&(a&&(i.contains(a)||i.contains((l=a?.getRootNode())==null?void 0:l.host))||c.some(m=>i.contains(m))||c.push(i));return c});return{resolveContainers:n,contains:$(s=>n().some(l=>l.contains(s)))}}let wr=d.createContext(null);function Kt({children:e,node:r}){let[a,n]=d.useState(null),s=kr(r??a);return y.createElement(wr.Provider,{value:s},e,s===null&&y.createElement(gt,{features:qe.Hidden,ref:l=>{var o,c;if(l){for(let i of(c=(o=Ve(l))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?c:[])if(i!==document.body&&i!==document.head&&de(i)&&i!=null&&i.contains(l)){n(i);break}}}}))}function kr(e=null){var r;return(r=d.useContext(wr))!=null?r:e}function Cn(){let e=typeof document>"u";return"useSyncExternalStore"in Ft?(r=>r.useSyncExternalStore)(Ft)(()=>()=>{},()=>!1,()=>!e):!1}function et(){let e=Cn(),[r,a]=d.useState(X.isHandoffComplete);return r&&X.isHandoffComplete===!1&&a(!1),d.useEffect(()=>{r!==!0&&a(!0)},[r]),d.useEffect(()=>X.handoff(),[]),e?!1:r}function Nt(){let e=d.useRef(!1);return O(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Oe=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Oe||{});function $n(){let e=d.useRef(0);return hr(!0,"keydown",r=>{r.key==="Tab"&&(e.current=r.shiftKey?1:0)},!0),e}function Nr(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let r=new Set;for(let a of e.current)de(a.current)&&r.add(a.current);return r}let Fn="div";var xe=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(xe||{});function _n(e,r){let a=d.useRef(null),n=J(a,r),{initialFocus:s,initialFocusFallback:l,containers:o,features:c=15,...i}=e;et()||(c=0);let m=wt(a.current);Pn(c,{ownerDocument:m});let f=Rn(c,{ownerDocument:m,container:a,initialFocus:s,initialFocusFallback:l});On(c,{ownerDocument:m,container:a,containers:o,previousActiveElement:f});let p=$n(),u=$(j=>{if(!be(a.current))return;let N=a.current;(k=>k())(()=>{re(p.current,{[Oe.Forwards]:()=>{He(N,ee.First,{skipElements:[j.relatedTarget,l]})},[Oe.Backwards]:()=>{He(N,ee.Last,{skipElements:[j.relatedTarget,l]})}})})}),h=Ue(!!(c&2),"focus-trap#tab-lock"),x=Je(),v=d.useRef(!1),b={ref:n,onKeyDown(j){j.key=="Tab"&&(v.current=!0,x.requestAnimationFrame(()=>{v.current=!1}))},onBlur(j){if(!(c&4))return;let N=Nr(o);be(a.current)&&N.add(a.current);let k=j.relatedTarget;oe(k)&&k.dataset.headlessuiFocusGuard!=="true"&&(Sr(N,k)||(v.current?He(a.current,re(p.current,{[Oe.Forwards]:()=>ee.Next,[Oe.Backwards]:()=>ee.Previous})|ee.WrapAround,{relativeTo:j.target}):oe(j.target)&&te(j.target)))}},w=U();return y.createElement(y.Fragment,null,h&&y.createElement(gt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:qe.Focusable}),w({ourProps:b,theirProps:i,defaultTag:Fn,name:"FocusTrap"}),h&&y.createElement(gt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:qe.Focusable}))}let Tn=A(_n),In=Object.assign(Tn,{features:xe});function Dn(e=!0){let r=d.useRef(le.slice());return kt(([a],[n])=>{n===!0&&a===!1&&Xe(()=>{r.current.splice(0)}),n===!1&&a===!0&&(r.current=le.slice())},[e,le,r]),$(()=>{var a;return(a=r.current.find(n=>n!=null&&n.isConnected))!=null?a:null})}function Pn(e,{ownerDocument:r}){let a=!!(e&8),n=Dn(a);kt(()=>{a||na(r?.body)&&te(n())},[a]),pr(()=>{a&&te(n())})}function Rn(e,{ownerDocument:r,container:a,initialFocus:n,initialFocusFallback:s}){let l=d.useRef(null),o=Ue(!!(e&1),"focus-trap#initial-focus"),c=Nt();return kt(()=>{if(e===0)return;if(!o){s!=null&&s.current&&te(s.current);return}let i=a.current;i&&Xe(()=>{if(!c.current)return;let m=r?.activeElement;if(n!=null&&n.current){if(n?.current===m){l.current=m;return}}else if(i.contains(m)){l.current=m;return}if(n!=null&&n.current)te(n.current);else{if(e&16){if(He(i,ee.First|ee.AutoFocus)!==xt.Error)return}else if(He(i,ee.First)!==xt.Error)return;if(s!=null&&s.current&&(te(s.current),r?.activeElement===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}l.current=r?.activeElement})},[s,o,e]),l}function On(e,{ownerDocument:r,container:a,containers:n,previousActiveElement:s}){let l=Nt(),o=!!(e&4);xr(r?.defaultView,"focus",c=>{if(!o||!l.current)return;let i=Nr(n);be(a.current)&&i.add(a.current);let m=s.current;if(!m)return;let f=c.target;be(f)?Sr(i,f)?(s.current=f,te(f)):(c.preventDefault(),c.stopPropagation(),te(m)):te(s.current)},!0)}function Sr(e,r){for(let a of e)if(a.contains(r))return!0;return!1}function Er(e){var r;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Le((r=e.as)!=null?r:$r)||y.Children.count(e.children)===1}let tt=d.createContext(null);tt.displayName="TransitionContext";var An=(e=>(e.Visible="visible",e.Hidden="hidden",e))(An||{});function Ln(){let e=d.useContext(tt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Mn(){let e=d.useContext(rt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let rt=d.createContext(null);rt.displayName="NestingContext";function at(e){return"children"in e?at(e.children):e.current.filter(({el:r})=>r.current!==null).filter(({state:r})=>r==="visible").length>0}function Cr(e,r){let a=ve(e),n=d.useRef([]),s=Nt(),l=Je(),o=$((h,x=ie.Hidden)=>{let v=n.current.findIndex(({el:b})=>b===h);v!==-1&&(re(x,{[ie.Unmount](){n.current.splice(v,1)},[ie.Hidden](){n.current[v].state="hidden"}}),l.microTask(()=>{var b;!at(n)&&s.current&&((b=a.current)==null||b.call(a))}))}),c=$(h=>{let x=n.current.find(({el:v})=>v===h);return x?x.state!=="visible"&&(x.state="visible"):n.current.push({el:h,state:"visible"}),()=>o(h,ie.Unmount)}),i=d.useRef([]),m=d.useRef(Promise.resolve()),f=d.useRef({enter:[],leave:[]}),p=$((h,x,v)=>{i.current.splice(0),r&&(r.chains.current[x]=r.chains.current[x].filter(([b])=>b!==h)),r?.chains.current[x].push([h,new Promise(b=>{i.current.push(b)})]),r?.chains.current[x].push([h,new Promise(b=>{Promise.all(f.current[x].map(([w,j])=>j)).then(()=>b())})]),x==="enter"?m.current=m.current.then(()=>r?.wait.current).then(()=>v(x)):v(x)}),u=$((h,x,v)=>{Promise.all(f.current[x].splice(0).map(([b,w])=>w)).then(()=>{var b;(b=i.current.shift())==null||b()}).then(()=>v(x))});return d.useMemo(()=>({children:n,register:c,unregister:o,onStart:p,onStop:u,wait:m,chains:f}),[c,o,n,p,u,f,m])}let $r=d.Fragment,Fr=Ye.RenderStrategy;function Hn(e,r){var a,n;let{transition:s=!0,beforeEnter:l,afterEnter:o,beforeLeave:c,afterLeave:i,enter:m,enterFrom:f,enterTo:p,entered:u,leave:h,leaveFrom:x,leaveTo:v,...b}=e,[w,j]=d.useState(null),N=d.useRef(null),k=Er(e),F=J(...k?[N,r,j]:r===null?[]:[r]),H=(a=b.unmount)==null||a?ie.Unmount:ie.Hidden,{show:I,appear:ce,initial:ue}=Ln(),[T,K]=d.useState(I?"visible":"hidden"),_=Mn(),{register:D,unregister:Y}=_;O(()=>D(N),[D,N]),O(()=>{if(H===ie.Hidden&&N.current){if(I&&T!=="visible"){K("visible");return}return re(T,{hidden:()=>Y(N),visible:()=>D(N)})}},[T,N,D,Y,I,H]);let ne=et();O(()=>{if(k&&ne&&T==="visible"&&N.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[N,T,ne,k]);let Ce=ue&&!ce,me=ce&&I&&ue,L=d.useRef(!1),se=Cr(()=>{L.current||(K("hidden"),Y(N))},_),je=$($e=>{L.current=!0;let Q=$e?"enter":"leave";se.onStart(N,Q,ge=>{ge==="enter"?l?.():ge==="leave"&&c?.()})}),q=$($e=>{let Q=$e?"enter":"leave";L.current=!1,se.onStop(N,Q,ge=>{ge==="enter"?o?.():ge==="leave"&&i?.()}),Q==="leave"&&!at(se)&&(K("hidden"),Y(N))});d.useEffect(()=>{k&&s||(je(I),q(I))},[I,k,s]);let we=!(!s||!k||!ne||Ce),[,S]=ln(we,w,I,{start:je,end:q}),ke=he({ref:F,className:((n=ft(b.className,me&&m,me&&f,S.enter&&m,S.enter&&S.closed&&f,S.enter&&!S.closed&&p,S.leave&&h,S.leave&&!S.closed&&x,S.leave&&S.closed&&v,!S.transition&&I&&u))==null?void 0:n.trim())||void 0,...sn(S)}),fe=0;T==="visible"&&(fe|=z.Open),T==="hidden"&&(fe|=z.Closed),I&&T==="hidden"&&(fe|=z.Opening),!I&&T==="visible"&&(fe|=z.Closing);let st=U();return y.createElement(rt.Provider,{value:se},y.createElement(mn,{value:fe},st({ourProps:ke,theirProps:b,defaultTag:$r,features:Fr,visible:T==="visible",name:"Transition.Child"})))}function Vn(e,r){let{show:a,appear:n=!1,unmount:s=!0,...l}=e,o=d.useRef(null),c=Er(e),i=J(...c?[o,r]:r===null?[]:[r]);et();let m=Ze();if(a===void 0&&m!==null&&(a=(m&z.Open)===z.Open),a===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[f,p]=d.useState(a?"visible":"hidden"),u=Cr(()=>{a||p("hidden")}),[h,x]=d.useState(!0),v=d.useRef([a]);O(()=>{h!==!1&&v.current[v.current.length-1]!==a&&(v.current.push(a),x(!1))},[v,a]);let b=d.useMemo(()=>({show:a,appear:n,initial:h}),[a,n,h]);O(()=>{a?p("visible"):!at(u)&&o.current!==null&&p("hidden")},[a,u]);let w={unmount:s},j=$(()=>{var F;h&&x(!1),(F=e.beforeEnter)==null||F.call(e)}),N=$(()=>{var F;h&&x(!1),(F=e.beforeLeave)==null||F.call(e)}),k=U();return y.createElement(rt.Provider,{value:u},y.createElement(tt.Provider,{value:b},k({ourProps:{...w,as:d.Fragment,children:y.createElement(_r,{ref:i,...w,...l,beforeEnter:j,beforeLeave:N})},theirProps:{},defaultTag:d.Fragment,features:Fr,visible:f==="visible",name:"Transition"})))}function Bn(e,r){let a=d.useContext(tt)!==null,n=Ze()!==null;return y.createElement(y.Fragment,null,!a&&n?y.createElement(yt,{ref:r,...e}):y.createElement(_r,{ref:r,...e}))}let yt=A(Vn),_r=A(Hn),St=A(Bn),Un=Object.assign(yt,{Child:St,Root:yt});var Wn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Wn||{}),zn=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(zn||{});let Kn={0(e,r){return e.titleId===r.id?e:{...e,titleId:r.id}}},Et=d.createContext(null);Et.displayName="DialogContext";function nt(e){let r=d.useContext(Et);if(r===null){let a=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,nt),a}return r}function Yn(e,r){return re(r.type,Kn,e,r)}let Yt=A(function(e,r){let a=d.useId(),{id:n=`headlessui-dialog-${a}`,open:s,onClose:l,initialFocus:o,role:c="dialog",autoFocus:i=!0,__demoMode:m=!1,unmount:f=!1,...p}=e,u=d.useRef(!1);c=(function(){return c==="dialog"||c==="alertdialog"?c:(u.current||(u.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let h=Ze();s===void 0&&h!==null&&(s=(h&z.Open)===z.Open);let x=d.useRef(null),v=J(x,r),b=wt(x.current),w=s?0:1,[j,N]=d.useReducer(Yn,{titleId:null,descriptionId:null,panelRef:d.createRef()}),k=$(()=>l(!1)),F=$(S=>N({type:0,id:S})),H=et()?w===0:!1,[I,ce]=jn(),ue={get current(){var S;return(S=j.panelRef.current)!=null?S:x.current}},T=kr(),{resolveContainers:K}=En({mainTreeNode:T,portals:I,defaultContainers:[ue]}),_=h!==null?(h&z.Closing)===z.Closing:!1;Oa(m||_?!1:H,{allowed:$(()=>{var S,ke;return[(ke=(S=x.current)==null?void 0:S.closest("[data-headlessui-portal]"))!=null?ke:null]}),disallowed:$(()=>{var S;return[(S=T?.closest("body > *:not(#headlessui-portal-root)"))!=null?S:null]})});let D=ur.get(null);O(()=>{if(H)return D.actions.push(n),()=>D.actions.pop(n)},[D,n,H]);let Y=mr(D,d.useCallback(S=>D.selectors.isTop(S,n),[D,n]));qa(Y,K,S=>{S.preventDefault(),k()}),Nn(Y,b?.defaultView,S=>{S.preventDefault(),S.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),k()}),tn(m||_?!1:H,b,K),Aa(H,x,k);let[ne,Ce]=ba(),me=d.useMemo(()=>[{dialogState:w,close:k,setTitleId:F,unmount:f},j],[w,k,F,f,j]),L=Be({open:w===0}),se={ref:v,id:n,role:c,tabIndex:-1,"aria-modal":m?void 0:w===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":ne,unmount:f},je=!Sn(),q=xe.None;H&&!m&&(q|=xe.RestoreFocus,q|=xe.TabLock,i&&(q|=xe.AutoFocus),je&&(q|=xe.InitialFocus));let we=U();return y.createElement(fn,null,y.createElement(zt,{force:!0},y.createElement(kn,null,y.createElement(Et.Provider,{value:me},y.createElement(jr,{target:x},y.createElement(zt,{force:!1},y.createElement(Ce,{slot:L},y.createElement(ce,null,y.createElement(In,{initialFocus:o,initialFocusFallback:x,containers:K,features:q},y.createElement(Sa,{value:k},we({ourProps:se,theirProps:p,slot:L,defaultTag:qn,features:Gn,visible:w===0,name:"Dialog"})))))))))))}),qn="div",Gn=Ye.RenderStrategy|Ye.Static;function Xn(e,r){let{transition:a=!1,open:n,...s}=e,l=Ze(),o=e.hasOwnProperty("open")||l!==null,c=e.hasOwnProperty("onClose");if(!o&&!c)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!c)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!l&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(n!==void 0||a)&&!s.static?y.createElement(Kt,null,y.createElement(Un,{show:n,transition:a,unmount:s.unmount},y.createElement(Yt,{ref:r,...s}))):y.createElement(Kt,null,y.createElement(Yt,{ref:r,open:n,...s}))}let Jn="div";function Qn(e,r){let a=d.useId(),{id:n=`headlessui-dialog-panel-${a}`,transition:s=!1,...l}=e,[{dialogState:o,unmount:c},i]=nt("Dialog.Panel"),m=J(r,i.panelRef),f=Be({open:o===0}),p=$(b=>{b.stopPropagation()}),u={ref:m,id:n,onClick:p},h=s?St:d.Fragment,x=s?{unmount:c}:{},v=U();return y.createElement(h,{...x},v({ourProps:u,theirProps:l,slot:f,defaultTag:Jn,name:"Dialog.Panel"}))}let Zn="div";function es(e,r){let{transition:a=!1,...n}=e,[{dialogState:s,unmount:l}]=nt("Dialog.Backdrop"),o=Be({open:s===0}),c={ref:r,"aria-hidden":!0},i=a?St:d.Fragment,m=a?{unmount:l}:{},f=U();return y.createElement(i,{...m},f({ourProps:c,theirProps:n,slot:o,defaultTag:Zn,name:"Dialog.Backdrop"}))}let ts="h2";function rs(e,r){let a=d.useId(),{id:n=`headlessui-dialog-title-${a}`,...s}=e,[{dialogState:l,setTitleId:o}]=nt("Dialog.Title"),c=J(r);d.useEffect(()=>(o(n),()=>o(null)),[n,o]);let i=Be({open:l===0}),m={ref:c,id:n};return U()({ourProps:m,theirProps:s,slot:i,defaultTag:ts,name:"Dialog.Title"})}let as=A(Xn),ns=A(Qn);A(es);let ss=A(rs),ut=Object.assign(as,{Panel:ns,Title:ss,Description:ka});function ls({isOpen:e,onClose:r,selectedForms:a,onSuccess:n}){const[s,l]=d.useState(!1),[o,c]=d.useState(!1),[i,m]=d.useState(!0),[f,p]=d.useState(""),[u,h]=d.useState(`ICS-212 Forms - ${a.length} Inspection${a.length>1?"s":""}`),[x,v]=d.useState(""),b=async()=>{const w=f.split(",").map(j=>j.trim()).filter(j=>j&&j.includes("@"));if(!o&&!i&&w.length===0){lt.error("Please specify at least one recipient");return}l(!0);try{const j=await fetch(`${ye}/api/ics212/forms/batch-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formIds:a.map(k=>k.form_id),recipientOptions:{sendToInspectors:o,sendToAdmins:i,customRecipients:w},emailTemplate:{subject:u,body:x||void 0}})}),N=await j.json();if(!j.ok)throw new Error(N.error||"Failed to send email");lt.success(`Email sent successfully to ${N.recipients} recipient(s)!`),n(),r()}catch(j){console.error("Email send error:",j),lt.error(j.message||"Failed to send email")}finally{l(!1)}};return t.jsx(bt,{children:e&&t.jsxs(ut,{static:!0,open:e,onClose:r,className:"relative z-50",children:[t.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50"}),t.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:t.jsxs(ut.Panel,{as:B.div,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden",children:[t.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(tr,{className:"w-6 h-6 text-blue-600"}),t.jsx(ut.Title,{className:"text-xl font-semibold",children:"Email ICS-212 Forms"})]}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:t.jsx(er,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"px-6 py-4 max-h-[70vh] overflow-y-auto space-y-4",children:[t.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:t.jsxs("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[a.length," form",a.length>1?"s":""," will be emailed as PDF attachments"]})}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Recipients"}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:o,onChange:w=>c(w.target.checked),className:"w-4 h-4 rounded border-gray-300"}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Send to Inspectors (if email available)"})]}),t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:i,onChange:w=>m(w.target.checked),className:"w-4 h-4 rounded border-gray-300"}),t.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Send to Admins"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Recipients (comma-separated)"}),t.jsx("input",{type:"text",value:f,onChange:w=>p(w.target.value),placeholder:"email1@example.com, email2@example.com",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject"}),t.jsx("input",{type:"text",value:u,onChange:w=>h(w.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Custom Message (Optional)"}),t.jsx("textarea",{value:x,onChange:w=>v(w.target.value),placeholder:"Leave blank to use default template",rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"If left blank, a professional template with form details will be used"})]})]}),t.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[t.jsx("button",{onClick:r,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",disabled:s,children:"Cancel"}),t.jsx("button",{onClick:b,disabled:s,className:"px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:s?t.jsxs(t.Fragment,{children:[t.jsx(It,{className:"w-4 h-4 animate-pulse"}),"Sending..."]}):t.jsxs(t.Fragment,{children:[t.jsx(It,{className:"w-4 h-4"}),"Send Email"]})})]})]})})]})})}function is(){const[e,r]=d.useState([]),[a,n]=d.useState(!0),[s,l]=d.useState(1),[o,c]=d.useState(1),[i,m]=d.useState(""),[f,p]=d.useState("all"),[u,h]=d.useState("all"),[x,v]=d.useState(""),[b,w]=d.useState(""),[j,N]=d.useState(null),[k,F]=d.useState(null),[H,I]=d.useState(!1),[ce,ue]=d.useState(null),[T,K]=d.useState(null),[_,D]=d.useState([]),[Y,ne]=d.useState(!1),[Ce,me]=d.useState(!1),L=d.useCallback(async(g=1,E=!1)=>{E||n(!0);try{const M=[];if(f==="all"||f==="ICS212"){const P=new URLSearchParams({page:g.toString(),limit:"20",sortBy:"date",sortOrder:"desc"});i&&P.set("search",i),u!=="all"&&P.set("status",u),x&&P.set("from",x),b&&P.set("to",b),M.push(fetch(`${ye}/ics212/forms?${P}`).then(R=>R.ok?R.json():{forms:[]}).then(R=>R.forms.map(Z=>({...Z,formType:"ICS212"}))))}if(f==="all"||f==="ICS218"){const P=new URLSearchParams({limit:"20",offset:((g-1)*20).toString()});i&&P.set("incident",i),M.push(fetch(`${vt.ics218Forms}?${P}`).then(R=>R.ok?R.json():{forms:[]}).then(R=>R.forms.map(Z=>({...Z,formType:"ICS218"}))))}const Fe=(await Promise.all(M)).flat();Fe.sort((P,R)=>new Date(R.created_at).getTime()-new Date(P.created_at).getTime()),r(E?P=>[...P,...Fe]:Fe),c(Fe.length>=20?g+1:g),l(g)}catch(M){console.error("Error fetching forms:",M),W({message:"Failed to load forms",type:"error"})}finally{n(!1)}},[i,f,u,x,b]);d.useEffect(()=>{L(1,!1)},[i,f,u,x,b]);const se=async()=>{await L(1,!1)},je=()=>{s<o&&!a&&L(s+1,!0)},q=async g=>{if(!g.pdf_url){W({message:"PDF not available",type:"error"});return}window.open(g.pdf_url,"_blank")},we=(g,E)=>{N(g),F(E)},S=g=>{ue(g),I(!0)},ke=async g=>{K(g);try{const E=await fetch(`${ye}/ics212/forms/${g}/regenerate-pdf`,{method:"POST"});if(!E.ok){const M=await E.json();throw new Error(M.error||"Failed to regenerate PDF")}W({message:"PDF regenerated successfully",type:"success"}),await L(1,!1)}catch(E){console.error("Error regenerating PDF:",E),W({message:E instanceof Error?E.message:"Failed to regenerate PDF",type:"error"})}finally{K(null)}},fe=async()=>{await L(1,!1)},st=g=>{D(E=>E.includes(g)?E.filter(M=>M!==g):[...E,g])},$e=()=>{const g=e.filter(E=>E.formType==="ICS212").map(E=>E.form_id);g.length>50?(W({message:"Maximum 50 forms can be downloaded at once. First 50 selected.",type:"warning"}),D(g.slice(0,50))):D(g)},Q=()=>{D([])},ge=async()=>{if(_.length!==0){ne(!0);try{const g=await fetch(`${ye}/ics212/forms/batch-download`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formIds:_})});if(!g.ok){const Dr=await g.json();throw new Error(Dr.error||"Failed to download forms")}const E=g.headers.get("X-Success-Count"),M=g.headers.get("X-Failure-Count"),Ct=await g.blob(),P=g.headers.get("Content-Disposition")?.split("filename=")[1]?.replace(/"/g,"")||"ICS212_Forms.zip",R=window.URL.createObjectURL(Ct),Z=document.createElement("a");Z.href=R,Z.download=P,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),window.URL.revokeObjectURL(R);let $t=`Downloaded ${E||_.length} forms`;M&&parseInt(M)>0&&($t+=` (${M} PDFs not available)`),W({message:$t,type:"success"}),Q()}catch(g){console.error("Batch download error:",g),W({message:g instanceof Error?g.message:"Failed to download forms",type:"error"})}finally{ne(!1)}}},Tr=g=>g==="ICS212"?t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:"ICS 212"}):t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:"ICS 218"}),Ir=g=>g==="hold"?t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"ðŸ”´ HOLD"}):t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"ðŸŸ¢ RELEASED"});return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 space-y-4",children:[t.jsx("div",{children:t.jsx("input",{type:"search",placeholder:"Search by vehicle ID, incident, or inspector...",value:i,onChange:g=>m(g.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Form Type"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(C,{children:t.jsx("button",{onClick:()=>p("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${f==="all"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"All Forms"})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>p("ICS212"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${f==="ICS212"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"ICS 212"})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>p("ICS218"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${f==="ICS218"?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"ICS 218"})})]})]}),(f==="all"||f==="ICS212")&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status (ICS 212)"}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(C,{children:t.jsx("button",{onClick:()=>h("all"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${u==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"All"})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>h("hold"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${u==="hold"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"HOLD"})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>h("release"),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${u==="release"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}`,children:"RELEASED"})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"From Date"}),t.jsx("input",{type:"date",value:x,onChange:g=>v(g.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"To Date"}),t.jsx("input",{type:"date",value:b,onChange:g=>w(g.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),_.length>0&&t.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg shadow-sm p-4",children:t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("span",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[_.length," form",_.length>1?"s":""," selected"]}),t.jsx(C,{children:t.jsx("button",{onClick:Q,className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-medium",children:"Clear Selection"})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(C,{children:t.jsx("button",{onClick:ge,disabled:Y,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-sm",children:Y?t.jsxs(t.Fragment,{children:[t.jsx(Dt,{className:"w-4 h-4 animate-spin"}),"Downloading..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Gr,{className:"w-4 h-4"}),"Download Selected (",_.length,")"]})})}),t.jsx(C,{children:t.jsxs("button",{onClick:()=>{if(_.length>10){W({message:"Maximum 10 forms can be emailed at once",type:"warning"});return}me(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium text-sm",children:[t.jsx(tr,{className:"w-4 h-4"}),"Email Selected (",_.length,")"]})})]})]})}),!a&&e.filter(g=>g.formType==="ICS212").length>0&&t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-3",children:t.jsx(C,{children:t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:_.length>0&&_.length===e.filter(g=>g.formType==="ICS212").length,onChange:g=>g.target.checked?$e():Q(),className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:opacity-50"}),t.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Select All ICS-212 Forms (",e.filter(g=>g.formType==="ICS212").length,")"]})]})})}),!a&&t.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",e.length," form",e.length!==1?"s":""]}),t.jsx(Jr,{onRefresh:se,children:t.jsx("div",{className:"space-y-3",children:a&&s===1?Array.from({length:5}).map((g,E)=>t.jsx(Ae,{type:"card"},E)):e.length===0?t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No forms found"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search or filter criteria"})]}):e.map(g=>t.jsx(Xr,{leftAction:{label:"View",color:"#3b82f6",onTrigger:()=>we(g.formType==="ICS212"?g.form_id:g.id,g.formType)},rightAction:{label:"Download",color:"#10b981",onTrigger:()=>q(g)},children:t.jsx(C,{children:t.jsx("div",{onClick:()=>we(g.formType==="ICS212"?g.form_id:g.id,g.formType),className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 cursor-pointer hover:shadow-md transition-shadow",children:t.jsxs("div",{className:"flex items-start gap-3",children:[g.formType==="ICS212"&&t.jsx("div",{className:"flex-shrink-0 pt-1",onClick:E=>E.stopPropagation(),children:t.jsx(C,{children:t.jsx("input",{type:"checkbox",checked:_.includes(g.form_id),onChange:()=>st(g.form_id),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[Tr(g.formType),g.formType==="ICS212"&&t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:g.vehicle_id_no}),Ir(g.release_decision)]}),g.formType==="ICS218"&&t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:g.incident_name})]}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 truncate",children:g.formType==="ICS212"?g.incident_name:g.vehicle_category}),t.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-500 dark:text-gray-400",children:[g.formType==="ICS212"&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{children:["ðŸ” ",g.inspector_name_print]}),t.jsxs("span",{children:["ðŸ“… ",new Date(g.inspector_date).toLocaleDateString()]}),g.pass_count!==void 0&&g.fail_count!==void 0&&t.jsxs("span",{children:["âœ… ",g.pass_count," / âŒ ",g.fail_count]})]}),g.formType==="ICS218"&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{children:["ðŸ‘¤ ",g.prepared_by_name]}),t.jsxs("span",{children:["ðŸ“… ",new Date(g.date_prepared).toLocaleDateString()]}),t.jsxs("span",{children:["ðŸš— ",g.vehicleCount," vehicle",g.vehicleCount!==1?"s":""]})]})]}),g.formType==="ICS212"&&t.jsxs("div",{className:"flex gap-2 mt-3",onClick:E=>E.stopPropagation(),children:[t.jsx(C,{children:t.jsxs("button",{onClick:()=>S(g),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[t.jsx(Lr,{className:"w-3 h-3"}),"Edit"]})}),t.jsx(C,{children:t.jsxs("button",{onClick:()=>ke(g.form_id),disabled:T===g.form_id,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(Dt,{className:`w-3 h-3 ${T===g.form_id?"animate-spin":""}`}),T===g.form_id?"Regenerating...":"Regenerate PDF"]})})]})]}),t.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})})},`${g.formType}-${g.id}`))})}),s<o&&!a&&t.jsx(C,{children:t.jsx("button",{onClick:je,className:"w-full py-3 bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 rounded-lg shadow-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Load More"})}),a&&s>1&&t.jsx("div",{className:"text-center py-4",children:t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),j&&k==="ICS212"&&t.jsx(Pt,{isOpen:!0,onClose:()=>N(null),title:"Form Details",children:t.jsx(Qr,{formId:j})}),j&&k==="ICS218"&&t.jsx(Pt,{isOpen:!0,onClose:()=>N(null),title:"Form Details",children:t.jsx(Zr,{formId:j})}),H&&ce&&t.jsx(ea,{isOpen:H,onClose:()=>{I(!1),ue(null)},submission:ce,onSave:fe}),t.jsx(ls,{isOpen:Ce,onClose:()=>me(!1),selectedForms:e.filter(g=>g.formType==="ICS212"&&_.includes(g.form_id)),onSuccess:()=>{Q(),L(1,!1)}})]})}function os(){const[e,r]=d.useState(!0),[a,n]=d.useState(null),[s,l]=d.useState(null);d.useEffect(()=>{o();const m=setInterval(o,6e4);return()=>clearInterval(m)},[]);const o=async()=>{try{const m=await fetch(`${ye}/ics212/analytics`);if(m.ok){const p=await m.json();n(p)}const f=await fetch(`${vt.ics218Forms}?limit=1000`);if(f.ok){const u=(await f.json()).forms||[],h=new Date,x=h.getMonth(),v=h.getFullYear(),b=u.filter(k=>{const F=new Date(k.created_at);return F.getMonth()===x&&F.getFullYear()===v}).length,w=u.reduce((k,F)=>k+(F.vehicleCount||0),0),j={};u.forEach(k=>{const F=k.vehicle_category||"Unknown";j[F]=(j[F]||0)+1});const N=Object.entries(j).map(([k,F])=>({category:k,count:F}));l({totalForms:u.length,totalVehicles:w,formsByCategory:N,formsThisMonth:b})}}catch(m){console.error("Error fetching analytics:",m)}finally{r(!1)}};if(e)return t.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((m,f)=>t.jsx(Ae,{type:"card"},f))});if(!a)return t.jsx("div",{className:"text-center text-red-500 p-4",children:"Failed to load analytics"});const c=[{name:"HOLD",value:Math.round(a.holdRate),color:"#ef4444"},{name:"RELEASED",value:Math.round(a.releaseRate),color:"#10b981"}],i=[{name:"ICS 212",total:a.totalForms,thisMonth:a.formsThisMonth,color:"#3b82f6"},{name:"ICS 218",total:s?.totalForms||0,thisMonth:s?.formsThisMonth||0,color:"#f97316"}];return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"ICS 212 Forms"}),t.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:a.totalForms})]}),t.jsx("div",{className:"text-4xl",children:"ðŸ“‹"})]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[a.formsThisMonth," this month"]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"ICS 218 Forms"}),t.jsx("p",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mt-1",children:s?.totalForms||0})]}),t.jsx("div",{className:"text-4xl",children:"ðŸš—"})]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[s?.formsThisMonth||0," this month"]})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"HOLD Rate"}),t.jsxs("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mt-1",children:[a.holdRate.toFixed(1),"%"]})]}),t.jsx("div",{className:"text-4xl",children:"ðŸ”´"})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"ICS 212 only"})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Vehicles Tracked"}),t.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-1",children:s?.totalVehicles||0})]}),t.jsx("div",{className:"text-4xl",children:"ðŸš™"})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"ICS 218 vehicles"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Form Type Comparison"}),t.jsx(Ne,{width:"100%",height:300,children:t.jsxs(We,{data:i,children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(Te,{dataKey:"name",stroke:"#9ca3af"}),t.jsx(Ie,{stroke:"#9ca3af"}),t.jsx(Se,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(Hr,{}),t.jsx(De,{dataKey:"total",fill:"#3b82f6",name:"Total Forms"}),t.jsx(De,{dataKey:"thisMonth",fill:"#10b981",name:"This Month"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ICS 212 Release Decisions"}),t.jsx(Ne,{width:"100%",height:300,children:t.jsxs(Vr,{children:[t.jsx(Br,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:({name:m,value:f})=>`${m}: ${f}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:c.map((m,f)=>t.jsx(Ur,{fill:m.color},`cell-${f}`))}),t.jsx(Se,{})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ICS 212 Forms Per Day (Last 30 Days)"}),t.jsx(Ne,{width:"100%",height:300,children:t.jsxs(Wr,{data:a.formsPerDay,children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(Te,{dataKey:"date",stroke:"#9ca3af",tick:{fontSize:12}}),t.jsx(Ie,{stroke:"#9ca3af"}),t.jsx(Se,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(zr,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4}})]})})]}),s&&s.formsByCategory.length>0&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"ICS 218 Vehicle Categories"}),t.jsx(Ne,{width:"100%",height:300,children:t.jsxs(We,{data:s.formsByCategory,layout:"horizontal",children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(Te,{type:"number",stroke:"#9ca3af"}),t.jsx(Ie,{type:"category",dataKey:"category",stroke:"#9ca3af",width:100,tick:{fontSize:11}}),t.jsx(Se,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(De,{dataKey:"count",fill:"#f97316"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top 10 Vehicles by ICS 212 Inspections"}),t.jsx(Ne,{width:"100%",height:300,children:t.jsxs(We,{data:a.topVehicles.slice(0,10),children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(Te,{dataKey:"vehicleId",stroke:"#9ca3af",angle:-45,textAnchor:"end",height:80,tick:{fontSize:10}}),t.jsx(Ie,{stroke:"#9ca3af"}),t.jsx(Se,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(De,{dataKey:"count",fill:"#3b82f6"})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Top Safety Item Failures (ICS 212)"}),t.jsx(Ne,{width:"100%",height:300,children:t.jsxs(We,{data:a.safetyItemFailures.slice(0,8),layout:"vertical",children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"#374151"}),t.jsx(Te,{type:"number",stroke:"#9ca3af"}),t.jsx(Ie,{type:"category",dataKey:"item",stroke:"#9ca3af",width:150,tick:{fontSize:10}}),t.jsx(Se,{contentStyle:{backgroundColor:"#1f2937",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"}}),t.jsx(De,{dataKey:"count",fill:"#ef4444"})]})})]})]})]})}function ws(){const[e,r]=d.useState("list"),a=Rr();return t.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[t.jsxs("header",{className:"sticky top-0 z-50 bg-white dark:bg-gray-800 shadow-md",children:[t.jsx("div",{className:"px-4 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:"/taskforce-io-logo.png",alt:"TASKFORCE IO",className:"w-10 h-10 object-contain"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"TASKFORCE IO Admin"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Vehicle Safety Inspections"})]}),t.jsx(C,{children:t.jsxs("button",{onClick:()=>a("/"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"Return to Home",children:[t.jsx(Yr,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Home"})]})})]})}),t.jsxs("nav",{className:"flex border-t border-gray-200 dark:border-gray-700",children:[t.jsx(C,{children:t.jsx("button",{onClick:()=>r("list"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${e==="list"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ðŸ“‹"}),t.jsx("span",{className:"hidden sm:inline",children:"Forms"})]})})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>r("analytics"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${e==="analytics"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ðŸ“Š"}),t.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]})})}),t.jsx(C,{children:t.jsx("button",{onClick:()=>r("vehicles"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${e==="vehicles"?"border-b-2 border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("span",{children:"ðŸš—"}),t.jsx("span",{className:"hidden sm:inline",children:"Vehicles"})]})})})]})]}),t.jsx("main",{className:"p-4 pb-20 md:p-6 lg:p-8",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[e==="list"&&t.jsx(is,{}),e==="analytics"&&t.jsx(os,{}),e==="vehicles"&&t.jsx(Kr,{})]})})]})}export{ws as ICS212AdminDashboard};
//# sourceMappingURL=ICS212AdminDashboard-C3k7jgMK.js.map
