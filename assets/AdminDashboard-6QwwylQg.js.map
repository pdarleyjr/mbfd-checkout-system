{"version":3,"file":"AdminDashboard-6QwwylQg.js","sources":["../../node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/lucide-react/dist/esm/icons/brain.js","../../node_modules/lucide-react/dist/esm/icons/circle-alert.js","../../node_modules/lucide-react/dist/esm/icons/circle-x.js","../../node_modules/lucide-react/dist/esm/icons/clipboard-list.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/lightbulb.js","../../node_modules/lucide-react/dist/esm/icons/lock.js","../../node_modules/lucide-react/dist/esm/icons/mail.js","../../node_modules/lucide-react/dist/esm/icons/package.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/sparkles.js","../../node_modules/lucide-react/dist/esm/icons/trending-up.js","../../node_modules/lucide-react/dist/esm/icons/truck.js","../../node_modules/lucide-react/dist/esm/icons/warehouse.js","../../src/components/AIFleetInsights.tsx","../../src/components/inventory/SupplyListPanel.tsx","../../src/hooks/useSupplyTasks.ts","../../src/components/inventory/TasksPanel.tsx","../../src/hooks/useInventory.ts","../../src/components/inventory/SuggestionsPanel.tsx","../../src/components/inventory/AIInsightsPanel.tsx","../../src/components/inventory/InventoryTab.tsx","../../src/components/AdminDashboard.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 18V5\", key: \"adv99a\" }],\n  [\"path\", { d: \"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4\", key: \"1e3is1\" }],\n  [\"path\", { d: \"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5\", key: \"1gqd8o\" }],\n  [\"path\", { d: \"M17.997 5.125a4 4 0 0 1 2.526 5.77\", key: \"iwvgf7\" }],\n  [\"path\", { d: \"M18 18a4 4 0 0 0 2-7.464\", key: \"efp6ie\" }],\n  [\"path\", { d: \"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517\", key: \"1gq6am\" }],\n  [\"path\", { d: \"M6 18a4 4 0 0 1-2-7.464\", key: \"k1g0md\" }],\n  [\"path\", { d: \"M6.003 5.125a4 4 0 0 0-2.526 5.77\", key: \"q97ue3\" }]\n];\nconst Brain = createLucideIcon(\"brain\", __iconNode);\n\nexport { __iconNode, Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n];\nconst CircleAlert = createLucideIcon(\"circle-alert\", __iconNode);\n\nexport { __iconNode, CircleAlert as default };\n//# sourceMappingURL=circle-alert.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n];\nconst CircleX = createLucideIcon(\"circle-x\", __iconNode);\n\nexport { __iconNode, CircleX as default };\n//# sourceMappingURL=circle-x.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"8\", height: \"4\", x: \"8\", y: \"2\", rx: \"1\", ry: \"1\", key: \"tgr4d6\" }],\n  [\n    \"path\",\n    {\n      d: \"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\",\n      key: \"116196\"\n    }\n  ],\n  [\"path\", { d: \"M12 11h4\", key: \"1jrz19\" }],\n  [\"path\", { d: \"M12 16h4\", key: \"n85exb\" }],\n  [\"path\", { d: \"M8 11h.01\", key: \"1dfujw\" }],\n  [\"path\", { d: \"M8 16h.01\", key: \"18s6g9\" }]\n];\nconst ClipboardList = createLucideIcon(\"clipboard-list\", __iconNode);\n\nexport { __iconNode, ClipboardList as default };\n//# sourceMappingURL=clipboard-list.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 6v6l4 2\", key: \"mmk7yg\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }]\n];\nconst Clock = createLucideIcon(\"clock\", __iconNode);\n\nexport { __iconNode, Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5\",\n      key: \"1gvzjb\"\n    }\n  ],\n  [\"path\", { d: \"M9 18h6\", key: \"x1upvd\" }],\n  [\"path\", { d: \"M10 22h4\", key: \"ceow96\" }]\n];\nconst Lightbulb = createLucideIcon(\"lightbulb\", __iconNode);\n\nexport { __iconNode, Lightbulb as default };\n//# sourceMappingURL=lightbulb.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n];\nconst Lock = createLucideIcon(\"lock\", __iconNode);\n\nexport { __iconNode, Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7\", key: \"132q7q\" }],\n  [\"rect\", { x: \"2\", y: \"4\", width: \"20\", height: \"16\", rx: \"2\", key: \"izxlao\" }]\n];\nconst Mail = createLucideIcon(\"mail\", __iconNode);\n\nexport { __iconNode, Mail as default };\n//# sourceMappingURL=mail.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z\",\n      key: \"1a0edw\"\n    }\n  ],\n  [\"path\", { d: \"M12 22V12\", key: \"d0xqtd\" }],\n  [\"polyline\", { points: \"3.29 7 12 12 20.71 7\", key: \"ousv84\" }],\n  [\"path\", { d: \"m7.5 4.27 9 5.15\", key: \"1c824w\" }]\n];\nconst Package = createLucideIcon(\"package\", __iconNode);\n\nexport { __iconNode, Package as default };\n//# sourceMappingURL=package.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\"path\", { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n];\nconst RefreshCw = createLucideIcon(\"refresh-cw\", __iconNode);\n\nexport { __iconNode, RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m21 21-4.34-4.34\", key: \"14j7rj\" }],\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }]\n];\nconst Search = createLucideIcon(\"search\", __iconNode);\n\nexport { __iconNode, Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z\",\n      key: \"1s2grr\"\n    }\n  ],\n  [\"path\", { d: \"M20 2v4\", key: \"1rf3ol\" }],\n  [\"path\", { d: \"M22 4h-4\", key: \"gwowj6\" }],\n  [\"circle\", { cx: \"4\", cy: \"20\", r: \"2\", key: \"6kqj1y\" }]\n];\nconst Sparkles = createLucideIcon(\"sparkles\", __iconNode);\n\nexport { __iconNode, Sparkles as default };\n//# sourceMappingURL=sparkles.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 7h6v6\", key: \"box55l\" }],\n  [\"path\", { d: \"m22 7-8.5 8.5-5-5L2 17\", key: \"1t1m79\" }]\n];\nconst TrendingUp = createLucideIcon(\"trending-up\", __iconNode);\n\nexport { __iconNode, TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2\", key: \"wrbu53\" }],\n  [\"path\", { d: \"M15 18H9\", key: \"1lyqi6\" }],\n  [\n    \"path\",\n    {\n      d: \"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14\",\n      key: \"lysw3i\"\n    }\n  ],\n  [\"circle\", { cx: \"17\", cy: \"18\", r: \"2\", key: \"332jqn\" }],\n  [\"circle\", { cx: \"7\", cy: \"18\", r: \"2\", key: \"19iecd\" }]\n];\nconst Truck = createLucideIcon(\"truck\", __iconNode);\n\nexport { __iconNode, Truck as default };\n//# sourceMappingURL=truck.js.map\n","/**\n * @license lucide-react v0.556.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11\", key: \"pb2vm6\" }],\n  [\n    \"path\",\n    {\n      d: \"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z\",\n      key: \"doq5xv\"\n    }\n  ],\n  [\"path\", { d: \"M6 13h12\", key: \"yf64js\" }],\n  [\"path\", { d: \"M6 17h12\", key: \"1jwigz\" }]\n];\nconst Warehouse = createLucideIcon(\"warehouse\", __iconNode);\n\nexport { __iconNode, Warehouse as default };\n//# sourceMappingURL=warehouse.js.map\n","import React, { useState, useEffect } from 'react';\r\nimport { Brain, Sparkles, AlertTriangle, CheckCircle, TrendingUp, Package, RefreshCw } from 'lucide-react';\r\nimport { Button } from './ui/Button';\r\nimport { Card, CardContent } from './ui/Card';\r\nimport { githubService } from '../lib/github';\r\nimport { APPARATUS_LIST } from '../lib/config';\r\n\r\ninterface AIFleetInsightsProps {\r\n  adminPassword: string;\r\n  onCriticalAlertCount?: (count: number) => void;\r\n}\r\n\r\ninterface AIInsightsData {\r\n  insights: string[];\r\n  dataPoints: number;\r\n  timeframe: string;\r\n  apparatus: string;\r\n  generatedAt: string;\r\n}\r\n\r\nexport const AIFleetInsights: React.FC<AIFleetInsightsProps> = ({ adminPassword, onCriticalAlertCount }) => {\r\n  const [aiInsights, setAiInsights] = useState<AIInsightsData | null>(null);\r\n  const [isLoadingInsights, setIsLoadingInsights] = useState(false);\r\n  const [insightsError, setInsightsError] = useState<string | null>(null);\r\n  const [selectedTimeframe, setSelectedTimeframe] = useState<'week' | 'month' | 'all'>('week');\r\n  const [selectedApparatus, setSelectedApparatus] = useState<string>('all');\r\n\r\n  const loadAIInsights = async () => {\r\n    if (!adminPassword) {\r\n      setInsightsError('Admin authentication required');\r\n      return;\r\n    }\r\n    \r\n    setIsLoadingInsights(true);\r\n    setInsightsError(null);\r\n    \r\n    try {\r\n      const apparatus = selectedApparatus === 'all' ? undefined : selectedApparatus;\r\n      const insights = await githubService.getAIInsights(\r\n        adminPassword,\r\n        selectedTimeframe,\r\n        apparatus\r\n      );\r\n      \r\n      setAiInsights(insights);\r\n      \r\n      // Check for critical alerts\r\n      const criticalCount = insights.insights.filter((insight: string) => \r\n        insight.toLowerCase().includes('critical') || \r\n        insight.toLowerCase().includes('immediate') ||\r\n        insight.toLowerCase().includes('urgent')\r\n      ).length;\r\n      \r\n      if (onCriticalAlertCount) {\r\n        onCriticalAlertCount(criticalCount);\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error loading AI insights:', error);\r\n      setInsightsError(error.message || 'Failed to load AI insights');\r\n    } finally {\r\n      setIsLoadingInsights(false);\r\n    }\r\n  };\r\n\r\n  // Auto-load insights on mount and when filters change\r\n  useEffect(() => {\r\n    if (adminPassword) {\r\n      loadAIInsights();\r\n    }\r\n  }, [selectedTimeframe, selectedApparatus, adminPassword]);\r\n\r\n  const renderInsightCard = (insight: string, index: number) => {\r\n    const isCritical = insight.toLowerCase().includes('critical') || insight.toLowerCase().includes('urgent');\r\n    const isWarning = insight.toLowerCase().includes('warning') || insight.toLowerCase().includes('attention');\r\n    const isPositive = insight.toLowerCase().includes('good') || insight.toLowerCase().includes('excellent') || insight.toLowerCase().includes('optimal');\r\n\r\n    let bgColor = 'bg-blue-50';\r\n    let borderColor = 'border-blue-200';\r\n    let textColor = 'text-blue-800';\r\n    let icon = <CheckCircle className=\"w-5 h-5 text-blue-600\" />;\r\n\r\n    if (isCritical) {\r\n      bgColor = 'bg-red-50';\r\n      borderColor = 'border-red-200';\r\n      textColor = 'text-red-800';\r\n      icon = <AlertTriangle className=\"w-5 h-5 text-red-600\" />;\r\n    } else if (isWarning) {\r\n      bgColor = 'bg-yellow-50';\r\n      borderColor = 'border-yellow-200';\r\n      textColor = 'text-yellow-800';\r\n      icon = <AlertTriangle className=\"w-5 h-5 text-yellow-600\" />;\r\n    } else if (isPositive) {\r\n      bgColor = 'bg-green-50';\r\n      borderColor = 'border-green-200';\r\n      textColor = 'text-green-800';\r\n      icon = <CheckCircle className=\"w-5 h-5 text-green-600\" />;\r\n    }\r\n\r\n    return (\r\n      <div key={index} className={`flex items-start gap-3 p-4 ${bgColor} rounded-lg border ${borderColor}`}>\r\n        {icon}\r\n        <p className={`text-sm font-medium ${textColor} flex-1`}>{insight}</p>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900 flex items-center gap-2\">\r\n            <Brain className=\"w-7 h-7 text-blue-600\" />\r\n            Fleet Insights - AI Analysis\r\n          </h2>\r\n          <p className=\"text-sm text-gray-600 mt-1 flex items-center gap-2\">\r\n            <Sparkles className=\"w-4 h-4 text-purple-600\" />\r\n            Powered by Cloudflare Workers AI (Llama 3 8B)\r\n          </p>\r\n        </div>\r\n        <Button\r\n          onClick={loadAIInsights}\r\n          disabled={isLoadingInsights}\r\n          variant=\"secondary\"\r\n          className=\"flex items-center gap-2\"\r\n        >\r\n          <RefreshCw className={`w-4 h-4 ${isLoadingInsights ? 'animate-spin' : ''}`} />\r\n          Refresh Analysis\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card>\r\n        <CardContent className=\"p-6\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {/* Timeframe Selector */}\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                Analysis Timeframe\r\n              </label>\r\n              <div className=\"flex gap-2\">\r\n                {[\r\n                  { value: 'week', label: 'Last Week' },\r\n                  { value: 'month', label: 'Last Month' },\r\n                  { value: 'all', label: 'All Time' }\r\n                ].map(({ value, label }) => (\r\n                  <button\r\n                    key={value}\r\n                    onClick={() => setSelectedTimeframe(value as any)}\r\n                    className={`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${\r\n                      selectedTimeframe === value\r\n                        ? 'bg-blue-600 text-white shadow-md'\r\n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                    }`}\r\n                  >\r\n                    {label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Apparatus Filter */}\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                Filter by Apparatus\r\n              </label>\r\n              <select\r\n                value={selectedApparatus}\r\n                onChange={(e) => setSelectedApparatus(e.target.value)}\r\n                className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none\"\r\n              >\r\n                <option value=\"all\">All Apparatus</option>\r\n                {APPARATUS_LIST.map((apparatus) => (\r\n                  <option key={apparatus} value={apparatus}>\r\n                    {apparatus}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Analyze Button */}\r\n          <div className=\"mt-4 pt-4 border-t border-gray-200\">\r\n            <Button\r\n              onClick={loadAIInsights}\r\n              disabled={isLoadingInsights}\r\n              className=\"w-full md:w-auto flex items-center gap-2\"\r\n            >\r\n              <Brain className=\"w-5 h-5\" />\r\n              {isLoadingInsights ? 'Analyzing Fleet...' : 'Analyze Fleet'}\r\n            </Button>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Loading State */}\r\n      {isLoadingInsights && (\r\n        <Card>\r\n          <CardContent className=\"py-12\">\r\n            <div className=\"text-center\">\r\n              <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-4 animate-pulse\">\r\n                <Sparkles className=\"w-8 h-8 text-white\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-bold text-gray-900 mb-2\">AI Analysis in Progress</h3>\r\n              <p className=\"text-gray-600\">Analyzing inspection data and generating insights...</p>\r\n              <div className=\"mt-4 w-48 h-2 bg-gray-200 rounded-full mx-auto overflow-hidden\">\r\n                <div className=\"h-full bg-gradient-to-r from-blue-500 to-purple-600 animate-pulse\"></div>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Error State */}\r\n      {insightsError && !isLoadingInsights && (\r\n        <Card className=\"border-red-300\">\r\n          <CardContent className=\"p-6\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <AlertTriangle className=\"w-6 h-6 text-red-600 flex-shrink-0 mt-1\" />\r\n              <div className=\"flex-1\">\r\n                <h3 className=\"text-lg font-bold text-red-900 mb-2\">Analysis Unavailable</h3>\r\n                <p className=\"text-red-700 text-sm mb-4\">{insightsError}</p>\r\n                {insightsError.includes('503') || insightsError.includes('enabled') ? (\r\n                  <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 text-sm text-red-800\">\r\n                    <p className=\"font-semibold mb-2\">AI service is temporarily unavailable.</p>\r\n                    <p>This could be due to:</p>\r\n                    <ul className=\"list-disc list-inside mt-2 space-y-1\">\r\n                      <li>Cloudflare Workers AI service maintenance</li>\r\n                      <li>AI features not configured in the worker</li>\r\n                      <li>Network connectivity issues</li>\r\n                    </ul>\r\n                    <p className=\"mt-3 font-medium\">You can still view raw data in other dashboard tabs.</p>\r\n                  </div>\r\n                ) : (\r\n                  <Button onClick={loadAIInsights} variant=\"secondary\">\r\n                    Try Again\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* No Data State */}\r\n      {!aiInsights && !isLoadingInsights && !insightsError && (\r\n        <Card>\r\n          <CardContent className=\"py-12 text-center\">\r\n            <Brain className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-bold text-gray-900 mb-2\">No Analysis Data</h3>\r\n            <p className=\"text-gray-600 mb-4\">\r\n              No inspection data available for this timeframe.\r\n            </p>\r\n            <p className=\"text-sm text-gray-500\">\r\n              Try expanding the timeframe or checking other apparatus.\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* AI Insights Results */}\r\n      {aiInsights && !isLoadingInsights && (\r\n        <div className=\"space-y-6\">\r\n          {/* Summary Card */}\r\n          <Card className=\"border-blue-300 bg-gradient-to-br from-blue-50 to-purple-50\">\r\n            <CardContent className=\"p-6\">\r\n              <div className=\"flex items-start gap-4\">\r\n                <div className=\"bg-gradient-to-br from-blue-600 to-purple-600 p-3 rounded-full\">\r\n                  <TrendingUp className=\"w-6 h-6 text-white\" />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Analysis Summary</h3>\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-600\">Data Points</p>\r\n                      <p className=\"text-2xl font-bold text-blue-600\">{aiInsights.dataPoints}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-600\">Timeframe</p>\r\n                      <p className=\"text-lg font-semibold text-gray-900 capitalize\">{aiInsights.timeframe}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-600\">Apparatus</p>\r\n                      <p className=\"text-lg font-semibold text-gray-900\">{aiInsights.apparatus || 'All'}</p>\r\n                    </div>\r\n                    <div>\r\n                      <p className=\"text-sm text-gray-600\">Insights Found</p>\r\n                      <p className=\"text-2xl font-bold text-purple-600\">{aiInsights.insights.length}</p>\r\n                    </div>\r\n                  </div>\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    Generated at: {new Date(aiInsights.generatedAt).toLocaleString()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Insights List */}\r\n          <Card>\r\n            <CardContent className=\"p-6\">\r\n              <h3 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                <AlertTriangle className=\"w-5 h-5 text-orange-600\" />\r\n                AI-Generated Insights\r\n              </h3>\r\n              \r\n              {aiInsights.insights.length > 0 ? (\r\n                <div className=\"space-y-3\">\r\n                  {aiInsights.insights.map((insight, index) => renderInsightCard(insight, index))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-center py-12\">\r\n                  <CheckCircle className=\"w-12 h-12 text-green-600 mx-auto mb-4\" />\r\n                  <p className=\"text-lg font-semibold text-gray-900\">Fleet Operating Optimally</p>\r\n                  <p className=\"text-gray-600 mt-2\">AI analysis found no issues or recommendations at this time.</p>\r\n                </div>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Statistical Visualization */}\r\n          <Card>\r\n            <CardContent className=\"p-6\">\r\n              <h3 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                <Package className=\"w-5 h-5 text-green-600\" />\r\n                Fleet Health Score\r\n              </h3>\r\n              \r\n              <div className=\"space-y-4\">\r\n                {/* Overall Health */}\r\n                <div>\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <span className=\"text-sm font-semibold text-gray-700\">Overall Fleet Health</span>\r\n                    <span className={`text-lg font-bold ${\r\n                      aiInsights.dataPoints > 0 ? 'text-green-600' : 'text-gray-500'\r\n                    }`}>\r\n                      {aiInsights.dataPoints > 0 ? Math.max(70, 100 - (aiInsights.insights.length * 5)) : 0}%\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"w-full bg-gray-200 rounded-full h-3\">\r\n                    <div\r\n                      className=\"h-3 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 transition-all duration-500\"\r\n                      style={{ width: `${aiInsights.dataPoints > 0 ? Math.max(70, 100 - (aiInsights.insights.length * 5)) : 0}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Insights Breakdown */}\r\n                <div className=\"grid grid-cols-3 gap-4 pt-4 border-t border-gray-200\">\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-sm text-gray-600\">Critical</p>\r\n                    <p className=\"text-2xl font-bold text-red-600\">\r\n                      {aiInsights.insights.filter(i => i.toLowerCase().includes('critical')).length}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-sm text-gray-600\">Warnings</p>\r\n                    <p className=\"text-2xl font-bold text-yellow-600\">\r\n                      {aiInsights.insights.filter(i => i.toLowerCase().includes('warning')).length}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"text-center\">\r\n                    <p className=\"text-sm text-gray-600\">Recommendations</p>\r\n                    <p className=\"text-2xl font-bold text-blue-600\">\r\n                      {aiInsights.insights.filter(i => !i.toLowerCase().includes('critical') && !i.toLowerCase().includes('warning')).length}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useMemo } from 'react';\r\nimport { Package, Search, RefreshCw, AlertTriangle } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { Card, CardContent } from '../ui/Card';\r\nimport type { InventoryItem } from '../../lib/inventory';\r\n\r\ninterface SupplyListPanelProps {\r\n  items: InventoryItem[];\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  onRefresh: () => void;\r\n}\r\n\r\ntype SortField = 'name' | 'quantity' | 'location';\r\ntype SortDirection = 'asc' | 'desc';\r\n\r\nexport const SupplyListPanel: React.FC<SupplyListPanelProps> = ({\r\n  items,\r\n  isLoading,\r\n  error,\r\n  onRefresh,\r\n}) => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [sortField, setSortField] = useState<SortField>('name');\r\n  const [sortDirection, setSortDirection] = useState<SortDirection>('asc');\r\n\r\n  const filteredAndSortedItems = useMemo(() => {\r\n    let results = items;\r\n\r\n    // Filter\r\n    if (searchTerm) {\r\n      const term = searchTerm.toLowerCase();\r\n      results = results.filter(\r\n        (item) =>\r\n          item.equipmentName.toLowerCase().includes(term) ||\r\n          item.equipmentType.toLowerCase().includes(term) ||\r\n          item.location?.toLowerCase().includes(term) ||\r\n          item.description?.toLowerCase().includes(term)\r\n      );\r\n    }\r\n\r\n    // Sort\r\n    results = [...results].sort((a, b) => {\r\n      let compareValue = 0;\r\n      \r\n      switch (sortField) {\r\n        case 'name':\r\n          compareValue = a.equipmentName.localeCompare(b.equipmentName);\r\n          break;\r\n        case 'quantity':\r\n          compareValue = a.quantity - b.quantity;\r\n          break;\r\n        case 'location':\r\n          compareValue = (a.location || '').localeCompare(b.location || '');\r\n          break;\r\n      }\r\n\r\n      return sortDirection === 'asc' ? compareValue : -compareValue;\r\n    });\r\n\r\n    return results;\r\n  }, [items, searchTerm, sortField, sortDirection]);\r\n\r\n  const toggleSort = (field: SortField) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection('asc');\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return (\r\n      <Card className=\"border-red-300\">\r\n        <CardContent className=\"py-8 text-center\">\r\n          <AlertTriangle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\r\n          <p className=\"text-red-600 font-semibold mb-2\">Error Loading Inventory</p>\r\n          <p className=\"text-gray-600 text-sm mb-4\">{error}</p>\r\n          <Button onClick={onRefresh} variant=\"secondary\">\r\n            Try Again\r\n          </Button>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Search and Actions Bar - Sticky on mobile */}\r\n      <div className=\"sticky top-0 z-10 bg-white rounded-lg shadow-sm border border-gray-200 p-4 space-y-3\">\r\n        <div className=\"flex gap-2\">\r\n          <div className=\"relative flex-1\">\r\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search inventory...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-base\"\r\n            />\r\n          </div>\r\n          <Button\r\n            onClick={onRefresh}\r\n            variant=\"secondary\"\r\n            className=\"flex-shrink-0 min-w-[44px] min-h-[44px] flex items-center justify-center\"\r\n            disabled={isLoading}\r\n            aria-label=\"Refresh inventory\"\r\n          >\r\n            <RefreshCw className={`w-5 h-5 ${isLoading ? 'animate-spin' : ''}`} />\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Sort Controls */}\r\n        <div className=\"flex gap-2 flex-wrap\">\r\n          <button\r\n            onClick={() => toggleSort('name')}\r\n            className={`px-3 py-2 rounded-lg text-sm font-semibold transition-colors ${\r\n              sortField === 'name'\r\n                ? 'bg-blue-100 text-blue-700'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            Name {sortField === 'name' && (sortDirection === 'asc' ? '↑' : '↓')}\r\n          </button>\r\n          <button\r\n            onClick={() => toggleSort('quantity')}\r\n            className={`px-3 py-2 rounded-lg text-sm font-semibold transition-colors ${\r\n              sortField === 'quantity'\r\n                ? 'bg-blue-100 text-blue-700'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            Quantity {sortField === 'quantity' && (sortDirection === 'asc' ? '↑' : '↓')}\r\n          </button>\r\n          <button\r\n            onClick={() => toggleSort('location')}\r\n            className={`px-3 py-2 rounded-lg text-sm font-semibold transition-colors ${\r\n              sortField === 'location'\r\n                ? 'bg-blue-100 text-blue-700'\r\n                : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n            }`}\r\n          >\r\n            Location {sortField === 'location' && (sortDirection === 'asc' ? '↑' : '↓')}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Items List */}\r\n      {isLoading ? (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\" />\r\n          <p className=\"text-gray-600\">Loading inventory...</p>\r\n        </div>\r\n      ) : filteredAndSortedItems.length === 0 ? (\r\n        <Card>\r\n          <CardContent className=\"py-12 text-center\">\r\n            <Package className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n            <p className=\"text-lg font-semibold text-gray-900\">\r\n              {searchTerm ? 'No items found' : 'No inventory items'}\r\n            </p>\r\n            <p className=\"text-gray-600 mt-1\">\r\n              {searchTerm\r\n                ? 'Try adjusting your search terms'\r\n                : 'Inventory list is empty'}\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          {filteredAndSortedItems.map((item) => {\r\n            const isLowStock = item.minQty && item.quantity <= item.minQty;\r\n            \r\n            return (\r\n              <Card\r\n                key={item.id}\r\n                className={`hover:shadow-md transition-shadow ${\r\n                  isLowStock ? 'border-orange-300' : ''\r\n                }`}\r\n              >\r\n                <CardContent className=\"p-4\">\r\n                  <div className=\"flex items-start justify-between gap-3\">\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-center gap-2 mb-2\">\r\n                        <Package className={`w-5 h-5 flex-shrink-0 ${isLowStock ? 'text-orange-600' : 'text-blue-600'}`} />\r\n                        <h3 className=\"font-bold text-gray-900 truncate\">\r\n                          {item.equipmentName}\r\n                        </h3>\r\n                        {isLowStock && (\r\n                          <AlertTriangle className=\"w-4 h-4 text-orange-600 flex-shrink-0\" />\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <div className=\"space-y-1 text-sm\">\r\n                        <p className=\"text-gray-600\">\r\n                          <span className=\"font-semibold\">Type:</span> {item.equipmentType}\r\n                        </p>\r\n                        {item.location && (\r\n                          <p className=\"text-gray-600\">\r\n                            <span className=\"font-semibold\">Location:</span> {item.location} (Shelf {item.shelf}, Row {item.row})\r\n                          </p>\r\n                        )}\r\n                        {item.manufacturer && (\r\n                          <p className=\"text-gray-600\">\r\n                            <span className=\"font-semibold\">Mfg:</span> {item.manufacturer}\r\n                          </p>\r\n                        )}\r\n                        {item.description && (\r\n                          <p className=\"text-gray-500 text-xs mt-2 line-clamp-2\">\r\n                            {item.description}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex-shrink-0 text-right\">\r\n                      <div className={`text-3xl font-bold ${\r\n                        isLowStock ? 'text-orange-600' : 'text-blue-600'\r\n                      }`}>\r\n                        {item.quantity}\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-500 mt-1\">\r\n                        {item.minQty ? `Min: ${item.minQty}` : 'in stock'}\r\n                      </div>\r\n                      {isLowStock && (\r\n                        <div className=\"text-xs font-semibold text-orange-600 mt-1\">\r\n                          LOW STOCK\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Results Summary */}\r\n      {!isLoading && filteredAndSortedItems.length > 0 && (\r\n        <div className=\"text-center text-sm text-gray-600 py-2\">\r\n          Showing {filteredAndSortedItems.length} of {items.length} items\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};","import { useState, useEffect, useCallback } from 'react';\r\nimport { fetchTasks, updateTask } from '../lib/inventory';\r\nimport type { SupplyTask } from '../lib/inventory';\r\n\r\nexport function useSupplyTasks(status: 'pending' | 'completed' | 'canceled' = 'pending') {\r\n  const [tasks, setTasks] = useState<SupplyTask[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [count, setCount] = useState(0);\r\n\r\n  const loadTasks = useCallback(async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const data = await fetchTasks(status);\r\n      setTasks(data.tasks);\r\n      setCount(data.count);\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to load tasks';\r\n      setError(errorMessage);\r\n      console.error('Error loading tasks:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [status]);\r\n\r\n  const completeTask = useCallback(async (\r\n    taskId: string,\r\n    chosenReplacement?: { itemId: string; itemName: string; qty: number },\r\n    completedBy?: string,\r\n    notes?: string\r\n  ) => {\r\n    try {\r\n      await updateTask(taskId, {\r\n        status: 'completed',\r\n        chosenReplacement,\r\n        completedBy,\r\n        notes,\r\n      });\r\n      await loadTasks(); // Refresh list\r\n    } catch (err) {\r\n      throw err; // Let caller handle error\r\n    }\r\n  }, [loadTasks]);\r\n\r\n  const cancelTask = useCallback(async (taskId: string, notes?: string) => {\r\n    try {\r\n      await updateTask(taskId, {\r\n        status: 'canceled',\r\n        notes,\r\n      });\r\n      await loadTasks(); // Refresh list\r\n    } catch (err) {\r\n      throw err; // Let caller handle error\r\n    }\r\n  }, [loadTasks]);\r\n\r\n  useEffect(() => {\r\n    loadTasks();\r\n  }, [loadTasks]);\r\n\r\n  return {\r\n    tasks,\r\n    isLoading,\r\n    error,\r\n    count,\r\n    refresh: loadTasks,\r\n    completeTask,\r\n    cancelTask,\r\n  };\r\n}","import React, { useState } from 'react';\r\nimport { CheckCircle, XCircle, Clock, Package, AlertCircle } from 'lucide-react';\r\nimport { Button } from '../ui/Button';\r\nimport { Card, CardContent } from '../ui/Card';\r\nimport { useSupplyTasks } from '../../hooks/useSupplyTasks';\r\nimport { formatDateTime } from '../../lib/utils';\r\n\r\ntype TaskStatus = 'pending' | 'completed' | 'canceled';\r\n\r\nexport const TasksPanel: React.FC = () => {\r\n  const [activeStatus, setActiveStatus] = useState<TaskStatus>('pending');\r\n  const { tasks, isLoading, error, completeTask, cancelTask, refresh } = useSupplyTasks(activeStatus);\r\n  const [processingTaskId, setProcessingTaskId] = useState<string | null>(null);\r\n\r\n  const handleComplete = async (taskId: string, itemName: string) => {\r\n    if (!confirm(`Mark \"${itemName}\" task as completed?`)) return;\r\n\r\n    setProcessingTaskId(taskId);\r\n    try {\r\n      await completeTask(taskId, undefined, 'Admin', 'Completed from dashboard');\r\n      alert('Task marked as completed successfully');\r\n    } catch (err) {\r\n      alert(`Error: ${err instanceof Error ? err.message : 'Failed to complete task'}`);\r\n    } finally {\r\n      setProcessingTaskId(null);\r\n    }\r\n  };\r\n\r\n  const handleCancel = async (taskId: string, itemName: string) => {\r\n    const notes = prompt(`Cancel \"${itemName}\" task? Enter reason (optional):`);\r\n    if (notes === null) return; // User clicked cancel\r\n\r\n    setProcessingTaskId(taskId);\r\n    try {\r\n      await cancelTask(taskId, notes || 'Canceled from dashboard');\r\n      alert('Task canceled successfully');\r\n    } catch (err) {\r\n      alert(`Error: ${err instanceof Error ? err.message : 'Failed to cancel task'}`);\r\n    } finally {\r\n      setProcessingTaskId(null);\r\n    }\r\n  };\r\n\r\n if (error) {\r\n    return (\r\n      <Card className=\"border-red-300\">\r\n        <CardContent className=\"py-8 text-center\">\r\n          <AlertCircle className=\"w-12 h-12 text-red-500 mx-auto mb-4\" />\r\n          <p className=\"text-red-600 font-semibold mb-2\">Error Loading Tasks</p>\r\n          <p className=\"text-gray-600 text-sm mb-4\">{error}</p>\r\n          <Button onClick={refresh} variant=\"secondary\">\r\n            Try Again\r\n          </Button>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Status Tabs */}\r\n      <div className=\"flex gap-2 border-b border-gray-200 overflow-x-auto\">\r\n        <button\r\n          onClick={() => setActiveStatus('pending')}\r\n          className={`px-4 py-3 font-semibold transition-all flex items-center gap-2 whitespace-nowrap min-w-[120px] ${\r\n            activeStatus === 'pending'\r\n              ? 'text-blue-600 border-b-2 border-blue-600'\r\n              : 'text-gray-600 hover:text-gray-900'\r\n          }`}\r\n        >\r\n          <Clock className=\"w-5 h-5\" />\r\n          Pending\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveStatus('completed')}\r\n          className={`px-4 py-3 font-semibold transition-all flex items-center gap-2 whitespace-nowrap min-w-[120px] ${\r\n            activeStatus === 'completed'\r\n              ? 'text-blue-600 border-b-2 border-blue-600'\r\n              : 'text-gray-600 hover:text-gray-900'\r\n          }`}\r\n        >\r\n          <CheckCircle className=\"w-5 h-5\" />\r\n          Completed\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveStatus('canceled')}\r\n          className={`px-4 py-3 font-semibold transition-all flex items-center gap-2 whitespace-nowrap min-w-[120px] ${\r\n            activeStatus === 'canceled'\r\n              ? 'text-blue-600 border-b-2 border-blue-600'\r\n              : 'text-gray-600 hover:text-gray-900'\r\n          }`}\r\n        >\r\n          <XCircle className=\"w-5 h-5\" />\r\n          Canceled\r\n        </button>\r\n      </div>\r\n\r\n      {/* Tasks List */}\r\n      {isLoading ? (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\" />\r\n          <p className=\"text-gray-600\">Loading tasks...</p>\r\n        </div>\r\n      ) : tasks.length === 0 ? (\r\n        <Card>\r\n          <CardContent className=\"py-12 text-center\">\r\n            <Package className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n            <p className=\"text-lg font-semibold text-gray-900\">No {activeStatus} tasks</p>\r\n            <p className=\"text-gray-600 mt-1\">\r\n              {activeStatus === 'pending'\r\n                ? 'All supply tasks are up to date'\r\n                : `No tasks have been ${activeStatus}`}\r\n            </p>\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"space-y-3\">\r\n          {tasks.map((task) => (\r\n            <Card key={task.id} className=\"hover:shadow-md transition-shadow\">\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"space-y-3\">\r\n                  {/* Header */}\r\n                  <div className=\"flex items-start justify-between gap-3\">\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div className=\"flex items-center gap-2 mb-2\">\r\n                        <span className=\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold\">\r\n                          {task.apparatus}\r\n                        </span>\r\n                        <span className={`px-3 py-1 rounded-full text-sm font-semibold ${\r\n                          task.deficiencyType === 'missing'\r\n                            ? 'bg-red-100 text-red-800'\r\n                            : 'bg-yellow-100 text-yellow-800'\r\n                        }`}>\r\n                          {task.deficiencyType === 'missing' ? '❌ Missing' : '⚠️ Damaged'}\r\n                        </span>\r\n                      </div>\r\n                      <h3 className=\"font-bold text-gray-900 text-lg\">\r\n                        {task.itemName}\r\n                      </h3>\r\n                      {task.compartment && (\r\n                        <p className=\"text-sm text-gray-600\">\r\n                          Compartment: {task.compartment}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                    {activeStatus === 'pending' && (\r\n                      <div className=\"flex-shrink-0\">\r\n                        <Clock className=\"w-6 h-6 text-orange-600\" />\r\n                      </div>\r\n                    )}\r\n                    {activeStatus === 'completed' && (\r\n                      <div className=\"flex-shrink-0\">\r\n                        <CheckCircle className=\"w-6 h-6 text-green-600\" />\r\n                      </div>\r\n                    )}\r\n                    {activeStatus === 'canceled' && (\r\n                      <div className=\"flex-shrink-0\">\r\n                        <XCircle className=\"w-6 h-6 text-gray-600\" />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Details */}\r\n                  <div className=\"text-sm space-y-1\">\r\n                    <p className=\"text-gray-600\">\r\n                      <span className=\"font-semibold\">Created by:</span> {task.createdBy}\r\n                    </p>\r\n                    <p className=\"text-gray-600\">\r\n                      <span className=\"font-semibold\">Created:</span> {formatDateTime(task.createdAt)}\r\n                    </p>\r\n                    {task.completedBy && task.completedAt && (\r\n                      <>\r\n                        <p className=\"text-gray-600\">\r\n                          <span className=\"font-semibold\">Completed by:</span> {task.completedBy}\r\n                        </p>\r\n                        <p className=\"text-gray-600\">\r\n                          <span className=\"font-semibold\">Completed:</span> {formatDateTime(task.completedAt)}\r\n                        </p>\r\n                      </>\r\n                    )}\r\n                    {task.notes && (\r\n                      <p className=\"text-gray-700 bg-gray-50 p-2 rounded mt-2\">\r\n                        <span className=\"font-semibold\">Notes:</span> {task.notes}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Actions for Pending Tasks */}\r\n                  {activeStatus === 'pending' && (\r\n                    <div className=\"flex gap-2 pt-2\">\r\n                      <Button\r\n                        onClick={() => handleComplete(task.id, task.itemName)}\r\n                        variant=\"primary\"\r\n                        size=\"sm\"\r\n                        className=\"flex-1 min-h-[44px]\"\r\n                        disabled={processingTaskId === task.id}\r\n                      >\r\n                        {processingTaskId === task.id ? (\r\n                          <>\r\n                            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\r\n                            Processing...\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <CheckCircle className=\"w-4 h-4 mr-2\" />\r\n                            Mark Complete\r\n                          </>\r\n                        )}\r\n                      </Button>\r\n                      <Button\r\n                        onClick={() => handleCancel(task.id, task.itemName)}\r\n                        variant=\"secondary\"\r\n                        size=\"sm\"\r\n                        className=\"flex-1 min-h-[44px] bg-red-50 hover:bg-red-100 text-red-700\"\r\n                        disabled={processingTaskId === task.id}\r\n                      >\r\n                        <XCircle className=\"w-4 h-4 mr-2\" />\r\n                        Cancel\r\n                      </Button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Results Summary */}\r\n      {!isLoading && tasks.length > 0 && (\r\n        <div className=\"text-center text-sm text-gray-600 py-2\">\r\n          {tasks.length} {activeStatus} task{tasks.length !== 1 ? 's' : ''}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};","import { useState, useEffect, useCallback } from 'react';\r\nimport { fetchInventory } from '../lib/inventory';\r\nimport type { InventoryItem } from '../lib/inventory';\r\n\r\nexport function useInventory() {\r\n  const [items, setItems] = useState<InventoryItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [lastFetchedAt, setLastFetchedAt] = useState<string | null>(null);\r\n\r\n  const loadInventory = useCallback(async () => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      const data = await fetchInventory();\r\n      setItems(data.items);\r\n      setLastFetchedAt(data.fetchedAt);\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to load inventory';\r\n      setError(errorMessage);\r\n      console.error('Error loading inventory:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadInventory();\r\n  }, [loadInventory]);\r\n\r\n  return {\r\n    items,\r\n    isLoading,\r\n    error,\r\n    lastFetchedAt,\r\n    refresh: loadInventory,\r\n  };\r\n}","import React from 'react';\r\nimport { Lightbulb, Package, AlertCircle, CheckCircle } from 'lucide-react';\r\nimport { Card, CardContent } from '../ui/Card';\r\nimport { useSupplyTasks } from '../../hooks/useSupplyTasks';\r\nimport { useInventory } from '../../hooks/useInventory';\r\nimport type { SuggestedReplacement } from '../../lib/inventory';\r\n\r\nexport const SuggestionsPanel: React.FC = () => {\r\n  const { tasks, isLoading: tasksLoading } = useSupplyTasks('pending');\r\n  const { items, isLoading: inventoryLoading } = useInventory();\r\n\r\n  const isLoading = tasksLoading || inventoryLoading;\r\n\r\n  // Match tasks with inventory using fuzzy matching\r\n  const tasksWithSuggestions = React.useMemo(() => {\r\n    return tasks.map((task) => {\r\n      const suggestions: Array<SuggestedReplacement & { inStock: boolean }> = [];\r\n\r\n      // If task already has suggested replacements, use those\r\n      if (task.suggestedReplacements && task.suggestedReplacements.length > 0) {\r\n        return {\r\n          task,\r\n          suggestions: task.suggestedReplacements.map(s => ({\r\n            ...s,\r\n            inStock: s.qtyOnHand > 0,\r\n          })),\r\n        };\r\n      }\r\n\r\n      // Otherwise, do simple fuzzy matching\r\n      const searchTerm = task.itemName.toLowerCase();\r\n      \r\n      items.forEach((item) => {\r\n        const itemName = item.equipmentName.toLowerCase();\r\n        const itemType = item.equipmentType.toLowerCase();\r\n        \r\n        // Score based on name similarity\r\n        let confidence = 0;\r\n        if (itemName.includes(searchTerm) || searchTerm.includes(itemName)) {\r\n          confidence = 0.8;\r\n        } else if (itemType.includes(searchTerm) || searchTerm.includes(itemType)) {\r\n          confidence = 0.6;\r\n        }\r\n\r\n        if (confidence > 0) {\r\n          suggestions.push({\r\n            itemId: item.id,\r\n            itemName: item.equipmentName,\r\n            qtyOnHand: item.quantity,\r\n            location: item.location,\r\n            confidence,\r\n            inStock: item.quantity > 0,\r\n          });\r\n        }\r\n      });\r\n\r\n      // Sort by confidence and stock availability\r\n      suggestions.sort((a, b) => {\r\n        if (a.inStock && !b.inStock) return -1;\r\n        if (!a.inStock && b.inStock) return 1;\r\n        return (b.confidence || 0) - (a.confidence || 0);\r\n      });\r\n\r\n      return { task, suggestions: suggestions.slice(0, 3) }; // Top 3 suggestions\r\n    });\r\n  }, [tasks, items]);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\" />\r\n        <p className=\"text-gray-600\">Loading suggestions...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (tasks.length === 0) {\r\n    return (\r\n      <Card>\r\n        <CardContent className=\"py-12 text-center\">\r\n          <Lightbulb className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n          <p className=\"text-lg font-semibold text-gray-900\">No Pending Tasks</p>\r\n          <p className=\"text-gray-600 mt-1\">\r\n            Suggestions will appear when there are pending supply tasks\r\n          </p>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"bg-blue-50 border-l-4 border-blue-500 p-4 rounded\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <Lightbulb className=\"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5\" />\r\n          <div>\r\n            <p className=\"text-sm text-blue-900 font-semibold\">Inventory Suggestions</p>\r\n            <p className=\"text-sm text-blue-800 mt-1\">\r\n              Suggested replacements from inventory for pending tasks. Match confidence and stock availability shown.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {tasksWithSuggestions.map(({ task, suggestions }) => (\r\n        <Card key={task.id} className=\"hover:shadow-md transition-shadow\">\r\n          <CardContent className=\"p-4\">\r\n            <div className=\"space-y-3\">\r\n              {/* Task Info */}\r\n              <div>\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <span className=\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold\">\r\n                    {task.apparatus}\r\n                  </span>\r\n                  <span className={`px-3 py-1 rounded-full text-sm font-semibold ${\r\n                    task.deficiencyType === 'missing'\r\n                      ? 'bg-red-100 text-red-800'\r\n                      : 'bg-yellow-100 text-yellow-800'\r\n                  }`}>\r\n                    {task.deficiencyType === 'missing' ? 'Missing' : 'Damaged'}\r\n                  </span>\r\n                </div>\r\n                <h3 className=\"font-bold text-gray-900\">\r\n                  {task.itemName}\r\n                </h3>\r\n                {task.compartment && (\r\n                  <p className=\"text-sm text-gray-600\">Compartment: {task.compartment}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Suggestions */}\r\n              {suggestions.length === 0 ? (\r\n                <div className=\"bg-gray-50 p-3 rounded-lg text-center\">\r\n                  <AlertCircle className=\"w-6 h-6 text-gray-400 mx-auto mb-2\" />\r\n                  <p className=\"text-sm text-gray-600\">No matching items found in inventory</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-2\">\r\n                  <p className=\"text-sm font-semibold text-gray-700\">Suggested Replacements:</p>\r\n                  {suggestions.map((suggestion, idx) => (\r\n                    <div\r\n                      key={`${suggestion.itemId}-${idx}`}\r\n                      className={`p-3 rounded-lg border-2 ${\r\n                        suggestion.inStock\r\n                          ? 'bg-green-50 border-green-300'\r\n                          : 'bg-gray-50 border-gray-300'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-start justify-between gap-3\">\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex items-center gap-2 mb-1\">\r\n                            <Package className={`w-4 h-4 ${suggestion.inStock ? 'text-green-600' : 'text-gray-400'}`} />\r\n                            <h4 className=\"font-semibold text-gray-900 text-sm\">\r\n                              {suggestion.itemName}\r\n                            </h4>\r\n                          </div>\r\n                          {suggestion.location && (\r\n                            <p className=\"text-xs text-gray-600\">\r\n                              Location: {suggestion.location}\r\n                            </p>\r\n                          )}\r\n                          {suggestion.confidence && (\r\n                            <p className=\"text-xs text-gray-500 mt-1\">\r\n                              Match: {Math.round(suggestion.confidence * 100)}%\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex-shrink-0 text-right\">\r\n                          <div className={`text-2xl font-bold ${\r\n                            suggestion.inStock ? 'text-green-600' : 'text-gray-400'\r\n                          }`}>\r\n                            {suggestion.qtyOnHand}\r\n                          </div>\r\n                          <div className={`text-xs font-semibold ${\r\n                            suggestion.inStock ? 'text-green-600' : 'text-gray-500'\r\n                          }`}>\r\n                            {suggestion.inStock ? (\r\n                              <span className=\"flex items-center gap-1\">\r\n                                <CheckCircle className=\"w-3 h-3\" />\r\n                                IN STOCK\r\n                              </span>\r\n                            ) : (\r\n                              'OUT OF STOCK'\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n\r\n              {/* Note about completing with replacement */}\r\n              {suggestions.some(s => s.inStock) && (\r\n                <div className=\"bg-blue-50 p-3 rounded-lg\">\r\n                  <p className=\"text-xs text-blue-900\">\r\n                    💡 <strong>Tip:</strong> When marking this task as complete in the Tasks tab, \r\n                    you can select one of these items as the replacement to automatically update inventory.\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      ))}\r\n\r\n      {/* Summary */}\r\n      <div className=\"text-center text-sm text-gray-600 py-2\">\r\n        {tasksWithSuggestions.length} task{tasksWithSuggestions.length !== 1 ? 's' : ''} with suggestions\r\n      </div>\r\n    </div>\r\n  );\r\n};","import { useState, useEffect } from 'react';\r\nimport { Button } from '../ui/Button';\r\nimport type { InventoryItem, SupplyTask, AIInsight, AIInsightData } from '../../lib/inventory';\r\nimport { generateAIInsights, fetchAIInsights } from '../../lib/inventory';\r\n\r\ninterface AIInsightsPanelProps {\r\n  inventory: InventoryItem[];\r\n  tasks: SupplyTask[];\r\n}\r\n\r\nexport function AIInsightsPanel({ inventory, tasks }: AIInsightsPanelProps) {\r\n  const [isGenerating, setIsGenerating] = useState(false);\r\n  const [insights, setInsights] = useState<AIInsight[]>([]);\r\n  const [isLoadingInsights, setIsLoadingInsights] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [aiNotConfigured, setAiNotConfigured] = useState(false);\r\n\r\n  // Load latest insights on mount\r\n  useEffect(() => {\r\n    loadInsights();\r\n  }, []);\r\n\r\n  async function loadInsights() {\r\n    setIsLoadingInsights(true);\r\n    setError(null);\r\n    try {\r\n      const result = await fetchAIInsights();\r\n      setInsights(result.insights);\r\n    } catch (err) {\r\n      console.error('Failed to load insights:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to load insights');\r\n    } finally {\r\n      setIsLoadingInsights(false);\r\n    }\r\n  }\r\n\r\n  async function handleGenerateInsights() {\r\n    setIsGenerating(true);\r\n    setError(null);\r\n    setAiNotConfigured(false);\r\n    \r\n    try {\r\n      const result = await generateAIInsights({\r\n        tasks: tasks.filter(t => t.status === 'pending'),\r\n        inventory,\r\n      });\r\n      \r\n      if (!result.ok) {\r\n        setAiNotConfigured(true);\r\n        setError(result.message);\r\n      } else {\r\n        // Wait a moment then reload insights\r\n        setTimeout(() => {\r\n          loadInsights();\r\n        }, 2000);\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to generate insights:', err);\r\n      setError(err instanceof Error ? err.message : 'Failed to generate insights');\r\n    } finally {\r\n      setIsGenerating(false);\r\n    }\r\n  }\r\n\r\n  function parseInsightData(insightJson: string): AIInsightData | null {\r\n    try {\r\n      return JSON.parse(insightJson) as AIInsightData;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  const latestInsight = insights.length > 0 ? insights[0] : null;\r\n  const parsedInsight = latestInsight ? parseInsightData(latestInsight.insight_json) : null;\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between gap-3 flex-wrap\">\r\n        <div>\r\n          <h2 className=\"text-xl font-bold text-gray-900\">AI Insights</h2>\r\n          <p className=\"text-sm text-gray-600 mt-1\">\r\n            Automated inventory analysis and recommendations\r\n          </p>\r\n        </div>\r\n        <Button\r\n          onClick={handleGenerateInsights}\r\n          disabled={isGenerating || inventory.length === 0}\r\n          className=\"min-h-[44px] whitespace-nowrap\"\r\n        >\r\n          {isGenerating ? (\r\n            <>\r\n              <span className=\"animate-spin mr-2\">⚙️</span>\r\n              Generating...\r\n            </>\r\n          ) : (\r\n            '🤖 Generate Insights'\r\n          )}\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Error/Warning Messages */}\r\n      {error && (\r\n        <div\r\n          className={`p-4 rounded-lg ${\r\n            aiNotConfigured\r\n              ? 'bg-yellow-50 border border-yellow-200'\r\n              : 'bg-red-50 border border-red-200'\r\n          }`}\r\n        >\r\n          <p\r\n            className={`text-sm ${\r\n              aiNotConfigured ? 'text-yellow-800' : 'text-red-800'\r\n            }`}\r\n          >\r\n            {aiNotConfigured ? (\r\n              <>\r\n                <strong>⚠️ AI Not Configured:</strong> {error}\r\n                <br />\r\n                <span className=\"text-xs mt-1 block\">\r\n                  This is an optional feature. The system works fully without it.\r\n                </span>\r\n              </>\r\n            ) : (\r\n              <><strong>Error:</strong> {error}</>\r\n            )}\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Loading State */}\r\n      {isLoadingInsights && (\r\n        <div className=\"text-center py-8\">\r\n          <div className=\"inline-block animate-spin text-4xl\">⚙️</div>\r\n          <p className=\"text-gray-600 mt-2\">Loading insights...</p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Latest Insight Display */}\r\n      {!isLoadingInsights && latestInsight && parsedInsight && (\r\n        <div className=\"space-y-4\">\r\n          {/* Timestamp */}\r\n          <div className=\"text-sm text-gray-500\">\r\n            Generated: {new Date(latestInsight.created_at).toLocaleString()}\r\n            {latestInsight.model && (\r\n              <span className=\"ml-2\">• Model: {latestInsight.model.split('/').pop()}</span>\r\n            )}\r\n          </div>\r\n\r\n          {/* Summary */}\r\n          {parsedInsight.summary && (\r\n            <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n              <h3 className=\"font-semibold text-blue-900 mb-2\">📊 Summary</h3>\r\n              <p className=\"text-blue-800 text-sm\">{parsedInsight.summary}</p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Recurring Issues */}\r\n          {parsedInsight.recurringIssues && parsedInsight.recurringIssues.length > 0 && (\r\n            <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\r\n              <h3 className=\"font-semibold text-orange-900 mb-2\">🔄 Recurring Issues</h3>\r\n              <ul className=\"space-y-1\">\r\n                {parsedInsight.recurringIssues.map((issue, idx) => (\r\n                  <li key={idx} className=\"text-orange-800 text-sm\">\r\n                    • {issue}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n\r\n          {/* Reorder Suggestions */}\r\n          {parsedInsight.reorderSuggestions && parsedInsight.reorderSuggestions.length > 0 && (\r\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n              <h3 className=\"font-semibold text-green-900 mb-2\">📦 Reorder Suggestions</h3>\r\n              <div className=\"space-y-3\">\r\n                {parsedInsight.reorderSuggestions.map((suggestion, idx) => (\r\n                  <div key={idx} className=\"bg-white rounded p-3 border border-green-100\">\r\n                    <div className=\"flex items-start justify-between gap-2\">\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"font-medium text-green-900 text-sm\">{suggestion.item}</p>\r\n                        <p className=\"text-green-700 text-xs mt-1\">{suggestion.reason}</p>\r\n                      </div>\r\n                      <span\r\n                        className={`px-2 py-1 rounded text-xs font-medium whitespace-nowrap ${\r\n                          suggestion.urgency?.toLowerCase() === 'high'\r\n                            ? 'bg-red-100 text-red-800'\r\n                            : suggestion.urgency?.toLowerCase() === 'medium'\r\n                            ? 'bg-yellow-100 text-yellow-800'\r\n                            : 'bg-gray-100 text-gray-800'\r\n                        }`}\r\n                      >\r\n                        {suggestion.urgency || 'Normal'}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Anomalies */}\r\n          {parsedInsight.anomalies && parsedInsight.anomalies.length > 0 && (\r\n            <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\r\n              <h3 className=\"font-semibold text-purple-900 mb-2\">🔍 Anomalies Detected</h3>\r\n              <ul className=\"space-y-1\">\r\n                {parsedInsight.anomalies.map((anomaly, idx) => (\r\n                  <li key={idx} className=\"text-purple-800 text-sm\">\r\n                    • {anomaly}\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Empty State */}\r\n      {!isLoadingInsights && insights.length === 0 && !error && (\r\n        <div className=\"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300\">\r\n          <div className=\"text-6xl mb-4\">🤖</div>\r\n          <p className=\"text-gray-600 font-medium\">No insights generated yet</p>\r\n          <p className=\"text-gray-500 text-sm mt-2\">\r\n            Click \"Generate Insights\" to analyze your inventory\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Insight History Count */}\r\n      {insights.length > 1 && (\r\n        <div className=\"text-xs text-gray-500 text-center pt-2 border-t border-gray-200\">\r\n          {insights.length} insights stored • Showing most recent\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}","import React, { useState } from 'react';\r\nimport { Package, ClipboardList, Lightbulb, Brain } from 'lucide-react';\r\nimport { SupplyListPanel } from './SupplyListPanel';\r\nimport { TasksPanel } from './TasksPanel';\r\nimport { SuggestionsPanel } from './SuggestionsPanel';\r\nimport { AIInsightsPanel } from './AIInsightsPanel';\r\nimport { useInventory } from '../../hooks/useInventory';\r\nimport { useSupplyTasks } from '../../hooks/useSupplyTasks';\r\n\r\ntype InventorySubTab = 'list' | 'tasks' | 'suggestions' | 'ai-insights';\r\n\r\nexport const InventoryTab: React.FC = () => {\r\n  const [activeSubTab, setActiveSubTab] = useState<InventorySubTab>('list');\r\n  const { items, isLoading, error, refresh, lastFetchedAt } = useInventory();\r\n  const { tasks } = useSupplyTasks();\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header with last updated info */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900\">Inventory Management</h2>\r\n          <p className=\"text-sm text-gray-600 mt-1\">\r\n            Manage supply inventory, tasks, and suggested replacements\r\n          </p>\r\n        </div>\r\n        {lastFetchedAt && !isLoading && (\r\n          <div className=\"text-sm text-gray-500\">\r\n            Last updated: {new Date(lastFetchedAt).toLocaleString()}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Sub-tabs */}\r\n      <div className=\"flex gap-2 border-b border-gray-200 overflow-x-auto\">\r\n        <button\r\n          onClick={() => setActiveSubTab('list')}\r\n          className={`px-6 py-3 font-semibold transition-all flex items-center gap-2 whitespace-nowrap ${\r\n            activeSubTab === 'list'\r\n              ? 'text-blue-600 border-b-2 border-blue-600'\r\n              : 'text-gray-600 hover:text-gray-900'\r\n          }`}\r\n        >\r\n          <Package className=\"w-5 h-5\" />\r\n          Inventory List\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveSubTab('tasks')}\r\n          className={`px-6 py-3 font-semibold transition-all flex items-center gap-2 whitespace-nowrap ${\r\n            activeSubTab === 'tasks'\r\n              ? 'text-blue-600 border-b-2 border-blue-600'\r\n              : 'text-gray-600 hover:text-gray-900'\r\n          }`}\r\n        >\r\n          <ClipboardList className=\"w-5 h-5\" />\r\n          Supply Tasks\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveSubTab('suggestions')}\r\n          className={`px-6 py-3 font-semibold transition-all flex items-center gap-2 whitespace-nowrap ${\r\n            activeSubTab === 'suggestions'\r\n              ? 'text-blue-600 border-b-2 border-blue-600'\r\n              : 'text-gray-600 hover:text-gray-900'\r\n          }`}\r\n        >\r\n          <Lightbulb className=\"w-5 h-5\" />\r\n          Suggestions\r\n        </button>\r\n        <button\r\n          onClick={() => setActiveSubTab('ai-insights')}\r\n          className={`px-6 py-3 font-semibold transition-all flex items-center gap-2 whitespace-nowrap ${\r\n            activeSubTab === 'ai-insights'\r\n              ? 'text-blue-600 border-b-2 border-blue-600'\r\n              : 'text-gray-600 hover:text-gray-900'\r\n          }`}\r\n        >\r\n          <Brain className=\"w-5 h-5\" />\r\n          AI Insights\r\n        </button>\r\n      </div>\r\n\r\n      {/* Panel Content */}\r\n      <div className=\"mt-6\">\r\n        {activeSubTab === 'list' && (\r\n          <SupplyListPanel\r\n            items={items}\r\n            isLoading={isLoading}\r\n            error={error}\r\n            onRefresh={refresh}\r\n          />\r\n        )}\r\n        {activeSubTab === 'tasks' && (\r\n          <TasksPanel />\r\n        )}\r\n        {activeSubTab === 'suggestions' && (\r\n          <SuggestionsPanel />\r\n        )}\r\n        {activeSubTab === 'ai-insights' && (\r\n          <AIInsightsPanel inventory={items} tasks={tasks} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Truck, AlertCircle, CheckCircle, ArrowLeft, Lock, Calendar, TrendingUp, AlertTriangle, Package, Mail, Brain, Warehouse } from 'lucide-react';\r\nimport { Button } from './ui/Button';\r\nimport { Card, CardContent } from './ui/Card';\r\nimport { Modal } from './ui/Modal';\r\nimport { AIFleetInsights } from './AIFleetInsights';\r\nimport { InventoryTab } from './inventory/InventoryTab';\r\nimport { githubService } from '../lib/github';\r\nimport { formatDateTime } from '../lib/utils';\r\nimport { APPARATUS_LIST } from '../lib/config';\r\nimport type { Defect, EmailConfig } from '../types';\r\n\r\ntype TabType = 'fleet' | 'activity' | 'supplies' | 'inventory' | 'notifications' | 'insights';\r\n\r\ninterface DailySubmissions {\r\n  today: string[];\r\n  totals: Map<string, number>;\r\n  lastSubmission: Map<string, string>;\r\n}\r\n\r\ninterface LowStockItem {\r\n  item: string;\r\n  compartment: string;\r\n  apparatus: string[];\r\n  occurrences: number;\r\n}\r\n\r\nexport const AdminDashboard: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [passwordInput, setPasswordInput] = useState('');\r\n  const [passwordError, setPasswordError] = useState('');\r\n  const [activeTab, setActiveTab] = useState<TabType>('fleet');\r\n  const [fleetStatus, setFleetStatus] = useState<Map<string, number>>(new Map());\r\n  const [defects, setDefects] = useState<Defect[]>([]);\r\n  const [dailySubmissions, setDailySubmissions] = useState<DailySubmissions | null>(null);\r\n  const [lowStockItems, setLowStockItems] = useState<LowStockItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [selectedDefect, setSelectedDefect] = useState<Defect | null>(null);\r\n  const [resolutionNote, setResolutionNote] = useState('');\r\n  const [isResolving, setIsResolving] = useState(false);\r\n  const [showResolveSuccess, setShowResolveSuccess] = useState(false);\r\n\r\n  // Email notification state\r\n  const [emailConfig, setEmailConfig] = useState<EmailConfig | null>(null);\r\n  const [isLoadingConfig, setIsLoadingConfig] = useState(false);\r\n  const [isSavingConfig, setIsSavingConfig] = useState(false);\r\n  const [configError, setConfigError] = useState<string | null>(null);\r\n\r\n  // AI Insights state\r\n  const [criticalAlertsCount, setCriticalAlertsCount] = useState(0);\r\n\r\n  // Vehicle inspection history state\r\n  const [selectedApparatus, setSelectedApparatus] = useState<string | null>(null);\r\n  const [apparatusLogs, setApparatusLogs] = useState<any[]>([]);\r\n  const [isLoadingLogs, setIsLoadingLogs] = useState(false);\r\n\r\n  const loadApparatusLogs = async (apparatus: string) => {\r\n    setIsLoadingLogs(true);\r\n    try {\r\n      const logs = await githubService.getInspectionLogs(30); // Last 30 days\r\n      // Filter logs for this apparatus\r\n      const filteredLogs = logs.filter(log => log.title.includes(`[${apparatus}]`));\r\n      setApparatusLogs(filteredLogs);\r\n      setSelectedApparatus(apparatus);\r\n    } catch (error) {\r\n      console.error('Error loading apparatus logs:', error);\r\n      alert('Failed to load inspection history');\r\n    } finally {\r\n      setIsLoadingLogs(false);\r\n    }\r\n  };\r\n\r\n  const handlePasswordSubmit = async () => {\r\n    if (!passwordInput.trim()) {\r\n      setPasswordError('Please enter a password');\r\n      return;\r\n    }\r\n\r\n    // Set the password and try to load data\r\n    githubService.setAdminPassword(passwordInput);\r\n    // Also store in localStorage for inventory API calls\r\n    localStorage.setItem('adminPassword', passwordInput);\r\n    \r\n    try {\r\n      await loadDashboardData();\r\n      setIsAuthenticated(true);\r\n      setPasswordError('');\r\n    } catch (err) {\r\n      console.error('Authentication failed:', err);\r\n      if (err instanceof Error && err.message.includes('Unauthorized')) {\r\n        setPasswordError('Incorrect password. Please try again.');\r\n      } else if (err instanceof Error && err.message.includes('Failed to fetch')) {\r\n        setPasswordError('Network error. Please check your connection and try again.');\r\n      } else {\r\n        setPasswordError('Authentication failed. Please try again.');\r\n      }\r\n      githubService.clearAdminPassword();\r\n      localStorage.removeItem('adminPassword');\r\n    }\r\n  };\r\n\r\n  const loadDashboardData = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      \r\n      // Fetch all defects\r\n      const allDefects = await githubService.getAllDefects();\r\n      \r\n      // Compute fleet status from defects\r\n      const status = githubService.computeFleetStatus(allDefects);\r\n      \r\n      setFleetStatus(status);\r\n      setDefects(allDefects);\r\n      \r\n      // Fetch daily submissions and low stock items\r\n      try {\r\n        const submissions = await githubService.getDailySubmissions();\r\n        setDailySubmissions(submissions);\r\n      } catch (err) {\r\n        console.error('Error fetching daily submissions:', err);\r\n      }\r\n      \r\n      try {\r\n        const lowStock = await githubService.analyzeLowStockItems();\r\n        setLowStockItems(lowStock);\r\n      } catch (err) {\r\n        console.error('Error analyzing low stock:', err);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading dashboard data:', error);\r\n      if (error instanceof Error && error.message.includes('Unauthorized')) {\r\n        setIsAuthenticated(false);\r\n        githubService.clearAdminPassword();\r\n        localStorage.removeItem('adminPassword');\r\n      }\r\n      throw error;\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleResolve = async () => {\r\n    if (!selectedDefect || !resolutionNote.trim()) {\r\n      alert('Please enter resolution notes');\r\n      return;\r\n    }\r\n\r\n    if (!selectedDefect.issueNumber) {\r\n      alert('Unable to resolve: Issue number not found');\r\n      return;\r\n    }\r\n\r\n    setIsResolving(true);\r\n    try {\r\n      await githubService.resolveDefect(\r\n        selectedDefect.issueNumber!,\r\n        resolutionNote,\r\n        'Admin'\r\n      );\r\n      \r\n      // Refresh data\r\n      await loadDashboardData();\r\n      \r\n      setSelectedDefect(null);\r\n      setResolutionNote('');\r\n      \r\n      // Show success toast\r\n      setShowResolveSuccess(true);\r\n      setTimeout(() => setShowResolveSuccess(false), 3000);\r\n    } catch (error) {\r\n      console.error('Error resolving defect:', error);\r\n      if ((error as Error).message.includes('Unauthorized')) {\r\n        alert('Session expired. Please re-enter the admin password.');\r\n        setIsAuthenticated(false);\r\n        githubService.clearAdminPassword();\r\n      } else {\r\n        alert('Error resolving defect. Please try again.');\r\n      }\r\n    } finally {\r\n      setIsResolving(false);\r\n    }\r\n  };\r\n\r\n  const loadEmailConfig = async () => {\r\n    if (!passwordInput) return;\r\n    \r\n    setIsLoadingConfig(true);\r\n    setConfigError(null);\r\n    \r\n    try {\r\n      const config = await githubService.getEmailConfig(passwordInput);\r\n      setEmailConfig(config);\r\n    } catch (error) {\r\n      setConfigError((error as Error).message || 'Failed to load email configuration');\r\n    } finally {\r\n      setIsLoadingConfig(false);\r\n    }\r\n  };\r\n\r\n  const saveEmailConfig = async (updates: Partial<EmailConfig>) => {\r\n    if (!passwordInput || !emailConfig) return;\r\n    \r\n    setIsSavingConfig(true);\r\n    setConfigError(null);\r\n    \r\n    try {\r\n      const result = await githubService.updateEmailConfig(passwordInput, updates);\r\n      setEmailConfig(result.config);\r\n      alert('Email configuration updated successfully');\r\n    } catch (error) {\r\n      setConfigError((error as Error).message || 'Failed to update email configuration');\r\n    } finally {\r\n      setIsSavingConfig(false);\r\n    }\r\n  };\r\n\r\n  const sendTestDigest = async () => {\r\n    if (!passwordInput) return;\r\n    \r\n    if (!confirm('Send a test daily digest email now?')) return;\r\n    \r\n    try {\r\n      await githubService.sendManualDigest(passwordInput);\r\n      alert('Test digest sent successfully! Check your email.');\r\n    } catch (error) {\r\n      alert('Failed to send test digest: ' + ((error as Error).message || 'Unknown error'));\r\n    }\r\n  };\r\n\r\n  // Auto-refresh data every 2 minutes when authenticated\r\n  useEffect(() => {\r\n    if (!isAuthenticated) return;\r\n    \r\n    const interval = setInterval(() => {\r\n      loadDashboardData().catch(console.error);\r\n    }, 120000); // 2 minutes\r\n    \r\n    return () => clearInterval(interval);\r\n  }, [isAuthenticated]);\r\n\r\n  // Show password prompt if not authenticated\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 flex items-center justify-center p-4\">\r\n        <Card className=\"max-w-md w-full\">\r\n          <CardContent className=\"py-8\">\r\n            <div className=\"text-center mb-8\">\r\n              <div className=\"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-2xl mb-4\">\r\n                <Lock className=\"w-8 h-8 text-white\" />\r\n              </div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n                Admin Access Required\r\n              </h1>\r\n              <p className=\"text-gray-600\">Enter the admin password to continue</p>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label htmlFor=\"password\" className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                  Password\r\n                </label>\r\n                <input\r\n                  id=\"password\"\r\n                  type=\"password\"\r\n                  value={passwordInput}\r\n                  onChange={(e) => {\r\n                    setPasswordInput(e.target.value);\r\n                    setPasswordError('');\r\n                  }}\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === 'Enter') {\r\n                      handlePasswordSubmit();\r\n                    }\r\n                  }}\r\n                  placeholder=\"Enter admin password\"\r\n                  className=\"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all\"\r\n                  autoFocus\r\n                />\r\n                {passwordError && (\r\n                  <p className=\"text-red-600 text-sm mt-2\">{passwordError}</p>\r\n                )}\r\n              </div>\r\n\r\n              <Button\r\n                onClick={handlePasswordSubmit}\r\n                className=\"w-full\"\r\n                size=\"lg\"\r\n              >\r\n                Access Admin Dashboard\r\n              </Button>\r\n\r\n              <div className=\"text-center mt-4\">\r\n                <button\r\n                  onClick={() => navigate('/')}\r\n                  className=\"text-sm text-gray-600 hover:text-gray-900 font-medium\"\r\n                >\r\n                  ← Back to Login\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\" />\r\n          <p className=\"text-gray-600\">Loading dashboard...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const apparatusList: string[] = APPARATUS_LIST;\r\n  const today = new Date().toLocaleDateString('en-US');\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Success Toast */}\r\n      {showResolveSuccess && (\r\n        <div className=\"fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center gap-2\">\r\n          <CheckCircle className=\"w-5 h-5\" />\r\n          <span className=\"font-semibold\">Defect resolved successfully!</span>\r\n        </div>\r\n      )}\r\n\r\n      {/* Header */}\r\n      <div className=\"bg-white border-b border-gray-200\">\r\n        <div className=\"max-w-7xl mx-auto px-4 py-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-900\">Admin Dashboard</h1>\r\n              <p className=\"text-gray-600 mt-1\">MBFD Fleet Management System</p>\r\n            </div>\r\n            <Button\r\n              onClick={() => navigate('/')}\r\n              variant=\"secondary\"\r\n              className=\"flex items-center gap-2\"\r\n            >\r\n              <ArrowLeft className=\"w-5 h-5\" />\r\n              Back to Login\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Tabs */}\r\n          <div className=\"flex gap-2 border-b border-gray-200\">\r\n            <button\r\n              onClick={() => setActiveTab('fleet')}\r\n              className={`px-6 py-3 font-semibold transition-all flex items-center gap-2 ${activeTab === 'fleet'\r\n                ? 'text-blue-600 border-b-2 border-blue-600'\r\n                : 'text-gray-600 hover:text-gray-900'}`}\r\n            >\r\n              <Truck className=\"w-5 h-5\" />\r\n              Fleet Status\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('activity')}\r\n              className={`px-6 py-3 font-semibold transition-all flex items-center gap-2 ${activeTab === 'activity'\r\n                ? 'text-blue-600 border-b-2 border-blue-600'\r\n                : 'text-gray-600 hover:text-gray-900'}`}\r\n            >\r\n              <Calendar className=\"w-5 h-5\" />\r\n              Daily Activity\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('supplies')}\r\n              className={`px-6 py-3 font-semibold transition-all flex items-center gap-2 ${activeTab === 'supplies'\r\n                ? 'text-blue-600 border-b-2 border-blue-600'\r\n                : 'text-gray-600 hover:text-gray-900'}`}\r\n            >\r\n              <Package className=\"w-5 h-5\" />\r\n              Supply Alerts\r\n              {lowStockItems.length > 0 && (\r\n                <span className=\"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full\">\r\n                  {lowStockItems.length}\r\n                </span>\r\n              )}\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab('inventory')}\r\n              className={`px-6 py-3 font-semibold transition-all flex items-center gap-2 ${activeTab === 'inventory'\r\n                ? 'text-blue-600 border-b-2 border-blue-600'\r\n                : 'text-gray-600 hover:text-gray-900'}`}\r\n            >\r\n              <Warehouse className=\"w-5 h-5\" />\r\n              Inventory\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setActiveTab('notifications');\r\n                if (!emailConfig) loadEmailConfig();\r\n              }}\r\n              className={`px-6 py-3 font-semibold transition-all flex items-center gap-2 ${activeTab === 'notifications'\r\n                ? 'text-blue-600 border-b-2 border-blue-600'\r\n                : 'text-gray-600 hover:text-gray-900'}`}\r\n            >\r\n              <Mail className=\"w-5 h-5\" />\r\n              Notifications\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setActiveTab('insights');\r\n                setCriticalAlertsCount(0); // Clear badge when viewing\r\n              }}\r\n              className={`px-6 py-3 font-semibold transition-all flex items-center gap-2 relative ${activeTab === 'insights'\r\n                ? 'text-blue-600 border-b-2 border-blue-600'\r\n                : 'text-gray-600 hover:text-gray-900'}`}\r\n            >\r\n              <Brain className=\"w-5 h-5\" />\r\n              Fleet Insights\r\n              {criticalAlertsCount > 0 && (\r\n                <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold\">\r\n                  {criticalAlertsCount}\r\n                </span>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {/* Fleet Status Tab */}\r\n        {activeTab === 'fleet' && (\r\n          <>\r\n            {/* Fleet Status Grid */}\r\n            <div className=\"mb-8\">\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Fleet Status</h2>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4\">\r\n                {apparatusList.map(apparatus => {\r\n                  const defectCount = fleetStatus.get(apparatus) || 0;\r\n                  const isOk = defectCount === 0;\r\n\r\n                  return (\r\n                    <div \r\n                      key={apparatus}\r\n                      className=\"cursor-pointer hover:scale-105 transition-transform\"\r\n                      onClick={() => loadApparatusLogs(apparatus)}\r\n                    >\r\n                      <Card className={isOk ? 'border-green-500' : 'border-red-500'}>\r\n                        <CardContent className=\"p-6\">\r\n                          <div className=\"flex items-center justify-between mb-3\">\r\n                            <Truck className={`w-8 h-8 ${isOk ? 'text-green-500' : 'text-red-500'}`} />\r\n                            {isOk ? (\r\n                              <CheckCircle className=\"w-6 h-6 text-green-500\" />\r\n                            ) : (\r\n                              <AlertCircle className=\"w-6 h-6 text-red-500\" />\r\n                            )}\r\n                          </div>\r\n                          <h3 className=\"font-bold text-gray-900 mb-1\">{apparatus}</h3>\r\n                          <p className={`text-sm font-semibold ${isOk ? 'text-green-600' : 'text-red-600'}`}>\r\n                            {isOk ? '✓ All Clear' : `${defectCount} Defect${defectCount !== 1 ? 's' : ''}`}\r\n                          </p>\r\n                          <p className=\"text-xs text-gray-500 mt-2\">Click to view history</p>\r\n                        </CardContent>\r\n                      </Card>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Defects List */}\r\n            <div>\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\r\n                Open Defects ({defects.length})\r\n              </h2>\r\n\r\n              {defects.length === 0 ? (\r\n                <Card>\r\n                  <CardContent className=\"py-12 text-center\">\r\n                    <CheckCircle className=\"w-12 h-12 text-green-500 mx-auto mb-4\" />\r\n                    <p className=\"text-lg font-semibold text-gray-900\">No Open Defects</p>\r\n                    <p className=\"text-gray-600 mt-1\">All apparatus are fully operational</p>\r\n                  </CardContent>\r\n                </Card>\r\n              ) : (\r\n                <div className=\"space-y-3\">\r\n                  {defects.map(defect => (\r\n                    <Card key={`${defect.apparatus}-${defect.item}`} className=\"hover:shadow-md transition-shadow\">\r\n                      <CardContent className=\"p-6\">\r\n                        <div className=\"flex flex-col md:flex-row md:items-start md:justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"flex items-center gap-3 mb-2 flex-wrap\">\r\n                              <span className=\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold\">\r\n                                {defect.apparatus}\r\n                              </span>\r\n                              <span className={`px-3 py-1 rounded-full text-sm font-semibold ${\r\n                                defect.status === 'missing'\r\n                                  ? 'bg-red-100 text-red-800'\r\n                                  : 'bg-yellow-100 text-yellow-800'\r\n                              }`}>\r\n                                {defect.status === 'missing' ? '❌ Missing' : '⚠️ Damaged'}\r\n                              </span>\r\n                            </div>\r\n                            <h3 className=\"text-lg font-bold text-gray-900 mb-1\">\r\n                              {defect.compartment}: {defect.item}\r\n                            </h3>\r\n                            <p className=\"text-gray-600 text-sm mb-2\">\r\n                              Reported by {defect.reportedBy} on {formatDateTime(defect.reportedAt)}\r\n                            </p>\r\n                            {defect.notes && (\r\n                              <p className=\"text-gray-700 text-sm bg-gray-50 p-3 rounded-lg\">\r\n                                {defect.notes.split('\\n').slice(0, 3).join('\\n')}\r\n                              </p>\r\n                            )}\r\n                          </div>\r\n                          <Button\r\n                            onClick={() => setSelectedDefect(defect)}\r\n                            variant=\"primary\"\r\n                            size=\"sm\"\r\n                            className=\"mt-3 md:mt-0 md:ml-4\"\r\n                          >\r\n                            Resolve\r\n                          </Button>\r\n                        </div>\r\n                      </CardContent>\r\n                    </Card>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {/* Daily Activity Tab */}\r\n        {activeTab === 'activity' && (\r\n          <div className=\"space-y-6\">\r\n            <div>\r\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                <Calendar className=\"w-6 h-6\" />\r\n                Daily Activity - {today}\r\n              </h2>\r\n\r\n              {/* Today's Submissions */}\r\n              <Card className=\"mb-6\">\r\n                <CardContent className=\"p-6\">\r\n                  <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Today's Submissions</h3>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4\">\r\n                    {apparatusList.map(apparatus => {\r\n                      const hasSubmitted = dailySubmissions?.today.includes(apparatus) || false;\r\n                      return (\r\n                        <div\r\n                          key={apparatus}\r\n                          className={`p-4 rounded-lg border-2 ${\r\n                            hasSubmitted\r\n                              ? 'bg-green-50 border-green-500'\r\n                              : 'bg-gray-50 border-gray-300'\r\n                          }`}\r\n                        >\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <Truck className={`w-6 h-6 ${hasSubmitted ? 'text-green-600' : 'text-gray-400'}`} />\r\n                            {hasSubmitted ? (\r\n                              <CheckCircle className=\"w-5 h-5 text-green-600\" />\r\n                            ) : (\r\n                              <AlertCircle className=\"w-5 h-5 text-gray-400\" />\r\n                            )}\r\n                          </div>\r\n                          <p className=\"font-bold text-gray-900\">{apparatus}</p>\r\n                          <p className={`text-sm font-semibold ${hasSubmitted ? 'text-green-600' : 'text-gray-500'}`}>\r\n                            {hasSubmitted ? '✓ Submitted' : 'Pending'}\r\n                          </p>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              {/* Submission Statistics */}\r\n              <Card>\r\n                <CardContent className=\"p-6\">\r\n                  <h3 className=\"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n                    <TrendingUp className=\"w-5 h-5\" />\r\n                    Submission Statistics (Last 30 Days)\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    {apparatusList.map(apparatus => {\r\n                      const total = dailySubmissions?.totals.get(apparatus) || 0;\r\n                      const lastDate = dailySubmissions?.lastSubmission.get(apparatus);\r\n                      const percentage = Math.round((total / 30) * 100);\r\n                      \r\n                      return (\r\n                        <div key={apparatus} className=\"border-b border-gray-200 pb-3 last:border-0\">\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <Truck className=\"w-5 h-5 text-blue-600\" />\r\n                              <span className=\"font-semibold text-gray-900\">{apparatus}</span>\r\n                            </div>\r\n                            <div className=\"text-right\">\r\n                              <span className=\"text-2xl font-bold text-blue-600\">{total}</span>\r\n                              <span className=\"text-sm text-gray-600 ml-1\">submissions</span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-4 text-sm text-gray-600\">\r\n                            <span>{percentage}% compliance rate</span>\r\n                            {lastDate && <span>Last: {lastDate}</span>}\r\n                          </div>\r\n                          <div className=\"mt-2 w-full bg-gray-200 rounded-full h-2\">\r\n                            <div\r\n                              className={`h-2 rounded-full ${\r\n                                percentage >= 80 ? 'bg-green-500' : percentage >= 50 ? 'bg-yellow-500' : 'bg-red-500'\r\n                              }`}\r\n                              style={{ width: `${Math.min(percentage, 100)}%` }}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Supply Alerts Tab */}\r\n        {activeTab === 'supplies' && (\r\n          <div>\r\n            <h2 className=\"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2\">\r\n              <AlertTriangle className=\"w-6 h-6 text-orange-600\" />\r\n              Supply Alerts\r\n            </h2>\r\n\r\n            {lowStockItems.length === 0 ? (\r\n              <Card>\r\n                <CardContent className=\"py-12 text-center\">\r\n                  <Package className=\"w-12 h-12 text-green-500 mx-auto mb-4\" />\r\n                  <p className=\"text-lg font-semibold text-gray-900\">No Supply Concerns</p>\r\n                  <p className=\"text-gray-600 mt-1\">All items are adequately stocked</p>\r\n                </CardContent>\r\n              </Card>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"bg-orange-50 border-l-4 border-orange-500 p-4 rounded\">\r\n                  <p className=\"text-sm text-orange-800\">\r\n                    <strong>Note:</strong> Items listed below have been reported missing multiple times across different apparatus in the last 30 days. \r\n                    This may indicate a supply shortage requiring attention.\r\n                  </p>\r\n                </div>\r\n\r\n                {lowStockItems.map((item, index) => (\r\n                  <Card key={index} className=\"border-orange-300\">\r\n                    <CardContent className=\"p-6\">\r\n                      <div className=\"flex items-start justify-between\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center gap-3 mb-2\">\r\n                            <AlertTriangle className=\"w-6 h-6 text-orange-600\" />\r\n                            <h3 className=\"text-lg font-bold text-gray-900\">\r\n                              {item.compartment}: {item.item}\r\n                            </h3>\r\n                          </div>\r\n                          <div className=\"space-y-2\">\r\n                            <p className=\"text-sm text-gray-700\">\r\n                              <strong>Reported missing {item.occurrences} time{(item.occurrences !== 1 ? 's' : '')}</strong> in the last 30 days\r\n                            </p>\r\n                            <div className=\"flex items-center gap-2 flex-wrap\">\r\n                              <span className=\"text-sm font-semibold text-gray-700\">Affected apparatus:</span>\r\n                              {item.apparatus.map(apparatus => (\r\n                                <span\r\n                                  key={apparatus}\r\n                                  className=\"px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs font-semibold\"\r\n                                >\r\n                                  {apparatus}\r\n                                </span>\r\n                              ))}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"ml-4\">\r\n                          <span className=\"inline-flex items-center justify-center w-12 h-12 bg-orange-100 rounded-full\">\r\n                            <span className=\"text-xl font-bold text-orange-600\">{item.occurrences}</span>\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </CardContent>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Inventory Tab */}\r\n        {activeTab === 'inventory' && (\r\n          <InventoryTab />\r\n        )}\r\n\r\n        {/* Fleet Insights Tab */}\r\n        {activeTab === 'insights' && (\r\n          <>\r\n            <AIFleetInsights \r\n              adminPassword={passwordInput}\r\n              onCriticalAlertCount={setCriticalAlertsCount}\r\n            />\r\n          </>\r\n        )}\r\n\r\n        {/* Notifications Tab */}\r\n        {activeTab === 'notifications' && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n              <h2 className=\"text-2xl font-bold text-gray-900\">Email Notifications</h2>\r\n              <Button\r\n                onClick={sendTestDigest}\r\n                variant=\"secondary\"\r\n                className=\"flex items-center gap-2\"\r\n              >\r\n                <Mail className=\"w-5 h-5\" />\r\n                Send Test Digest\r\n              </Button>\r\n            </div>\r\n\r\n            {configError && (\r\n              <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\r\n                {configError}\r\n              </div>\r\n            )}\r\n\r\n            {isLoadingConfig ? (\r\n              <div className=\"text-center py-12\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\" />\r\n                <p className=\"text-gray-600\">Loading configuration...</p>\r\n              </div>\r\n            ) : emailConfig ? (\r\n              <div className=\"space-y-6\">\r\n                {/* Master Enable/Disable */}\r\n                <Card>\r\n                  <CardContent className=\"p-6\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <h3 className=\"text-lg font-semibold text-gray-900\">Email Notifications</h3>\r\n                        <p className=\"text-sm text-gray-600 mt-1\">\r\n                          {emailConfig.enabled ? 'Notifications are currently enabled' : 'Notifications are currently disabled'}\r\n                        </p>\r\n                      </div>\r\n                      <Button\r\n                        onClick={() => saveEmailConfig({ enabled: !emailConfig.enabled })}\r\n                        className={emailConfig.enabled ? 'bg-red-600 hover:bg-red-700' : 'bg-green-600 hover:bg-green-700'}\r\n                        disabled={isSavingConfig}\r\n                      >\r\n                        {emailConfig.enabled ? 'Disable' : 'Enable'}\r\n                      </Button>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                {/* Email Mode */}\r\n                <Card>\r\n                  <CardContent className=\"p-6\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Email Mode</h3>\r\n                    <div className=\"space-y-3\">\r\n                      <label className=\"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors\">\r\n                        <input\r\n                          type=\"radio\"\r\n                          name=\"email_mode\"\r\n                          value=\"daily_digest\"\r\n                          checked={emailConfig.email_mode === 'daily_digest'}\r\n                          onChange={e => saveEmailConfig({ email_mode: (e.target as any).value as any })}\r\n                          className=\"mt-1 w-5 h-5 text-blue-600\"\r\n                        />\r\n                        <div>\r\n                          <span className=\"font-semibold\">Daily Digest (Recommended)</span>\r\n                          <p className=\"text-sm text-gray-600\">Send one summary email per day at {emailConfig.digest_send_time}</p>\r\n                        </div>\r\n                      </label>\r\n                      <label className=\"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors\">\r\n                        <input\r\n                          type=\"radio\"\r\n                          name=\"email_mode\"\r\n                          value=\"per_submission\"\r\n                          checked={emailConfig.email_mode === 'per_submission'}\r\n                          onChange={e => saveEmailConfig({ email_mode: (e.target as any).value as any })}\r\n                          className=\"mt-1 w-5 h-5 text-blue-600\"\r\n                        />\r\n                        <div>\r\n                          <span className=\"font-semibold\">Per Submission</span>\r\n                          <p className=\"text-sm text-gray-600\">Send an email immediately after each inspection</p>\r\n                        </div>\r\n                      </label>\r\n                      <label className=\"flex items-start gap-3 p-3 border-2 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors\">\r\n                        <input\r\n                          type=\"radio\"\r\n                          name=\"email_mode\"\r\n                          value=\"hybrid\"\r\n                          checked={emailConfig.email_mode === 'hybrid'}\r\n                          onChange={e => saveEmailConfig({ email_mode: (e.target as any).value as any })}\r\n                          className=\"mt-1 w-5 h-5 text-blue-600\"\r\n                        />\r\n                        <div>\r\n                          <span className=\"font-semibold\">Hybrid</span>\r\n                          <p className=\"text-sm text-gray-600\">Immediate for critical defects, daily digest for routine</p>\r\n                        </div>\r\n                      </label>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                {/* Recipients */}\r\n                <Card>\r\n                  <CardContent className=\"p-6\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Email Recipients</h3>\r\n                    <div className=\"space-y-3\">\r\n                      {emailConfig.recipients.map((email, idx) => (\r\n                        <div key={idx} className=\"flex items-center gap-2\">\r\n                          <input\r\n                            type=\"email\"\r\n                            value={email}\r\n                            onChange={e => {\r\n                              const newRecipients = [...emailConfig.recipients];\r\n                              newRecipients[idx] = e.target.value;\r\n                              setEmailConfig({ ...emailConfig, recipients: newRecipients });\r\n                            }}\r\n                            className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                            placeholder=\"email@example.com\"\r\n                          />\r\n                          <Button\r\n                            onClick={() => {\r\n                              const newRecipients = emailConfig.recipients.filter((_, i) => i !== idx);\r\n                              saveEmailConfig({ recipients: newRecipients });\r\n                            }}\r\n                            variant=\"secondary\"\r\n                            className=\"bg-red-50 hover:bg-red-100 text-red-700\"\r\n                          >\r\n                            Remove\r\n                          </Button>\r\n                        </div>\r\n                      ))}\r\n                      <div className=\"flex gap-2\">\r\n                        <Button\r\n                          onClick={() => {\r\n                            const newRecipients = [...emailConfig.recipients, ''];\r\n                            setEmailConfig({ ...emailConfig, recipients: newRecipients });\r\n                          }}\r\n                          variant=\"secondary\"\r\n                        >\r\n                          + Add Recipient\r\n                        </Button>\r\n                        <Button\r\n                          onClick={() => saveEmailConfig({ recipients: emailConfig.recipients.filter(email => email !== '') })}\r\n                          disabled={isSavingConfig}\r\n                        >\r\n                          Save Recipients\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                {/* Critical Defect Alert */}\r\n                <Card>\r\n                  <CardContent className=\"p-6\">\r\n                    <label className=\"flex items-start gap-3 cursor-pointer\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={emailConfig.enable_immediate_for_critical}\r\n                        onChange={e => saveEmailConfig({ enable_immediate_for_critical: (e.target as any).checked })}\r\n                        className=\"mt-1 w-5 h-5 text-blue-600 rounded\"\r\n                      />\r\n                      <div>\r\n                        <span className=\"font-semibold text-gray-900\">Immediate Alerts for Critical Defects</span>\r\n                        <p className=\"text-sm text-gray-600 mt-1\">\r\n                          Send immediate email when critical defects are found (only in hybrid mode)\r\n                        </p>\r\n                      </div>\r\n                    </label>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                {/* Daily Email Limit */}\r\n                <Card>\r\n                  <CardContent className=\"p-6\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Daily Email Limit</h3>\r\n                    <div className=\"flex items-center gap-4\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={emailConfig.daily_email_hard_cap}\r\n                        onChange={e => setEmailConfig({ ...emailConfig, daily_email_hard_cap: parseInt((e.target as any).value) || 250 })}\r\n                        className=\"w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                        min=\"1\"\r\n                        max=\"500\"\r\n                      />\r\n                      <span className=\"text-gray-600\">emails per day (max: 500)</span>\r\n                      <Button\r\n                        onClick={() => saveEmailConfig({ daily_email_hard_cap: emailConfig.daily_email_hard_cap })}\r\n                        disabled={isSavingConfig}\r\n                      >\r\n                        Save\r\n                      </Button>\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-500 mt-2\">\r\n                      Current: {emailConfig.daily_email_hard_cap} / Recommended: 250\r\n                    </p>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                {/* Email Subject Template */}\r\n                <Card>\r\n                  <CardContent className=\"p-6\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Email Subject Template</h3>\r\n                    <div className=\"space-y-2\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={emailConfig.email_subject_template}\r\n                        onChange={e => setEmailConfig({ ...emailConfig, email_subject_template: (e.target as any).value })}\r\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                        placeholder=\"MBFD Daily Inspection Summary - {date}\"\r\n                      />\r\n                      <p className=\"text-sm text-gray-500\">Use {'{date}'} for the current date</p>\r\n                      <Button\r\n                        onClick={() => saveEmailConfig({ email_subject_template: emailConfig.email_subject_template })}\r\n                        disabled={isSavingConfig}\r\n                      >\r\n                        Save Template\r\n                      </Button>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </div>\r\n            ) : (\r\n              <Card>\r\n                <CardContent className=\"py-12 text-center\">\r\n                  <Mail className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n                  <p className=\"text-gray-600 mb-4\">Click the button below to load email configuration</p>\r\n                  <Button onClick={loadEmailConfig}>\r\n                    Load Configuration\r\n                  </Button>\r\n                </CardContent>\r\n              </Card>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Vehicle Inspection History Modal */}\r\n        <Modal\r\n          isOpen={!!selectedApparatus}\r\n          onClose={() => {\r\n            setSelectedApparatus(null);\r\n            setApparatusLogs([]);\r\n          }}\r\n          title={`${selectedApparatus} - Inspection History (Last 30 Days)`}\r\n        >\r\n          {isLoadingLogs ? (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\" />\r\n              <p className=\"text-gray-600\">Loading inspection history...</p>\r\n            </div>\r\n          ) : apparatusLogs.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <Calendar className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n              <p className=\"text-lg font-semibold text-gray-900\">No Inspection History</p>\r\n              <p className=\"text-gray-600 mt-1\">No inspections found for {selectedApparatus} in the last 30 days</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-4 max-h-96 overflow-y-auto\">\r\n              {apparatusLogs.map((log, idx) => {\r\n                const dateMatch = log.title.match(/- (.+)$/);\r\n                const inspectionDate = dateMatch ? dateMatch[1] : 'Unknown Date';\r\n                \r\n                // Parse body to extract summary info\r\n                const totalMatch = log.body.match(/Total Items Checked:\\*\\* (\\d+)/);\r\n                const issuesMatch = log.body.match(/Issues Found:\\*\\* (\\d+)/);\r\n                const totalItems = totalMatch ? parseInt(totalMatch[1]) : 0;\r\n                const issuesFound = issuesMatch ? parseInt(issuesMatch[1]) : 0;\r\n                \r\n                // Parse receipt URL if present\r\n                const receiptMatch = log.body.match(/\\[View Full Printable Receipt\\]\\(([^)]+)\\)/);\r\n                const receiptURL = receiptMatch ? receiptMatch[1] : null;\r\n                \r\n                const hasIssues = issuesFound > 0;\r\n                \r\n                return (\r\n                  <Card key={log.number || idx} className={`${hasIssues ? 'border-yellow-300' : 'border-green-300'}`}>\r\n                    <CardContent className=\"p-4\">\r\n                      <div className=\"flex items-start justify-between mb-3\">\r\n                        <div>\r\n                          <div className=\"flex items-center gap-2 mb-1\">\r\n                            <Calendar className=\"w-4 h-4 text-gray-600\" />\r\n                            <p className=\"font-semibold text-gray-900\">{inspectionDate}</p>\r\n                          </div>\r\n                          <p className=\"text-sm text-gray-600\">\r\n                            {formatDateTime(log.created_at)}\r\n                          </p>\r\n                        </div>\r\n                        {hasIssues ? (\r\n                          <span className=\"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold\">\r\n                            {issuesFound} Issue{issuesFound !== 1 ? 's' : ''}\r\n                          </span>\r\n                        ) : (\r\n                          <span className=\"px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold flex items-center gap-1\">\r\n                            <CheckCircle className=\"w-3 h-3\" />\r\n                            All Clear\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <div className=\"bg-gray-50 p-3 rounded-lg text-sm text-gray-700 space-y-2\">\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"font-medium\">Items Checked:</span>\r\n                          <span className=\"font-semibold\">{totalItems}</span>\r\n                        </div>\r\n                        <div className=\"flex justify-between\">\r\n                          <span className=\"font-medium\">Issues Found:</span>\r\n                          <span className={`font-semibold ${hasIssues ? 'text-yellow-600' : 'text-green-600'}`}>\r\n                            {issuesFound}\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      {hasIssues && (\r\n                        <div className=\"mt-3 bg-yellow-50 p-3 rounded-lg\">\r\n                          <p className=\"text-xs font-semibold text-yellow-900 mb-2\">Issues Reported:</p>\r\n                          <div className=\"text-xs text-yellow-800 whitespace-pre-wrap\">\r\n                            {log.body.split('### Issues Reported')[1]?.split('---')[0]?.trim() || 'Details not available'}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      <div className=\"mt-3 flex items-center gap-3 justify-end\">\r\n                        {receiptURL && (\r\n                          <a\r\n                            href={receiptURL}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"text-sm bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-300 px-3 py-2 rounded-lg font-medium transition-colors flex items-center gap-1\"\r\n                          >\r\n                            📋 View Receipt\r\n                          </a>\r\n                        )}\r\n                        <a\r\n                          href={log.html_url}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"text-sm text-blue-600 hover:text-blue-800 font-medium\"\r\n                        >\r\n                          View Full Details →\r\n                        </a>\r\n                      </div>\r\n                    </CardContent>\r\n                  </Card>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </Modal>\r\n\r\n        {/* Resolution Modal */}\r\n        <Modal\r\n          isOpen={!!selectedDefect}\r\n          onClose={() => {\r\n            setSelectedDefect(null);\r\n            setResolutionNote('');\r\n          }}\r\n          title=\"Resolve Defect\"\r\n        >\r\n          {selectedDefect && (\r\n            <div className=\"space-y-4\">\r\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                <p className=\"text-sm text-gray-600 mb-1\">Apparatus</p>\r\n                <p className=\"font-semibold text-gray-900\">{selectedDefect.apparatus}</p>\r\n                \r\n                <p className=\"text-sm text-gray-600 mt-3 mb-1\">Item</p>\r\n                <p className=\"font-semibold text-gray-900\">\r\n                  {selectedDefect.compartment}: {selectedDefect.item}\r\n                </p>\r\n                \r\n                <p className=\"text-sm text-gray-600 mt-3 mb-1\">Status</p>\r\n                <p className=\"font-semibold text-gray-900\">\r\n                  {selectedDefect.status === 'missing' ? 'Missing' : 'Damaged'}\r\n                </p>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                  Resolution Notes\r\n                </label>\r\n                <textarea\r\n                  value={resolutionNote}\r\n                  onChange={e => setResolutionNote((e.target as any).value)}\r\n                  placeholder=\"Describe how this was resolved (e.g., 'Replaced with spare', 'Item found and returned', 'Repaired by maintenance')\"\r\n                  rows={4}\r\n                  className=\"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex gap-3\">\r\n                <Button\r\n                  onClick={handleResolve}\r\n                  disabled={isResolving || !resolutionNote.trim()}\r\n                  className=\"flex-1\"\r\n                >\r\n                  {isResolving ? (\r\n                    <>\r\n                      <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\" />\r\n                      Resolving...\r\n                    </>\r\n                  ) : (\r\n                    'Mark as Resolved'\r\n                  )}\r\n                </Button>\r\n                <Button\r\n                  onClick={() => {\r\n                    setSelectedDefect(null);\r\n                    setResolutionNote('');\r\n                  }}\r\n                  variant=\"secondary\"\r\n                  className=\"flex-1\"\r\n                  disabled={isResolving}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </Modal>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":["__iconNode","ArrowLeft","createLucideIcon","Brain","CircleAlert","CircleX","ClipboardList","Clock","Lightbulb","Lock","Mail","Package","RefreshCw","Search","Sparkles","TrendingUp","Truck","Warehouse","AIFleetInsights","adminPassword","onCriticalAlertCount","aiInsights","setAiInsights","useState","isLoadingInsights","setIsLoadingInsights","insightsError","setInsightsError","selectedTimeframe","setSelectedTimeframe","selectedApparatus","setSelectedApparatus","loadAIInsights","apparatus","insights","githubService","criticalCount","insight","error","useEffect","renderInsightCard","index","isCritical","isWarning","isPositive","bgColor","borderColor","textColor","icon","jsx","CheckCircle","AlertTriangle","jsxs","Button","Card","CardContent","value","label","e","APPARATUS_LIST","i","SupplyListPanel","items","isLoading","onRefresh","searchTerm","setSearchTerm","sortField","setSortField","sortDirection","setSortDirection","filteredAndSortedItems","useMemo","results","term","item","a","b","compareValue","toggleSort","field","isLowStock","useSupplyTasks","status","tasks","setTasks","setIsLoading","setError","count","setCount","loadTasks","useCallback","data","fetchTasks","err","errorMessage","completeTask","taskId","chosenReplacement","completedBy","notes","updateTask","cancelTask","TasksPanel","activeStatus","setActiveStatus","refresh","processingTaskId","setProcessingTaskId","handleComplete","itemName","handleCancel","AlertCircle","XCircle","task","formatDateTime","Fragment","useInventory","setItems","lastFetchedAt","setLastFetchedAt","loadInventory","fetchInventory","SuggestionsPanel","tasksLoading","inventoryLoading","tasksWithSuggestions","React","suggestions","s","itemType","confidence","suggestion","idx","AIInsightsPanel","inventory","isGenerating","setIsGenerating","setInsights","aiNotConfigured","setAiNotConfigured","loadInsights","result","fetchAIInsights","handleGenerateInsights","generateAIInsights","t","parseInsightData","insightJson","latestInsight","parsedInsight","issue","anomaly","InventoryTab","activeSubTab","setActiveSubTab","AdminDashboard","navigate","useNavigate","isAuthenticated","setIsAuthenticated","passwordInput","setPasswordInput","passwordError","setPasswordError","activeTab","setActiveTab","fleetStatus","setFleetStatus","defects","setDefects","dailySubmissions","setDailySubmissions","lowStockItems","setLowStockItems","selectedDefect","setSelectedDefect","resolutionNote","setResolutionNote","isResolving","setIsResolving","showResolveSuccess","setShowResolveSuccess","emailConfig","setEmailConfig","isLoadingConfig","setIsLoadingConfig","isSavingConfig","setIsSavingConfig","configError","setConfigError","criticalAlertsCount","setCriticalAlertsCount","apparatusLogs","setApparatusLogs","isLoadingLogs","setIsLoadingLogs","loadApparatusLogs","filteredLogs","log","handlePasswordSubmit","loadDashboardData","allDefects","submissions","lowStock","handleResolve","loadEmailConfig","config","saveEmailConfig","updates","sendTestDigest","interval","apparatusList","today","Calendar","defectCount","isOk","defect","hasSubmitted","total","lastDate","percentage","email","newRecipients","_","Modal","dateMatch","inspectionDate","totalMatch","issuesMatch","totalItems","issuesFound","receiptMatch","receiptURL","hasIssues"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]}